{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/herocalc/AbilityModel.js","src/herocalc/BuffViewModel.js","src/herocalc/buffs/BuffModel.js","src/herocalc/buffs/buffOptionsArray.js","src/herocalc/buffs/debuffOptionsArray.js","src/herocalc/data/HeroCalcData.js","src/herocalc/data/main.js","src/herocalc/hero/CloneModel.js","src/herocalc/hero/DamageTypeColor.js","src/herocalc/hero/HeroDamageMixin.js","src/herocalc/hero/HeroModel.js","src/herocalc/hero/HeroOption.js","src/herocalc/hero/IllusionModel.js","src/herocalc/hero/TalentController.js","src/herocalc/hero/UnitModel.js","src/herocalc/hero/diffProperties.js","src/herocalc/hero/heroOptionsArray.js","src/herocalc/hero/nextLevelExp.js","src/herocalc/hero/totalExp.js","src/herocalc/herocalc_abilitydata.js","src/herocalc/herocalc_knockout.js","src/herocalc/illusion/illusionData.js","src/herocalc/inventory/BasicInventoryViewModel.js","src/herocalc/inventory/InventoryViewModel.js","src/herocalc/inventory/ItemInput.js","src/herocalc/inventory/itemBuffOptions.js","src/herocalc/inventory/itemDebuffOptions.js","src/herocalc/inventory/itemOptionsArray.js","src/herocalc/inventory/itemsWithActive.js","src/herocalc/inventory/levelItems.js","src/herocalc/inventory/stackableItems.js","src/herocalc/inventory/validItems.js","src/herocalc/main.js","src/herocalc/util/extend.js","src/herocalc/util/findWhere.js","src/herocalc/util/getJSON.js","src/herocalc/util/isEmpty.js","src/herocalc/util/isString.js","src/herocalc/util/main.js","src/herocalc/util/union.js","src/herocalc/util/uniqueId.js","src/herocalc/util/uniques.js","src/lib/knockout.mapping.js","src/lib/knockout.wrap.js"],"names":["ko","require","abilityData","AbilityModel","a","h","self","this","hero","hasScepter","observable","isShapeShiftActive","abilities","_abilities","i","length","level","isActive","isDetail","baseDamage","baseDamageReductionPct","baseDamageMultiplier","bash","bashBonusDamage","bonusDamage","bonusDamageOrb","bonusDamagePct","bonusDamagePrecisionAura","bonusDamageReduction","bonusHealth","bonusStrength","bonusStrength2","bonusAgility","bonusAgility2","bonusInt","bonusAllStatsReduction","damageAmplification","damageReduction","evasion","magicResist","manaregen","manaregenreduction","missChance","movementSpeedFlat","movementSpeedPct","movementSpeedPctReduction","turnRateReduction","attackrange","attackspeed","attackspeedreduction","armor","armorReduction","healthregen","lifesteal","visionnight","visionday","abilityControlData","abilitySettingsData","data","parent","index","undefined","processAbility","args","result","v","v_list","controlType","extend","numeric","controlValueType","push","labelName","label","toUpperCase","controlVal","display","controlOptions","value","controls","noLevel","attributeValue","attributeName","fn","computed","_ability","find","b","name","getAbilityAttributeValue","attributes","g","r","getComputedFunction","returnProperty","ignoreTooltip","tooltip","getAbilityAttributeTooltip","clean","abilityModel","abilityName","pureComputed","inputValue","parseFloat","returnVal","call","getAbilityLevelByAbilityName","getAbilityByName","getAbilityPropertyValue","ability","property","utils","unwrapObservable","getAttributeBonusLevel","getAllStatsReduction","totalAttribute","behavior","indexOf","j","getStrengthReduction","getStrength","getAgility","attribute","getIntelligence","getArmor","getArmorBaseReduction","getArmorReduction","getHealth","isTrueFormActive","getHealthRegen","getMana","getManaRegen","getManaRegenArcaneAura","getManaRegenReduction","getAttackRange","getAttackSpeed","getAttackSpeedReduction","getBash","getBaseDamage","totalMultiplier","sources","damage","damageType","displayname","total","multiplier","getSelfBaseDamageReductionPct","getBaseDamageReductionPct","getBAT","getBonusDamage","getBonusDamagePercent","heroId","getBonusDamageBackstab","totalAttribute1","getBonusDamagePrecisionAura","totalAttribute2","getBonusDamageReduction","getBonusDamageReductionPct","getDamageAmplification","getDamageReduction","getCritSource","chance","count","getCleaveSource","radius","magnitude","getCritChance","getEvasion","getEvasionBacktrack","getMissChance","getLifesteal","getSpellAmp","getCooldownReductionFlat","getCooldownReductionPercent","getCooldownIncreaseFlat","getCooldownIncreasePercent","getMagicResist","getMagicResistReduction","getMovementSpeedFlat","getMovementSpeedPercent","getMovementSpeedPercentReduction","getTurnRateReduction","getVisionRangeNight","getVisionRangePctReduction","setEvasion","setMovementSpeed","getBashSource","attacktype","getOrbSource","totalInt","toggleAbility","event","bind","toggleAbilityDetail","getAbility","prototype","levelUpAbility","getAbilityLevelMax","availableSkillPoints","abilitytype","parseInt","selectedHeroLevel","skillPointHistory","levelDownAbility","splice","lastIndexOf","hasOwnProperty","d","replace","module","exports","InventoryViewModel","findWhere","buffOptionsArray","debuffOptionsArray","BuffViewModel","itemData","observableArray","availableBuffs","items","availableDebuffs","selectedBuff","buffs","itemBuffs","addBuff","buffName","JSON","parse","stringify","removeBuff","remove","dispose","toggleBuff","toggleBuffDetail","Object","create","constructor","BuffModel","heroData","unitData","buffDisplayName","init","HeroCalcData","getJSON","isEmpty","isString","out","arguments","key","resourceCounter","onResourceLoaded","callback","fixHeroData","modifyItemData","HERODATA_PATH","ITEMDATA_PATH","UNITDATA_PATH","HeroModel","CloneModel","p","DamageTypeColor","physical","pure","magic","default","TalentController","HeroDamageMixin","critInfo","compareByMultiplier","critSources","inventory","critSourcesArray","prop","el","sort","critTotal","k","total2","totalChance","cleaveInfo","compareByRadius","cleaveSources","cleaveSourcesArray","cleaveSourcesByRadius","bashInfo","bashSources","bashSourcesArray","bashTotal","totalMovementSpeed","orbProcInfo","compareByDamage","priority","damageSources","getOrbProcSource","damageSourcesArray","damageTotal","getReducedDamage","type","enemy","totalArmorPhysical","Math","abs","totalMagicResistance","debuffs","damageTotalInfo","bonusDamageArray","selectedTalents","bonusDamagePctArray","itemBonusDamage","itemBonusDamagePct","abilityOrbSources","itemOrbSources","itemProcOrbSources","attackSources","cooldown","cd","o","item","enabled","item_echo_sabre","attacks","map","totalDamage","totalCritableDamage","totalCrit","geminateAttack","damageReduced","active","crits","s","totalAgi","attacksPerSecond","max","dps","dpsReduced","pow","orb","keys","toFixed","totalReduced","totalCritReduced","base","crit","reduced","forEach","totalCritChance","reduce","memo","t1Crit","c","t2Crit","t3Crit","filter","t4Crit","t1","t2","t3","t4","totalCritRow","totalRow","visible","sourcesCrit","totalGeminateAttack","totalGeminateAttackReduced","sumTotal","sumTotalReduced","getDamageTypeColor","diffProperties","totalExp","nextLevelExp","selectedInventory","heroCompare","unit","clone","talents","arr","removeAll","talent","primaryAttribute","attributeprimary","startingArmor","attributebaseagility","armorphysical","respawnTime","reduction","getRespawnReduction","totalStr","attributeagilitygain","getAttributes","intStolen","attributebaseintelligence","attributeintelligencegain","attributebasestrength","attributestrengthgain","health","statushealth","floor","healthRegenAura","getHealthRegenAura","obj","excludeList","statushealthregen","mana","statusmana","statusmanaregen","getManaRegenPercent","getManaRegenBloodstone","armorAura","getArmorAura","totalArmorPhysicalReduction","spellAmp","cooldownReductionFlat","cooldownReductionProduct","cooldownReductionPercent","ms","movementSpeedPercent","movementSpeedPercentReduction","isSheeped","movementspeed","totalTurnRate","movementturnrate","abilityBaseDamage","minDamage","attackdamagemin","maxDamage","attackdamagemax","baseDamageAvg","baseDamageMin","baseDamageMax","damageAvg","damageMin","damageMax","totalMagicResistanceProduct","magicalresistance","getMagicResistReductionSelf","bat","abilityBAT","attackrate","ias","attackSpeed","attackSpeedAura","getAttackSpeedAura","attackSpeedReduction","val","attackTime","e","ehpPhysical","ehp","activeItems","some","ehpMagical","critChance","missDebuff","totalattackrange","visionrangeday","visionrangenight","visionnighttimerange","getLifestealAura","diff","getDiffFunction","deferEvaluation","toggleTalent","talentTier","talentIndex","HeroOption","heroName","heroDisplayName","illusionData","IllusionModel","abilityLevel","illusionAbilityLevel","abilityObj","getIncomingDamageMultiplier","illusionType","attackType","incoming_damage_melee","incoming_damage_ranged","incoming_damage","getOutgoingDamageMultiplier","outgoing_damage_melee","outgoing_damage_ranged","outgoing_damage","startsWith","UnitModel","unitId","unitLevel","subscribe","newValue","heroOptionsArray","alchemist_acid_spray","alchemist_unstable_concoction","ancient_apparition_cold_feet","ancient_apparition_ice_blast","antimage_mana_void","axe_battle_hunger","bane_nightmare","bane_fiends_grip","batrider_sticky_napalm","batrider_firefly","bloodseeker_rupture","bristleback_viscous_nasal_goo","bristleback_quill_spray","damage_cap","bristleback_bristleback","text","bristleback_warpath","centaur_return","centaur_stampede","clinkz_death_pact","crystal_maiden_frostbite","dark_seer_ion_shell","dazzle_shadow_wave","dazzle_weave","death_prophet_exorcism","disruptor_static_storm","doom_bringer_scorched_earth","doom_bringer_doom","dragon_knight_elder_dragon_form","drow_ranger_trueshot","earth_spirit_rolling_boulder","earthshaker_enchant_totem","earthshaker_echo_slam","elder_titan_ancestral_spirit","elder_titan_earth_splitter","enchantress_natures_attendants","enigma_malefice","enigma_midnight_pulse","enigma_black_hole","faceless_void_time_lock","gyrocopter_rocket_barrage","huskar_burning_spear","huskar_berserkers_blood","min","hp_threshold_max","huskar_life_break","invoker_quas","invoker_wex","invoker_exort","invoker_ghost_walk","invoker_alacrity","invoker_ice_wall","jakiro_dual_breath","jakiro_liquid_fire","jakiro_macropyre","juggernaut_blade_fury","juggernaut_healing_ward","juggernaut_omni_slash","keeper_of_the_light_illuminate","keeper_of_the_light_mana_leak","legion_commander_duel","leshrac_pulse_nova","lich_chain_frost","life_stealer_feast","life_stealer_open_wounds","lina_fiery_soul","lion_mana_drain","luna_moon_glaive","join","luna_eclipse","lucentBeamAbility","medusa_mystic_snake","snake_jumps","snake_scale","slice","medusa_mana_shield","meepo_poof","meepo_geostrike","mirana_arrow","arrow_min_stun","arrow_max_stunrange","scale","bonus_damage","morphling_morph_agi","morphling_morph_str","furion_wrath_of_nature","necrolyte_heartstopper_aura","necrolyte_sadist","hero_multiplier","night_stalker_crippling_fear","night_stalker_hunter_in_the_night","obsidian_destroyer_arcane_orb","ogre_magi_ignite","pudge_rot","pudge_flesh_heap","pudge_dismember","pugna_nether_ward","pugna_life_drain","queenofpain_shadow_strike","razor_plasma_field","max_radius","damage_min","razor_static_link","tick_duration","razor_eye_of_the_storm","rubick_fade_bolt","sandking_sand_storm","sandking_epicenter","shadow_demon_shadow_poison","stackmult","nevermore_necromastery","nevermore_requiem","shadow_shaman_shackles","silencer_curse_of_the_silent","skywrath_mage_mystic_flare","slark_essence_shift","slark_shadow_dance","sniper_shrapnel","spectre_desolate","spectre_dispersion","storm_spirit_ball_lightning","templar_assassin_psionic_trap","shredder_reactive_armor","shredder_chakram","interval","spirit_breaker_greater_bash","techies_land_mines","techies_suicide","techies_remote_mines","tinker_march_of_the_machines","treant_leech_seed","troll_warlord_fervor","undying_decay","undying_soul_rip","undying_flesh_golem","min_speed_slow","full_power_radius","distance","min_damage_amp","ursa_fury_swipes","enrageAbility","ursa_enrage","venomancer_venomous_gale","venomancer_poison_sting","venomancer_poison_nova","viper_poison_attack","viper_corrosive_skin","viper_viper_strike","visage_soul_assumption","soul_base_damage","stack_limit","visage_gravekeepers_cloak","warlock_shadow_word","warlock_upheaval","max_slow","slow_per_tick","ticks","weaver_the_swarm","windrunner_powershot","winter_wyvern_cold_embrace","wisp_spirits","wisp_overcharge","witch_doctor_paralyzing_cask","bounces","witch_doctor_voodoo_restoration","witch_doctor_maledict","duration","witch_doctor_death_ward","zuus_static_field","window","global","mapping","wrap","extenders","target","opts","read","write","current","roundingMultiplier","precision","newValueAsNum","isNaN","defaultValue","valueToWrite","round","notifySubscribers","notify","chaos_knight_phantasm","displayName","use_selected_hero","max_level","naga_siren_mirror_image","dark_seer_wall_of_replica","outgoing_damage_scepter","morphling_replicate","phantom_lancer_doppelwalk","phantom_lancer_juxtapose","phantom_lancer_spirit_lance","shadow_demon_disruption","spectre_haunt","terrorblade_conjure_image","terrorblade_reflection","item_manta","is_item","stackableItems","levelItems","itemsWithActive","BasicInventoryViewModel","addItem","selectedItem","new_item","split","state","size","itemInputValue","toggleItem","removeItem","toggleMuteItem","getItemImage","getItemSizeLabel","getActiveBorder","getItemAttributeValue","itemOptionsArray","itemBuffOptions","itemDebuffOptions","hasInventory","isEthereal","totalCost","itemcost","addItemBuff","selectedItemBuff","addItemDebuff","selectedItemDebuff","debuff","attributetype","aList","attributeList","selfExcludeList","hasBoots","hasWindLace","hasDrums","bootItems","hasYasha","hasDrumsActive","hasPhaseActive","hasShadowBladeActive","hasButterflyActive","hasMoMActive","yashaItems","hasPowerTreads","itemOptions","ItemInput","ItemAliases","Array","itemAlias","id","itemDebuffs","validItems","core","Data","Util","HeroOptions","BuffOptions","DebuffOptions","ItemOptions","ItemBuffOptions","ItemDebuffOptions","arrLoop","url","successCallback","errorCallback","request","XMLHttpRequest","open","onload","status","responseText","onerror","send","myVar","String","util","union","uniqueId","uniques","concat","idCounter","prefix","l","factory","define","unionArrays","x","y","res","extendObject","destination","source","destType","getType","bothArrays","merge","obj1","obj2","merged","fillOptions","rawOptions","otherOptions","options","recognizedRootProperties","ignore","mergeArrays","include","copy","observe","defaultOptions","mappedProperties","copiedProperties","arrayGetDistinctValues","withProxyDependentObservable","dependentObservables","localDO","dependentObservable","owner","realDeferEvaluation","isRemoved","realDependentObservable","realKoDependentObservable","DO","tmp","isWriteable","isWriteableObservable","wrapped","arrayRemoveItem","apply","DEBUG","_wrapper","__DO","updateViewModel","mappedRootObject","rootObject","parentName","parentPropertyName","mappedParent","isArray","isMapped","previousMapping","mappingProperty","callbackParams","hasCreateCallback","Function","createCallback","skip","emptyReturn","hasUpdateCallback","update","updateCallback","params","alreadyMapped","visitedObjects","get","changes","hasKeyCallback","keyCallback","isObservable","mappedRemove","valueOrPredicate","predicate","mappedRemoveAll","arrayOfValues","arrayOfKeys","filterArrayByKey","arrayIndexOf","mappedDestroy","destroy","mappedDestroyAll","mappedIndexOf","mappedGet","mappedCreate","Error","currentArrayKeys","newArrayKeys","editScript","compareArrays","ignoreIndexOf","unwrappedRootObject","itemsByKey","optimizedKeys","newContents","passedOver","mappedItem","fullPropertyName","getItemByKey","ignorableIndexOf","arrayChanged","arrayForEach","change","canHaveProperties","save","visitPropertiesOrArrayEntries","indexer","prevMappedProperty","retval","hasCreateOrUpdateCallback","array","ignoreIndices","mapKey","arrayMap","visitorCallback","propertyName","object","getPropertyName","simpleObjectLookup","values","existingIndex","objectLookup","buckets","findBucket","bucketKey","bucket","mappingNesting","_defaultOptions","viewModel","unwrapped","fromJS","jsObject","pop","fromJSON","jsonString","parsed","parseJson","updateFromJS","updateFromJSON","toJS","resetDefaultOptions","visitModel","toJSON","plainJavaScriptObject","stringifyJson","Date","propertyValue","previouslyMappedValue","typeOf","toString","unwrapObject","t","isComputed","unwrap","unwrapArray","reset","parents","lvl","wrapObject","computedFunctions","currentLvl","hasES5Plugin","track","wrapArray"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\nvar ko = require('./herocalc_knockout');\nvar abilityData = require(\"./herocalc_abilitydata\");\n\nvar AbilityModel = function (a, h) {\n    var self = this;\n    self.hero = h;\n    self.abilityData = abilityData;\n    self.hasScepter = ko.observable(false);\n    self.isShapeShiftActive = ko.observable(false);\n    self.abilities = a;\n    self._abilities = self.abilities();\n    for (var i = 0; i < self.abilities().length; i++) {\n        self._abilities[i].level = ko.observable(0);\n        self._abilities[i].isActive = ko.observable(false);\n        self._abilities[i].isDetail = ko.observable(false);\n        self._abilities[i].baseDamage = ko.observable(0);\n        self._abilities[i].baseDamageReductionPct = ko.observable(0);\n        self._abilities[i].baseDamageMultiplier = ko.observable(0);\n        self._abilities[i].bash = ko.observable(0);\n        self._abilities[i].bashBonusDamage = ko.observable(0);\n        self._abilities[i].bonusDamage = ko.observable(0);\n        self._abilities[i].bonusDamageOrb = ko.observable(0);\n        self._abilities[i].bonusDamagePct = ko.observable(0);\n        self._abilities[i].bonusDamagePrecisionAura = ko.observable(0);\n        self._abilities[i].bonusDamageReduction = ko.observable(0);\n        self._abilities[i].bonusHealth = ko.observable(0);\n        self._abilities[i].bonusStrength = ko.observable(0);\n        self._abilities[i].bonusStrength2 = ko.observable(0);\n        self._abilities[i].bonusAgility = ko.observable(0);\n        self._abilities[i].bonusAgility2 = ko.observable(0);\n        self._abilities[i].bonusInt = ko.observable(0);\n        self._abilities[i].bonusAllStatsReduction = ko.observable(0);\n        self._abilities[i].damageAmplification = ko.observable(0);\n        self._abilities[i].damageReduction = ko.observable(0);\n        self._abilities[i].evasion = ko.observable(0);\n        self._abilities[i].magicResist = ko.observable(0);\n        self._abilities[i].manaregen = ko.observable(0);\n        self._abilities[i].manaregenreduction = ko.observable(0);\n        self._abilities[i].missChance = ko.observable(0);\n        self._abilities[i].movementSpeedFlat = ko.observable(0);\n        self._abilities[i].movementSpeedPct = ko.observable(0);\n        self._abilities[i].movementSpeedPctReduction = ko.observable(0);\n        self._abilities[i].turnRateReduction = ko.observable(0);\n        self._abilities[i].attackrange = ko.observable(0);\n        self._abilities[i].attackspeed = ko.observable(0);\n        self._abilities[i].attackspeedreduction = ko.observable(0);\n        self._abilities[i].armor = ko.observable(0);\n        self._abilities[i].armorReduction = ko.observable(0);\n        self._abilities[i].healthregen = ko.observable(0);\n        self._abilities[i].lifesteal = ko.observable(0);\n        self._abilities[i].visionnight = ko.observable(0);\n        self._abilities[i].visionday = ko.observable(0);\n    }\n    self.abilityControlData = {};\n    self.abilitySettingsData = function (data, parent, index) {\n        if (self.abilityControlData[data] == undefined) {\n            return self.processAbility(data, parent, index, self.abilityData[data]);\n        }\n        else {\n            return self.abilityControlData[data];\n        }\n    }\n    \n    self.processAbility = function (data, parent, index, args) {\n        var result = {};\n        result.data = [];\n        var v;\n        var v_list = [];\n        for (var i=0; i < args.length; i++) {\n            switch (args[i].controlType) {\n                case 'input':\n                    v = ko.observable(0).extend({ numeric: 2 });\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + ':', controlVal: v, controlType: args[i].controlType, display: args[i].display });\n                break;\n                case 'checkbox':\n                    v = ko.observable(false);\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + '?', controlVal: v, controlType: args[i].controlType, display: args[i].display });\n                break;\n                case 'radio':\n                    v = ko.observable(args[i].controlOptions[0].value);\n                    v.controlValueType = args[i].controlValueType;\n                    v_list.push(v);\n                    result.data.push({ labelName: args[i].label.toUpperCase() + '?', controlVal: v, controlType: args[i].controlType, display: args[i].display, controlOptions: args[i].controlOptions });\n                break;\n                case 'method':\n                case 'text':\n                    // single input abilities\n                    if (args[i].controls == undefined) {\n                        if (args[i].noLevel) {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    var _ability = self.abilities().find(function(b) {\n                                        return b.name == data;\n                                    });\n                                    return self.getAbilityAttributeValue(_ability.attributes, attributeName, 0);\n                                })};\n                            };\n                        }\n                        else {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    var _ability = self.abilities().find(function(b) {\n                                        return b.name == data;\n                                    });\n                                    return self.getAbilityAttributeValue(_ability.attributes, attributeName, _ability.level());\n                                })};\n                            };\n                        }\n                        var g = attributeValue(args[i].attributeName)\n                        var r = self.getComputedFunction(v, g.fn, args[i].fn, parent, index, self, args[i].returnProperty, undefined, data);\n                        if (args[i].ignoreTooltip) {\n                            var tooltip = args[i].label || args[i].attributeName;\n                        }\n                        else {\n                            var tooltip = self.getAbilityAttributeTooltip(self.abilities()[index].attributes, args[i].attributeName) || args[i].label || args[i].attributeName;\n                        }\n                        result.data.push({ labelName: tooltip.toUpperCase(), controlVal: r, controlType: args[i].controlType, display: args[i].display, clean: g.fn });\n                    }\n                    // multi input abilities\n                    else {\n                        if (args[i].noLevel) {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    return self.getAbilityAttributeValue(self.abilities()[index].attributes, attributeName, 0);\n                                })};\n                            };\n                        }\n                        else {\n                            var attributeValue = function (attributeName) {\n                                return {fn: ko.computed(function () {\n                                    return self.getAbilityAttributeValue(self.abilities()[index].attributes, attributeName, self.abilities()[index].level());\n                                })};\n                            };\n                        }\n                        var g = attributeValue(args[i].attributeName)\n                        var r = self.getComputedFunction(v_list, g.fn, args[i].fn, parent, index, self, args[i].returnProperty, args[i].controls, data);\n                        if (args[i].ignoreTooltip) {\n                            var tooltip = args[i].label || args[i].attributeName;\n                        }\n                        else {\n                            var tooltip = self.getAbilityAttributeTooltip(self.abilities()[index].attributes, args[i].attributeName) || args[i].label || args[i].attributeName;\n                        }\n                        result.data.push({ labelName: tooltip.toUpperCase(), controlVal: r, controlType: args[i].controlType, display: args[i].display, clean: g.fn });\n                    }\n                    \n                    if (args[i].controlType == 'method') {\n                        v_list.push(r);\n                    }\n                break;\n            }\n        }\n        self.abilityControlData[data] = result;\n        return result;\n    }\n\n    self.getComputedFunction = function (v, attributeValue, fn, parent, index, abilityModel, returnProperty, controls, abilityName) {\n        var _ability = abilityModel.abilities().find(function(b) {\n            return b.name == abilityName;\n        });\n        return ko.pureComputed(function () {                \n            var inputValue;\n            if (controls == undefined) {\n                if (v == undefined) {\n                    inputValue = v;\n                }\n                else if (typeof v() == 'boolean') {\n                    inputValue = v();\n                }\n                else if (v.controlValueType == undefined) {\n                    inputValue = parseFloat(v());\n                }\n                else if (v.controlValueType == 'string') {\n                    inputValue = v();\n                }\n                else {\n                    inputValue = parseFloat(v());\n                }\n            }\n            else {\n                var v_list = [];\n                for (var i=0;i<controls.length;i++) {\n                    switch (typeof v[controls[i]]()) {\n                        case 'boolean':\n                        case 'object':\n                            v_list.push(v[controls[i]]());\n                        break;\n                        default:\n                            v_list.push(parseFloat(v[controls[i]]()));\n                        break;\n                    }\n                }\n                inputValue = v_list;\n            }\n            \n            var returnVal = fn.call(this, inputValue, attributeValue(), parent, index, abilityModel, _ability);\n            if (returnProperty != undefined) {\n                _ability[returnProperty](returnVal);\n            }\n            return returnVal;\n        }, this);\n    }\n    \n    self.getAbilityLevelByAbilityName = function (abilityName) {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == abilityName) {\n                return self._abilities[i].level();\n            }\n        }\n        return -1;\n    }\n\n    self.getAbilityByName = function (abilityName) {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == abilityName) {\n                return self._abilities[i];\n            }\n        }\n        return undefined;\n    }\n\n    self.getAbilityPropertyValue = function (ability, property) {\n        return parseFloat(ko.utils.unwrapObservable(ability[property])[ability.level()-1]);\n    }\n    \n    self.getAttributeBonusLevel = function () {\n        for (var i = 0; i < self.abilities().length; i++) {\n            if (self._abilities[i].name == 'attribute_bonus') {\n                return self._abilities[i].level();\n            }\n        }\n        return 0;        \n    }\n    \n    self.getAllStatsReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {                    \n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        /*switch(attribute.name) {\n                            // invoker_quas\n                            case 'bonus_strength':\n                                totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                            break;\n                        }*/\n                    }\n                }\n                else if (ability.bonusAllStatsReduction != undefined) {\n                    // slark_essence_shift\n                    totalAttribute+=ability.bonusAllStatsReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getStrengthReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {                    \n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        /*switch(attribute.name) {\n                            // invoker_quas\n                            case 'bonus_strength':\n                                totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                            break;\n                        }*/\n                    }\n                }\n                else if (ability.bonusStrength != undefined && ability.name == 'undying_decay') {\n                    // undying_decay\n                    totalAttribute-=ability.bonusStrength();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getStrength = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            /*switch(attribute.name) {\n                                // invoker_quas\n                                case 'bonus_strength':\n                                    totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                                break;\n                            }*/\n                        }\n                    }\n                }\n                else {\n                    if (ability.bonusStrength != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // pudge_flesh_heap,morphling_morph_str,morphling_morph_agi,undying_decay\n                            totalAttribute+=ability.bonusStrength();\n                        }\n                    }\n                    if (ability.bonusStrength2 != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_str\n                            totalAttribute+=ability.bonusStrength2();\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAgility = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // drow_ranger_marksmanship\n                                case 'marksmanship_agility_bonus':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (ability.bonusAgility != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_agi,morphling_morph_str\n                            totalAttribute+=ability.bonusAgility();\n                        }\n                    }\n                    if (ability.bonusAgility2 != undefined) {\n                        if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                            // morphling_morph_agi,morphling_morph_str\n                            totalAttribute+=ability.bonusAgility2();\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getIntelligence = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // invoker_exort\n                            /*    case 'bonus_intelligence':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;*/\n                            }\n                        }\n                    }\n                }\n                /*else if (ability.bonusInt != undefined) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1) || ability.name == 'invoker_exort') {\n                        // invoker_exort\n                        totalAttribute+=ability.bonusInt();\n                    }\n                }*/\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getArmor = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // axe_berserkers_call,dragon_knight_dragon_blood,troll_warlord_berserkers_rage,lycan_shapeshift,enraged_wildkin_toughness_aura\n                            case 'bonus_armor':\n                                if (ability.name != 'templar_assassin_meld') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // sven_warcry\n                            case 'warcry_armor':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // lich_frost_armor,ogre_magi_frost_armor\n                            case 'armor_bonus':\n                                if (ability.name == 'lich_frost_armor' || ability.name == 'ogre_magi_frost_armor') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.armor != undefined) {\n                    // shredder_reactive_armor,visage_gravekeepers_cloak\n                    totalAttribute+=ability.armor();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getArmorBaseReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        //elder_titan_natural_order\n                        case 'elder_titan_natural_order':\n                            totalAttribute *= (1-self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_reduction_pct', ability.level())/100);\n                        break;\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getArmorReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        //templar_assassin_meld\n                        case 'templar_assassin_meld':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_armor', ability.level());\n                        break;\n                        // tidehunter_gush\n                        case 'tidehunter_gush':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_bonus', ability.level());\n                        break;\n                        // naga_siren_rip_tide\n                        case 'naga_siren_rip_tide':\n                        // slardar_amplify_damage\n                        case 'slardar_amplify_damage':\n                        // vengefulspirit_wave_of_terror\n                        case 'vengefulspirit_wave_of_terror':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'armor_reduction', ability.level());\n                        break;\n                        // nevermore_dark_lord\n                        case 'nevermore_dark_lord':\n                            totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, 'presence_armor_reduction', ability.level());\n                        break;\n                    }\n                }\n                else if (ability.armorReduction != undefined) {\n                    // alchemist_acid_spray\n                    totalAttribute+=ability.armorReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getHealth = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // lone_druid_true_form,lycan_shapeshift,troll_warlord_berserkers_rage\n                            case 'bonus_hp':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // lone_druid_synergy\n                            case 'true_form_hp_bonus':\n                                if (self.isTrueFormActive()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusHealth != undefined) {\n                    // clinkz_death_pact\n                    totalAttribute+=ability.bonusHealth();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.isTrueFormActive = function () {\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.isActive() && ability.name == 'lone_druid_true_form') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    self.getHealthRegen = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage, dragon_knight_dragon_blood\n                            case 'bonus_health_regen':\n                            // broodmother_spin_web\n                            case 'heath_regen':\n                            // omniknight_guardian_angel,treant_living_armor,satyr_hellcaller_unholy_aura\n                            case 'health_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // legion_commander_press_the_attack\n                            case 'hp_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.healthregen != undefined) {\n                    // shredder_reactive_armor,invoker_quas,necrolyte_sadist\n                    totalAttribute+=ability.healthregen();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMana = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // obsidian_destroyer_essence_aura\n                            case 'bonus_mana':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getManaRegen = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage\n                            case 'bonus_mana_regen':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.manaregen != undefined) {\n                    // necrolyte_sadist\n                    totalAttribute+=ability.manaregen();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getManaRegenArcaneAura = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                //if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // crystal_maiden_brilliance_aura\n                            case 'mana_regen':\n                                if (ability.name == 'crystal_maiden_brilliance_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                //}\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getManaRegenReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                /*if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        //switch(attribute.name) {\n                        //    // \n                        //    case '':\n                        //        totalAttribute += parseInt(attribute.value[ability.level()-1]);\n                        //    break;\n                        //}\n                    }\n                }\n                else*/ if (ability.manaregenreduction != undefined) {\n                    // pugna_nether_ward\n                    totalAttribute+=ability.manaregenreduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackRange = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0) {\n                if (!(ability.name in self.abilityData)) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // winter_wyvern_arctic_burn\n                                case 'attack_range_bonus':\n                                // templar_assassin_psi_blades,sniper_take_aim\n                                case 'bonus_attack_range':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                                // terrorblade_metamorphosis,troll_warlord_berserkers_rage\n                                case 'bonus_range':\n                                    if (ability.name == 'terrorblade_metamorphosis') {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                    if (ability.name == 'troll_warlord_berserkers_rage') {\n                                        totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                                // tiny_grow\n                                case 'bonus_range_scepter':\n                                    if (ability.name == 'tiny_grow' && self.hasScepter()) {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                                // enchantress_impetus\n                                case 'bonus_attack_range_scepter':\n                                    if (ability.name == 'enchantress_impetus' && self.hasScepter()) {\n                                        totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    }\n                                break;\n                            }\n                        }\n                        // lone_druid_true_form\n                        if (ability.name == 'lone_druid_true_form') {\n                            totalAttribute -= 422;\n                        }\n                    }\n                    else if (ability.name == 'enchantress_impetus' && self.hasScepter()) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                              case 'bonus_attack_range_scepter':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                              break;\n                            }\n                        }\n                    }\n                }\n                else if (ability.attackrange != undefined) {\n                    if (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1)) {\n                        // dragon_knight_elder_dragon_form\n                        totalAttribute+=ability.attackrange();\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackSpeed = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // abaddon_frostmourne,troll_warlord_battle_trance\n                            case 'attack_speed':\n                            // visage_grave_chill\n                            case 'attackspeed_bonus':\n                            // mirana_leap\n                            case 'leap_speedbonus_as':\n                            // life_stealer\n                            case 'attack_speed_bonus':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // clinkz_strafe,ursa_overpower\n                            case 'attack_speed_bonus_pct':\n                                if (ability.name == 'clinkz_strafe' || ability.name == 'ursa_overpower') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // axe_culling_blade,necronomicon_archer_aoe\n                            case 'speed_bonus':\n                                if (ability.name == 'axe_culling_blade' || ability.name == 'necronomicon_archer_aoe') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // ancient_apparition_chilling_touch\n                            case 'attack_speed_pct':\n                                if (ability.name == 'ancient_apparition_chilling_touch') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // beastmaster_inner_beast,lycan_feral_impulse,lone_druid_rabid,tiny_grow,phantom_assassin_phantom_strike,windrunner_focusfire,ogre_magi_bloodlust,centaur_khan_endurance_aura\n                            case 'bonus_attack_speed':\n                                if (ability.name == 'beastmaster_inner_beast' \n                                 || ability.name == 'lycan_feral_impulse' \n                                 || ability.name == 'lone_druid_rabid' \n                                 || ability.name == 'tiny_grow' \n                                 || ability.name == 'phantom_assassin_phantom_strike' \n                                 || ability.name == 'windrunner_focusfire' \n                                 || ability.name == 'ogre_magi_bloodlust'\n                                 || ability.name == 'centaur_khan_endurance_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.attackspeed != undefined) {\n                    // troll_warlord_fervor,wisp_overcharge,lina_fiery_soul,invoker_alacrity,invoker_wex,huskar_berserkers_blood\n                    totalAttribute+=ability.attackspeed();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getAttackSpeedReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // night_stalker_void,crystal_maiden_crystal_nova,ghost_frost_attack,ogre_magi_frost_armor,polar_furbolg_ursa_warrior_thunder_clap\n                            case 'attackspeed_slow':\n                            // lich_frost_armor,lich_frost_nova,enchantress_untouchable\n                            case 'slow_attack_speed':\n                            // beastmaster_primal_roar\n                            case 'slow_attack_speed_pct':\n                            // storm_spirit_overload\n                            case 'overload_attack_slow':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // omniknight_degen_aura\n                            case 'speed_bonus':\n                                if (ability.name == 'omniknight_degen_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // tusk_frozen_sigil,crystal_maiden_freezing_field\n                            case 'attack_slow':\n                                if (ability.name == 'crystal_maiden_freezing_field' && !self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                                else if (ability.name == 'tusk_frozen_sigil') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            case 'attack_slow_scepter':\n                                if (ability.name == 'crystal_maiden_freezing_field' && self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // faceless_void_time_walk\n                            case 'attack_speed_pct':\n                                if (ability.name == 'faceless_void_time_walk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // bounty_hunter_jinada\n                            case 'bonus_attackspeed':\n                                if (ability.name == 'bounty_hunter_jinada') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // brewmaster_thunder_clap\n                            case 'attack_speed_slow':\n                                if (ability.name == 'brewmaster_thunder_clap') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // medusa_stone_gaze\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // visage_grave_chill\n                            case 'attackspeed_bonus':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                            // abaddon_frostmourne\n                            case 'attack_slow_tooltip':\n                                if (ability.name == 'abaddon_frostmourne') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'enraged_wildkin_tornado') {\n                        totalAttribute -= 15;\n                    }\n                }\n                else if (ability.attackspeedreduction != undefined) {\n                    // viper_viper_strike,viper_corrosive_skin,jakiro_liquid_fire,lich_chain_frost,sandking_epicenter,earth_spirit_rolling_boulder\n                    totalAttribute+=ability.attackspeedreduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getBash = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // slardar_bash\n                            case 'chance':\n                            // sniper_headshot\n                            case 'proc_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bash != undefined) {\n                    // spirit_breaker_greater_bash,faceless_void_time_lock\n                    totalAttribute *= (1 - ability.bash()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });    \n    self.getBaseDamage = ko.computed(function () {\n        var totalAttribute = 0;\n        var totalMultiplier = 1;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // tiny_grow,terrorblade_metamorphosis\n                            case 'bonus_damage':\n                                if (ability.name == 'tiny_grow' || ability.name == 'terrorblade_metamorphosis') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (ability.baseDamageMultiplier != undefined) {\n                        // earthshaker_enchant_totem\n                        totalMultiplier += ability.baseDamageMultiplier()/100;\n                        /*totalAttribute += ability.baseDamage();\n                        sources[ability.name] = {\n                            'damage': ability.baseDamage(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        }*/\n                    }\n                    if (ability.baseDamage != undefined) {\n                        // clinkz_death_pact\n                        totalAttribute += ability.baseDamage();\n                        sources[ability.name] = {\n                            'damage': ability.baseDamage(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute, multiplier: totalMultiplier };\n    });\n    \n    self.getSelfBaseDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_split_shot\n                            case 'damage_modifier':\n                                totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // windrunner_focusfire\n                            case 'focusfire_damage_reduction':\n                                if (!self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            case 'focusfire_damage_reduction_scepter':\n                                if (self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBaseDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // vengefulspirit_command_aura\n                            case 'bonus_damage_pct':\n                                if (ability.name == 'vengefulspirit_command_aura') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.baseDamageReductionPct != undefined) {\n                    // nevermore_requiem\n                    totalAttribute *= (1 + ability.baseDamageReductionPct()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBAT = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // troll_warlord_berserkers_rage,alchemist_chemical_rage,lone_druid_true_form,lycan_shapeshift\n                            case 'base_attack_time':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getBonusDamage = ko.computed(function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // broodmother_insatiable_hunger,luna_lunar_blessing,templar_assassin_refraction,templar_assassin_meld,troll_warlord_berserkers_rage,lone_druid_true_form_battle_cry\n                            case 'bonus_damage':\n                                if (ability.name == 'broodmother_insatiable_hunger' || ability.name == 'luna_lunar_blessing'\n                                 || ability.name == 'templar_assassin_refraction' || ability.name == 'templar_assassin_meld'\n                                 || ability.name == 'troll_warlord_berserkers_rage' || ability.name == 'lone_druid_true_form_battle_cry') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // lycan_howl\n                            case 'hero_bonus_damage':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                sources[ability.name] = {\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'storm_spirit_overload') {\n                        totalAttribute += self.getAbilityPropertyValue(ability, 'damage');\n                        sources[ability.name] = {\n                            'damage': self.getAbilityPropertyValue(ability, 'damage'),\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }                        \n                    }\n                }\n                else if (ability.bonusDamage != undefined && ability.bonusDamage() != 0) {\n                    // nevermore_necromastery,ursa_fury_swipes,ursa_enrage,invoker_alacrity,invoker_exort,elder_titan_ancestral_spirit,spectre_desolate,razor_static_link\n                    totalAttribute+=ability.bonusDamage();\n                    sources[ability.name] = {\n                        'damage': ability.bonusDamage(),\n                        'damageType': ability.name == 'spectre_desolate' ? 'pure' : 'physical',\n                        'displayname': ability.displayname\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    });\n\n    self.getBonusDamagePercent = ko.computed(function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bloodseeker_bloodrage\n                            case 'damage_increase_pct':\n                                if (ability.name == 'bloodseeker_bloodrage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // magnataur_empower,vengefulspirit_command_aura,alpha_wolf_command_aura\n                            case 'bonus_damage_pct':\n                                if (ability.name == 'magnataur_empower' || ability.name == 'vengefulspirit_command_aura' || ability.name == 'alpha_wolf_command_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // sven_gods_strength\n                            case 'gods_strength_damage':\n                                if (ability.name == 'sven_gods_strength' && self.hero != undefined && self.hero.heroId() == 'sven') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            case 'gods_strength_damage_scepter':\n                                if (ability.name == 'sven_gods_strength' && self.hero == undefined) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                /*else if (ability.bonusDamagePct != undefined && ability.bonusDamagePct() != 0) {\n                    // bloodseeker_bloodrage\n                    // totalAttribute+=ability.bonusDamagePct()/100;\n                    // sources[ability.name] = {\n                        // 'damage': ability.bonusDamagePct()/100,\n                        // 'damageType': 'physical',\n                        // 'displayname': ability.displayname\n                    // }\n                }*/\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    });\n\n    self.getBonusDamageBackstab = ko.computed(function () {\n        var totalAttribute1 = 0;\n        var totalAttribute2 = 0;\n        var sources = [];\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.name == 'riki_backstab') {\n                if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // riki_backstab\n                            case 'damage_multiplier':\n                                totalAttribute1 += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                sources.push({\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level()),\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                });\n                            break;\n                        }\n                    }/*\n                    if (ability.bonusDamageBackstab != undefined) {\n                        // damage_multiplier\n                        totalAttribute2+=ability.bonusDamageBackstab();\n                        sources.push({\n                            'damage': ability.bonusDamageBackstab(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        });\n                    }\n                    */\n                }\n            }\n        }\n        return { sources: sources, total: [totalAttribute1,totalAttribute2] };\n    });\n    \n    self.getBonusDamagePrecisionAura = ko.computed(function () {\n        var totalAttribute1 = 0;\n        var totalAttribute2 = 0;\n        var sources = [];\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.name == 'drow_ranger_trueshot') {\n                if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // drow_ranger_trueshot\n                            case 'trueshot_ranged_damage':\n                                totalAttribute1 += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                sources.push({\n                                    'damage': self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100,\n                                    'damageType': 'physical',\n                                    'displayname': ability.displayname\n                                });\n                            break;\n                        }\n                    }\n                    if (ability.bonusDamagePrecisionAura != undefined) {\n                        // drow_ranger_trueshot\n                        totalAttribute2+=ability.bonusDamagePrecisionAura();\n                        sources.push({\n                            'damage': ability.bonusDamagePrecisionAura(),\n                            'damageType': 'physical',\n                            'displayname': ability.displayname\n                        });\n                    }\n                }\n            }\n        }\n        return { sources: sources, total: [totalAttribute1,totalAttribute2] };\n    });\n    \n    self.getBonusDamageReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bane_enfeeble\n                            case 'enfeeble_attack_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusDamageReduction != undefined) {\n                    // rubick_fade_bolt,razor_static_link\n                    totalAttribute+=ability.bonusDamageReduction();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getBonusDamageReductionPct = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_split_shot\n                            case 'damage_modifier':\n                                totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // windrunner_focusfire\n                            case 'focusfire_damage_reduction':\n                                if (!self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            case 'focusfire_damage_reduction_scepter':\n                                if (self.hasScepter()) {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getDamageAmplification = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                /*if (!(ability.name in self.abilityData)) {\n                    if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                        for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                            var attribute = self._abilities[i].attributes[j];\n                            switch(attribute.name) {\n                                // bane_enfeeble\n                                case 'enfeeble_attack_reduction':\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                break;\n                            }\n                        }\n                    }\n                }\n                else*/ if (ability.damageAmplification != undefined) {\n                        // undying_flesh_golem\n                        totalAttribute *= (1 + ability.damageAmplification()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getDamageReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // bloodseeker_bloodrage\n                            case 'damage_increase_pct':\n                                if (ability.name == 'bloodseeker_bloodrage') {\n                                    totalAttribute *= (1 + self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                    // kunkka_ghostship\n                    if (ability.name == 'kunkka_ghostship') {\n                        totalAttribute *= (1 - 50/100);\n                    }\n                }\n                else if (ability.damageReduction != undefined) {\n                    // wisp_overcharge,bristleback_bristleback,spectre_dispersion,medusa_mana_shield,ursa_enrage\n                    totalAttribute *= (1 + ability.damageReduction()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCritSource = ko.computed(function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        // phantom_assassin_coup_de_grace,brewmaster_drunken_brawler,chaos_knight_chaos_strike,lycan_shapeshift,skeleton_king_mortal_strike,juggernaut_blade_dance,alpha_wolf_critical_strike,giant_wolf_critical_strike\n                        case 'phantom_assassin_coup_de_grace':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_bonus', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'brewmaster_drunken_brawler':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_multiplier', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'chaos_knight_chaos_strike':\n                        case 'lycan_shapeshift':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_multiplier', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'skeleton_king_mortal_strike':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'juggernaut_blade_dance':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'blade_dance_crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'blade_dance_crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        case 'alpha_wolf_critical_strike':\n                        case 'giant_wolf_critical_strike':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'chance': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_chance', ability.level())/100,\n                                    'multiplier': self.getAbilityAttributeValue(self._abilities[i].attributes, 'crit_mult', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                    }\n                }\n            }\n        }\n        return sources;\n    });    \n\n    self.getCleaveSource = ko.computed(function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    switch(ability.name) {\n                        // magnataur_empower\n                        case 'magnataur_empower':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'cleave_radius', ability.level()),\n                                    'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'cleave_damage_pct', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // sven_great_cleave\n                        case 'sven_great_cleave':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'great_cleave_radius', ability.level()),\n                                    'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'great_cleave_damage', ability.level())/100,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // kunkka_tidebringer\n                        case 'kunkka_tidebringer':\n                            if (sources[ability.name] == undefined) {\n                                sources[ability.name] = {\n                                    'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'radius', ability.level()),\n                                    'magnitude': 1,\n                                    'count': 1,\n                                    'displayname': ability.displayname\n                                }\n                            }\n                            else {\n                                sources[ability.name].count += 1;\n                            }\n                        break;\n                        // tiny_grow\n                        case 'tiny_grow':\n                            if (self.hasScepter()) {\n                                if (sources[ability.name] == undefined) {\n                                    sources[ability.name] = {\n                                        'radius': self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_cleave_radius_scepter', ability.level()),\n                                        'magnitude': self.getAbilityAttributeValue(self._abilities[i].attributes, 'bonus_cleave_damage_scepter', ability.level())/100,\n                                        'count': 1,\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                                else {\n                                    sources[ability.name].count += 1;\n                                }\n                            }\n                        break;\n                    }\n                }\n            }\n        }\n        return sources;\n    });    \n    \n    self.getCritChance = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // phantom_assassin_coup_de_grace,brewmaster_drunken_brawler,chaos_knight_chaos_strike,lycan_shapeshift,skeleton_king_mortal_strike\n                            case 'crit_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });            \n    \n    self.getEvasion = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // phantom_assassin_blur\n                            case 'bonus_evasion':\n                            // brewmaster_drunken_brawler\n                            case 'dodge_chance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getEvasionBacktrack = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // faceless_void_backtrack\n                            case 'dodge_chance_pct':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMissChance = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // broodmother_incapacitating_bite,brewmaster_drunken_haze\n                            case 'miss_chance':\n                            // riki_smoke_screen,keeper_of_the_light_blinding_light,tinker_laser\n                            case 'miss_rate':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n                else if (ability.missChance != undefined) {\n                    // night_stalker_crippling_fear\n                    totalAttribute*=(1-ability.missChance()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getLifesteal = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // skeleton_king_vampiric_aura\n                            case 'vampiric_aura':\n                            // broodmother_insatiable_hunger\n                            case 'lifesteal_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.lifesteal != undefined) {\n                    // life_stealer_open_wounds\n                    totalAttribute+=ability.lifesteal();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getSpellAmp = ko.computed(function () {\n        var totalAttribute = 0;\n        /*for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // keeper_of_the_light_chakra_magic\n                            case 'cooldown_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }*/\n        return totalAttribute;\n    });\n    \n    self.getCooldownReductionFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // keeper_of_the_light_chakra_magic\n                            case 'cooldown_reduction':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCooldownReductionPercent = ko.computed(function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    });\n\n    self.getCooldownIncreaseFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // faceless_void_time_dilation\n                            case 'duration':\n                                if (ability.name == 'faceless_void_time_dilation') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getCooldownIncreasePercent = ko.computed(function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    });\n    \n    self.getMagicResist = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // antimage_spell_shield\n                            case 'spell_shield_resistance':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // phantom_lancer_phantom_edge\n                            case 'magic_resistance_pct':\n                                if (ability.name == 'phantom_lancer_phantom_edge') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                            // rubick_null_field\n                            case 'magic_damage_reduction_pct':\n                                if (ability.name == 'rubick_null_field') {\n                                    totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.magicResist != undefined) {\n                    // huskar_berserkers_blood,viper_corrosive_skin,visage_gravekeepers_cloak\n                    totalAttribute *= (1 - ability.magicResist()/100);\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMagicResistReduction = ko.computed(function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // ancient_apparition_ice_vortex\n                            case 'spell_resist_pct':\n                            // pugna_decrepify\n                            case 'bonus_spell_damage_pct':\n                            // skywrath_mage_ancient_seal\n                            case 'resist_debuff':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                            // elder_titan_natural_order\n                            case 'magic_resistance_pct':\n                                totalAttribute *= (1 - self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMovementSpeedFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // alchemist_chemical_rage\n                            case 'bonus_movespeed':\n                                if (ability.name == 'alchemist_chemical_rage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // tiny_grow\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'tiny_grow') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }\n                            break;\n                            // troll_warlord_berserkers_rage\n                            case 'bonus_move_speed':\n                                if (ability.name == 'troll_warlord_berserkers_rage') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                                }                                \n                            break;\n                            // lone_druid_true_form\n                            case 'speed_loss':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.movementSpeedFlat != undefined) {\n                // dragon_knight_elder_dragon_form\n                    totalAttribute+=ability.movementSpeedFlat();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getMovementSpeedPercent = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // abaddon_frostmourne \n                            case 'move_speed_pct':\n                            // bounty_hunter_track \n                            case 'bonus_move_speed_pct':\n                            // mirana_leap \n                            case 'leap_speedbonus':\n                            // sven_warcry \n                            case 'warcry_movespeed':\n                            // clinkz_wind_walk\n                            case 'move_speed_bonus_pct':\n                            // windrunner_windrun\n                            case 'movespeed_bonus_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // broodmother_spin_web,spectre_spectral_dagger\n                            case 'bonus_movespeed':\n                                if (ability.name == 'broodmother_spin_web' || ability.name == 'spectre_spectral_dagger') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // axe_culling_blade,necronomicon_archer_aoe\n                            case 'speed_bonus':\n                                if (ability.name == 'axe_culling_blade' || ability.name == 'necronomicon_archer_aoe') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // nyx_assassin_vendetta \n                            case 'movement_speed':\n                                if (ability.name == 'nyx_assassin_vendetta') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // spirit_breaker_empowering_haste\n                            case 'bonus_movespeed_pct':\n                                if (ability.name == 'spirit_breaker_empowering_haste') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // ogre_magi_bloodlust,death_prophet_witchcraft,kobold_taskmaster_speed_aura\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'ogre_magi_bloodlust' || ability.name == 'death_prophet_witchcraft' || ability.name == 'kobold_taskmaster_speed_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // razor_unstable_current,phantom_lancer_doppelwalk\n                            case 'movement_speed_pct':\n                                if (ability.name == 'razor_unstable_current' || ability.name == 'phantom_lancer_doppelwalk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // treant_natures_guise,lone_druid_rabid\n                            case 'bonus_move_speed':\n                                if (ability.name == 'treant_natures_guise' || ability.name == 'lone_druid_rabid') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // wisp_tether\n                            case 'movespeed':\n                                if (ability.name == 'wisp_tether') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // kunkka_ghostship,visage_grave_chill\n                            case 'movespeed_bonus':\n                                if (ability.name == 'kunkka_ghostship' || ability.name == 'visage_grave_chill') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }                                \n                            break;\n                        }\n                    }\n                }\n                else if (ability.movementSpeedPct != undefined) {\n                // axe_battle_hunger,bristleback_warpath,spirit_breaker_greater_bash,lina_fiery_soul,invoker_ghost_walk,invoker_wex,elder_titan_ancestral_spirit\n                    totalAttribute+=ability.movementSpeedPct()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getMovementSpeedPercentReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // crystal_maiden_freezing_field\n                            case 'movespeed_slow':\n                                if (ability.name == 'crystal_maiden_freezing_field' && !self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            case 'movespeed_slow_scepter':\n                                if (ability.name == 'crystal_maiden_freezing_field' && self.hasScepter()) {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // elder_titan_earth_splitter,magnataur_skewer,abaddon_frostmourne \n                            case 'slow_pct':\n                                totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // night_stalker_void,crystal_maiden_crystal_nova,ghost_frost_attack,ogre_magi_frost_armor,polar_furbolg_ursa_warrior_thunder_clap\n                            case 'movespeed_slow':\n                                if (ability.name != 'crystal_maiden_freezing_field') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // lich_frost_armor,lich_frost_nova,enchantress_enchant\n                            case 'slow_movement_speed':\n                            // beastmaster_primal_roar\n                            case 'slow_movement_speed_pct':\n                            // drow_ranger_frost_arrows\n                            case 'frost_arrows_movement_speed':\n                            // skeleton_king_hellfire_blast\n                            case 'blast_slow':\n                            // slardar_slithereen_crush\n                            case 'crush_extra_slow':\n                            // storm_spirit_overload:\n                            case 'overload_move_slow':\n                            // windrunner_windrun\n                            case 'enemy_movespeed_bonus_pct':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                            // phantom_assassin_stifling_dagger,tusk_frozen_sigil\n                            case 'move_slow':\n                                if (ability.name == 'phantom_assassin_stifling_dagger') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'tusk_frozen_sigil') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // invoker_ice_wall,medusa_stone_gaze,wisp_tether\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // broodmother_incapacitating_bite,bounty_hunter_jinada,spectre_spectral_dagger,winter_wyvern_arctic_burn\n                            case 'bonus_movespeed':\n                                if (ability.name == 'broodmother_incapacitating_bite' || ability.name == 'bounty_hunter_jinada' || ability.name == 'winter_wyvern_arctic_burn' || ability.name == 'winter_wyvern_splinter_blast') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'spectre_spectral_dagger') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // omniknight_degen_aura\n                            case 'speed_bonus':\n                                if (ability.name == 'omniknight_degen_aura') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // tidehunter_gush\n                            case 'movement_speed':\n                                if (ability.name == 'tidehunter_gush') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // pugna_decrepify,chen_penitence\n                            case 'bonus_movement_speed':\n                                if (ability.name == 'pugna_decrepify' || ability.name == 'chen_penitence') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // ancient_apparition_ice_vortex,phantom_lancer_spirit_lance,skywrath_mage_concussive_shot,faceless_void_time_walk\n                            case 'movement_speed_pct':\n                                if (ability.name == 'ancient_apparition_ice_vortex' || ability.name == 'phantom_lancer_spirit_lance' || ability.name == 'faceless_void_time_walk') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'skywrath_mage_concussive_shot') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // razor_unstable_current\n                            case 'slow_amount':\n                                if (ability.name == 'razor_unstable_current') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // brewmaster_drunken_haze,brewmaster_thunder_clap,treant_leech_seed\n                            case 'movement_slow':\n                                if (ability.name == 'brewmaster_drunken_haze' || ability.name == 'brewmaster_thunder_clap') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'ursa_earthshock' || ability.name == 'treant_leech_seed') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // skeleton_king_reincarnation\n                            case 'movespeed':\n                                if (ability.name == 'skeleton_king_reincarnation') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                            // kunkka_torrent,visage_grave_chill\n                            case 'movespeed_bonus':\n                                if (ability.name == 'kunkka_torrent') {\n                                    totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                                else if (ability.name == 'visage_grave_chill') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                        }\n                    }\n                    if (ability.name == 'satyr_trickster_purge') {\n                        totalAttribute -= 80/100;\n                    }\n                    else if (ability.name == 'enraged_wildkin_tornado') {\n                        totalAttribute -= 15/100;\n                    }\n                }\n                else if (ability.movementSpeedPctReduction != undefined) {\n                    // axe_battle_hunger,batrider_sticky_napalm,shredder_chakram,meepo_geostrike,life_stealer_open_wounds,\n                    // venomancer_poison_sting,viper_viper_strike,viper_corrosive_skin,viper_poison_attack,venomancer_venomous_gale,treant_leech_seed\n                    // lich_chain_frost,sniper_shrapnel,centaur_stampede,huskar_life_break,jakiro_dual_breath,meepo_geostrike,sandking_epicenter\n                    // earth_spirit_rolling_boulder,invoker_ghost_walk,invoker_ice_wall,elder_titan_earth_splitter\n                    // undying_flesh_golem,templar_assassin_psionic_trap,nevermore_requiem,queenofpain_shadow_strike\n                    totalAttribute+=ability.movementSpeedPctReduction()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getTurnRateReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // medusa_stone_gaze\n                            case 'slow':\n                                if (ability.name == 'medusa_stone_gaze') {\n                                    totalAttribute -= self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.turnRateReduction != undefined) {\n                    // batrider_sticky_napalm\n                    totalAttribute+=ability.turnRateReduction()/100;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getVisionRangeNight = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // winter_wyvern_arctic_burn\n                            case 'night_vision_bonus':\n                            // lycan_shapeshift,luna_lunar_blessing\n                            case 'bonus_night_vision':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level());\n                            break;\n                        }\n                    }\n                }\n                else if (ability.visionnight != undefined) {\n                    // \n                    totalAttribute+=ability.visionnight();\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getVisionRangePctReduction = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // night_stalker_darkness\n                            case 'blind_percentage':\n                                totalAttribute += self.getAbilityAttributeValue(self._abilities[i].attributes, attribute.name, ability.level())/100;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.setEvasion = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (ability.name == 'windrunner_windrun') {\n                    return 1;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.setMovementSpeed = ko.computed(function () {\n        var MAX_MOVESPEED = 522;\n        var MIN_MOVESPEED = 100;\n        var totalAttribute = 0;\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (ability.name == 'spirit_breaker_charge_of_darkness') {\n                    return self.getAbilityAttributeValue(ability.attributes, 'movement_speed', ability.level());\n                }\n                if (ability.name == 'dark_seer_surge') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'centaur_stampede') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'lycan_shapeshift') {\n                    return MAX_MOVESPEED;\n                }\n                if (ability.name == 'lion_voodoo' || ability.name == 'shadow_shaman_voodoo') {\n                    return MIN_MOVESPEED;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n\n    self.getBashSource = function (attacktype) {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // sniper_headshot\n                            case 'proc_chance':\n                                if (sources[ability.name] == undefined && ability.name == 'sniper_headshot') {\n                                    sources[ability.name] = {\n                                        'chance': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100,\n                                        'damage': self.getAbilityPropertyValue(ability, 'damage'),\n                                        'count': 1,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // slardar_bash\n                            case 'chance':\n                                if (sources[ability.name] == undefined && ability.name == 'slardar_bash') {\n                                    sources[ability.name] = {\n                                        'chance': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100,\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, 'bonus_damage', ability.level()),\n                                        'count': 1,\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bashBonusDamage != undefined) {\n                    // faceless_void_time_lock\n                    if (sources[ability.name] == undefined && ability.name == 'faceless_void_time_lock') {\n                        sources[ability.name] = {\n                            'chance': ability.bash()/100,\n                            'damage': ability.bashBonusDamage(),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }\n                    }\n                    // spirit_breaker_greater_bash\n                    if (sources[ability.name] == undefined && ability.name == 'spirit_breaker_greater_bash') {\n                        sources[ability.name] = {\n                            'chance': ability.bash()/100,\n                            'damage': ability.bashBonusDamage()/100,\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n\n        return sources;\n    };\n    \n    self.getOrbSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.abilities().length; i++) {\n            var ability = self._abilities[i];\n            if (ability.level() > 0 && (ability.isActive() || (ability.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1))) {\n                if (!(ability.name in self.abilityData)) {\n                    for (var j = 0; j < self._abilities[i].attributes.length; j++) {\n                        var attribute = self._abilities[i].attributes[j];\n                        switch(attribute.name) {\n                            // antimage_mana_break\n                            case 'mana_per_hit':\n                                if (sources[ability.name] == undefined && ability.name == 'antimage_mana_break') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level()) \n                                                * self.getAbilityAttributeValue(ability.attributes, 'damage_per_burn', ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                            // clinkz_searing_arrows\n                            case 'damage_bonus':\n                                if (sources[ability.name] == undefined && ability.name == 'clinkz_searing_arrows') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level()),\n                                        'damageType': 'physical',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            // silencer_glaives_of_wisdom\n                            case 'intellect_damage_pct':\n                                if (sources[ability.name] == undefined && ability.name == 'silencer_glaives_of_wisdom') {\n                                    sources[ability.name] = {\n                                        'damage': self.getAbilityAttributeValue(ability.attributes, attribute.name, ability.level())/100 * self.hero.totalInt(),\n                                        'damageType': 'pure',\n                                        'displayname': ability.displayname\n                                    }\n                                }\n                            break;\n                        }\n                    }\n                }\n                else if (ability.bonusDamageOrb != undefined) {\n                    // obsidian_destroyer_arcane_orb\n                    if (sources[ability.name] == undefined && ability.name == 'obsidian_destroyer_arcane_orb') {\n                        sources[ability.name] = {\n                            'damage': ability.bonusDamageOrb(),\n                            'damageType': 'pure',\n                            'displayname': ability.displayname\n                        }\n                    }\n                }\n            }\n        }\n        \n        return sources;\n    };\n    \n    self.toggleAbility = function (index, data, event) {\n        if (self.abilities()[index()].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') < 0) {\n            if (self.abilities()[index()].isActive()) {\n                self.abilities()[index()].isActive(false);\n            }\n            else {\n                self.abilities()[index()].isActive(true);\n            }\n            \n            if (self.abilities()[index()].name == 'lycan_shapeshift') {\n                self.isShapeShiftActive(self.abilities()[index()].isActive());\n            }\n        }\n    }.bind(this);\n\n    self.toggleAbilityDetail = function (index, data, event) {\n        if (self.abilities()[index()].isDetail()) {\n            self.abilities()[index()].isDetail(false);\n        }\n        else {\n            self.abilities()[index()].isDetail(true);\n        }\n    }.bind(this);\n    \n    self.getAbility = function (abilityName) {\n        return self.abilities().find(function(b) {\n            return b.name == abilityName;\n        });\n    }\n}\n\nAbilityModel.prototype.levelUpAbility = function (index, data, event, hero) {\n    var self = this;\n    if (self.abilities()[index()].level() < hero.getAbilityLevelMax(data) && hero.availableSkillPoints() > 0 ) {\n        switch(self.abilities()[index()].abilitytype) {\n            case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                if (hero.heroId() == 'invoker') {\n                    if (\n                        (self.abilities()[index()].level() == 0) && (parseInt(hero.selectedHeroLevel()) >= 2) ||\n                        (self.abilities()[index()].level() == 1) && (parseInt(hero.selectedHeroLevel()) >= 7) ||\n                        (self.abilities()[index()].level() == 2) && (parseInt(hero.selectedHeroLevel()) >= 11) ||\n                        (self.abilities()[index()].level() == 3) && (parseInt(hero.selectedHeroLevel()) >= 17)\n                    ) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n                else if (hero.heroId() == 'meepo') {\n                    if (self.abilities()[index()].level() * 7 + 3 <= parseInt(hero.selectedHeroLevel())) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n                else {\n                    if ((self.abilities()[index()].level()+1) * 5 + 1 <= parseInt(hero.selectedHeroLevel())) {\n                        self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                        hero.skillPointHistory.push(index());\n                    }\n                }\n            break;\n            default:\n                if (self.abilities()[index()].level() * 2 + 1 <= parseInt(hero.selectedHeroLevel())) {\n                    self.abilities()[index()].level(self.abilities()[index()].level()+1);\n                    hero.skillPointHistory.push(index());\n                }\n            break;\n        }\n        switch (self.abilities()[index()].name) {\n            case 'beastmaster_call_of_the_wild':\n            case 'chen_test_of_faith':\n            case 'morphling_morph_agi':\n            case 'shadow_demon_shadow_poison':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n            case 'morphling_morph_str':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'keeper_of_the_light_spirit_form':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() - 2].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze1':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                self.abilities()[index() + 2].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze2':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n            case 'nevermore_shadowraze3':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                self.abilities()[index() - 2].level(self.abilities()[index()].level());\n            break;\n            case 'ember_spirit_fire_remnant':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'lone_druid_true_form':\n                self.abilities()[index() - 1].level(self.abilities()[index()].level());\n            break;\n            case 'monkey_king_tree_dance':\n                self.abilities()[index() + 1].level(self.abilities()[index()].level());\n            break;\n        }\n    }\n};\nAbilityModel.prototype.levelDownAbility = function (index, data, event, hero) {\n    var i = ko.utils.unwrapObservable(index);\n    var self = this;\n    if (self.abilities()[i].level() > 0) {\n        self.abilities()[i].level(self.abilities()[i].level() - 1);\n        hero.skillPointHistory.splice(hero.skillPointHistory().lastIndexOf(i), 1);\n        switch (self.abilities()[i].name) {\n            case 'beastmaster_call_of_the_wild':\n            case 'chen_test_of_faith':\n            case 'morphling_morph_agi':\n            case 'shadow_demon_shadow_poison':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n            case 'morphling_morph_str':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'keeper_of_the_light_spirit_form':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i - 2].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze1':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n                self.abilities()[i + 2].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze2':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n            case 'nevermore_shadowraze3':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n                self.abilities()[i - 2].level(self.abilities()[i].level());\n            break;\n            case 'ember_spirit_fire_remnant':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'lone_druid_true_form':\n                self.abilities()[i - 1].level(self.abilities()[i].level());\n            break;\n            case 'monkey_king_tree_dance':\n                self.abilities()[i + 1].level(self.abilities()[i].level());\n            break;\n        }\n    }\n};\nAbilityModel.prototype.getAbilityAttributeValue = function (attributes, attributeName, level) {\n    for (var i=0; i < attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (level == 0) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else if (level > attributes[i].value.length) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else {\n                return parseFloat(attributes[i].value[level-1]);\n            }\n        }\n    }\n}\nAbilityModel.prototype.getAbilityAttributeTooltip = function (attributes, attributeName) {\n    for (var i=0; i<attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (attributes[i].hasOwnProperty('tooltip')) {\n                var d = attributes[i].tooltip.replace(/\\\\n/g, '');\n                return d;\n            }\n            else {\n                return '';\n            }\n        }\n    }\n    return '';\n}\n\nmodule.exports = AbilityModel;","'use strict';\nvar ko = require('./herocalc_knockout');\n\nvar AbilityModel = require(\"./AbilityModel\");\nvar InventoryViewModel = require(\"./inventory/InventoryViewModel\");\nvar findWhere = require(\"./util/findWhere\");\nvar buffOptionsArray = require(\"./buffs/buffOptionsArray\");\nvar debuffOptionsArray = require(\"./buffs/debuffOptionsArray\");\n\nvar BuffViewModel = function (itemData, a) {\n    var self = this;\n    AbilityModel.call(this, ko.observableArray([]));\n    self.availableBuffs = ko.observableArray(buffOptionsArray.items);\n    self.availableDebuffs = ko.observableArray(debuffOptionsArray.items);\n    self.selectedBuff = ko.observable(self.availableBuffs()[0]);\n    \n    self.buffs = ko.observableArray([]);\n    self.itemBuffs = new InventoryViewModel(itemData);\n    \n    self.addBuff = function (data, event) {\n        if (findWhere(self.buffs(), { name: self.selectedBuff().buffName }) == undefined) {\n            var a = JSON.parse(JSON.stringify(self.selectedBuff().abilityData));\n            a.level = ko.observable(0);\n            a.isActive = ko.observable(false);\n            a.isDetail = ko.observable(false);\n            a.baseDamage = ko.observable(0);\n            a.bash = ko.observable(0);\n            a.bashBonusDamage = ko.observable(0);\n            a.bonusDamage = ko.observable(0);\n            a.bonusDamageOrb = ko.observable(0);\n            a.bonusDamagePct = ko.observable(0);\n            a.bonusDamagePrecisionAura = ko.observable(0);\n            a.bonusDamageReduction = ko.observable(0);\n            a.bonusHealth = ko.observable(0);\n            a.bonusStrength = ko.observable(0);\n            a.bonusStrength2 = ko.observable(0);\n            a.bonusAgility = ko.observable(0);\n            a.bonusAgility2 = ko.observable(0);\n            a.bonusInt = ko.observable(0);\n            a.bonusAllStatsReduction = ko.observable(0);\n            a.damageAmplification = ko.observable(0);\n            a.damageReduction = ko.observable(0);\n            a.evasion = ko.observable(0);\n            a.magicResist = ko.observable(0);\n            a.manaregen = ko.observable(0);\n            a.manaregenreduction = ko.observable(0);\n            a.missChance = ko.observable(0);\n            a.movementSpeedFlat = ko.observable(0);\n            a.movementSpeedPct = ko.observable(0);\n            a.movementSpeedPctReduction = ko.observable(0);\n            a.turnRateReduction = ko.observable(0);\n            a.attackrange = ko.observable(0);\n            a.attackspeed = ko.observable(0);\n            a.attackspeedreduction = ko.observable(0);\n            a.armor = ko.observable(0);\n            a.armorReduction = ko.observable(0);\n            a.healthregen = ko.observable(0);\n            a.lifesteal = ko.observable(0);\n            a.visionnight = ko.observable(0);\n            a.visionday = ko.observable(0);\n            switch (a.name) {\n                case 'invoker_cold_snap':\n                case 'invoker_ghost_walk':\n                case 'invoker_tornado':\n                case 'invoker_emp':\n                case 'invoker_alacrity':\n                case 'invoker_chaos_meteor':\n                case 'invoker_sun_strike':\n                case 'invoker_forge_spirit':\n                case 'invoker_ice_wall':\n                case 'invoker_deafening_blast':\n                    a.level(1);\n                break;\n            }\n            self.abilities.push(a);\n            self.buffs.push({ name: self.selectedBuff().buffName, hero: self.selectedBuff().hero, data: a });\n        }\n    };\n    \n    self.removeBuff = function (data, event, abilityName) {\n        if (findWhere(self.buffs(), { name: abilityName })  != undefined) {\n                self.buffs.remove(findWhere(self.buffs(), { name: abilityName }));\n                if (self.abilityControlData[abilityName] != undefined) {\n                    for (var i = 0; i < self.abilityControlData[abilityName].data.length; i++) {\n                        if (self.abilityControlData[abilityName].data[i].controlVal.dispose != undefined) {\n                            self.abilityControlData[abilityName].data[i].controlVal.dispose();\n                        }\n                        if (self.abilityControlData[abilityName].data[i].clean != undefined) {\n                            self.abilityControlData[abilityName].data[i].clean.dispose();\n                        }\n                    }\n                    self.abilityControlData[abilityName] = undefined;\n                }\n                for (var i = 0; i < self.abilities().length; i++) {\n                    if (self.abilities()[i].name == abilityName) {\n                        self.abilities()[i].level(0);\n                        self.abilities.remove(self.abilities()[i]);\n                        break;\n                    }\n                }\n        }\n    };\n    self.toggleBuff = function (index, data, event) {\n        if (self.buffs()[index()].data.behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') < 0) {\n            if (self.buffs()[index()].data.isActive()) {\n                self.buffs()[index()].data.isActive(false);\n                self.abilities()[index()].isActive(false);\n            }\n            else {\n                self.buffs()[index()].data.isActive(true);\n                self.abilities()[index()].isActive(true);\n            }\n        }\n    }.bind(this);\n\n    self.toggleBuffDetail = function (index, data, event) {\n        if (self.buffs()[index()].data.isDetail()) {\n            self.buffs()[index()].data.isDetail(false);\n        }\n        else {\n            self.buffs()[index()].data.isDetail(true);\n        }\n    }.bind(this);\n\n    // Overrides the ability module function to remove available skill point check\n    self.levelUpAbility = function (index, data, event, hero) {\n        if (self.abilities()[index()].level() < hero.getAbilityLevelMax(data)) {\n            switch(self.abilities()[index()].abilitytype) {\n                case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                    self.abilities()[index()].level(self.abilities()[index()].level() + 1);\n                break;\n                default:\n                    self.abilities()[index()].level(self.abilities()[index()].level() + 1);\n                break;\n            }\n            switch (self.abilities()[index()].name) {\n                case 'beastmaster_call_of_the_wild':\n                case 'chen_test_of_faith':\n                case 'morphling_morph_agi':\n                case 'shadow_demon_shadow_poison':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'morphling_morph_str':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'keeper_of_the_light_spirit_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                case 'nevermore_shadowraze1':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 2].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze2':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze3':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                break;\n            }\n        }\n    };\n    self.levelDownAbility = function (index, data, event, hero) {\n        if (self.abilities()[index()].level() > 0) {\n            self.abilities()[index()].level(self.abilities()[index()].level() - 1);\n            switch (self.abilities()[index()].name) {\n                case 'beastmaster_call_of_the_wild':\n                case 'chen_test_of_faith':\n                case 'morphling_morph_agi':\n                case 'shadow_demon_shadow_poison':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'morphling_morph_str':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'keeper_of_the_light_spirit_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                case 'nevermore_shadowraze1':\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 2].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze2':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() + 1].level(self.abilities()[index()].level());\n                break;\n                case 'nevermore_shadowraze3':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                    self.abilities()[index() - 2].level(self.abilities()[index()].level());\n                break;\n                case 'ember_spirit_fire_remnant':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n                case 'lone_druid_true_form':\n                    self.abilities()[index() - 1].level(self.abilities()[index()].level());\n                break;\n            }\n        }\n    };\n    \n    return self;\n}\nBuffViewModel.prototype = Object.create(AbilityModel.prototype);\nBuffViewModel.prototype.constructor = BuffViewModel;\n\nmodule.exports = BuffViewModel;","var findWhere = require(\"../util/findWhere\");\n\nvar BuffModel = function (heroData, unitData, hero, ability) {\n    this.buffName = ability;\n    if (heroData['npc_dota_hero_' + hero] == undefined) {\n        this.hero = hero;\n        this.abilityData = findWhere(unitData[hero].abilities, {name: ability})\n        this.buffDisplayName = unitData[hero].displayname + ' - ' + this.abilityData.displayname;\n    }\n    else {\n        this.hero = 'npc_dota_hero_' + hero;\n        this.abilityData = findWhere(heroData['npc_dota_hero_' + hero].abilities, {name: ability})\n        this.buffDisplayName = heroData['npc_dota_hero_' + hero].displayname + ' - ' + this.abilityData.displayname;        \n        if (ability == 'sven_gods_strength') {\n            this.buffDisplayName += ' (Aura for allies)';\n        }\n    }\n\n};\n\nmodule.exports = BuffModel;","var BuffModel = require(\"./BuffModel\");\n\nvar buffOptionsArray = {};\n\nvar init = function (heroData, unitData) {\n    buffOptionsArray.items = [\n        new BuffModel(heroData, unitData, 'abaddon', 'abaddon_frostmourne'),\n        new BuffModel(heroData, unitData, 'axe', 'axe_culling_blade'),\n        new BuffModel(heroData, unitData, 'beastmaster', 'beastmaster_inner_beast'),\n        new BuffModel(heroData, unitData, 'bloodseeker', 'bloodseeker_bloodrage'),\n        new BuffModel(heroData, unitData, 'bounty_hunter', 'bounty_hunter_track'),\n        new BuffModel(heroData, unitData, 'centaur', 'centaur_stampede'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_brilliance_aura'),\n        new BuffModel(heroData, unitData, 'dark_seer', 'dark_seer_surge'),\n        new BuffModel(heroData, unitData, 'dazzle', 'dazzle_weave'),\n        new BuffModel(heroData, unitData, 'drow_ranger', 'drow_ranger_trueshot'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_alacrity'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_tether'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_overcharge'),\n        new BuffModel(heroData, unitData, 'kunkka', 'kunkka_ghostship'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_armor'),\n        new BuffModel(heroData, unitData, 'life_stealer', 'life_stealer_open_wounds'),\n        new BuffModel(heroData, unitData, 'luna', 'luna_lunar_blessing'),\n        new BuffModel(heroData, unitData, 'lycan', 'lycan_howl'),\n        new BuffModel(heroData, unitData, 'magnataur', 'magnataur_empower'),\n        new BuffModel(heroData, unitData, 'mirana', 'mirana_leap'),\n        new BuffModel(heroData, unitData, 'ogre_magi', 'ogre_magi_bloodlust'),\n        new BuffModel(heroData, unitData, 'omniknight', 'omniknight_guardian_angel'),\n        new BuffModel(heroData, unitData, 'rubick', 'rubick_null_field'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_vampiric_aura'),\n        new BuffModel(heroData, unitData, 'spirit_breaker', 'spirit_breaker_empowering_haste'),\n        new BuffModel(heroData, unitData, 'sven', 'sven_warcry'),\n        new BuffModel(heroData, unitData, 'sven', 'sven_gods_strength'),\n        new BuffModel(heroData, unitData, 'treant', 'treant_living_armor'),\n        new BuffModel(heroData, unitData, 'troll_warlord', 'troll_warlord_battle_trance'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_command_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_alpha_wolf', 'alpha_wolf_critical_strike'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_alpha_wolf', 'alpha_wolf_command_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_polar_furbolg_ursa_warrior', 'centaur_khan_endurance_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_giant_wolf', 'giant_wolf_critical_strike'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_kobold_taskmaster', 'kobold_taskmaster_speed_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ogre_magi', 'ogre_magi_frost_armor'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_satyr_hellcaller', 'satyr_hellcaller_unholy_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_enraged_wildkin', 'enraged_wildkin_toughness_aura'),\n        new BuffModel(heroData, unitData, 'npc_dota_necronomicon_archer_1', 'necronomicon_archer_aoe')\n    ];\n    return buffOptionsArray.items;\n}\n\nbuffOptionsArray.init = init;\n\nmodule.exports = buffOptionsArray;","var BuffModel = require(\"./BuffModel\");\n\nvar debuffOptionsArray = {};\n\nvar init = function (heroData, unitData) {\n    debuffOptionsArray.items = [\n        new BuffModel(heroData, unitData, 'abaddon', 'abaddon_frostmourne'),\n        new BuffModel(heroData, unitData, 'alchemist', 'alchemist_acid_spray'),\n        new BuffModel(heroData, unitData, 'ancient_apparition', 'ancient_apparition_ice_vortex'),\n        new BuffModel(heroData, unitData, 'axe', 'axe_battle_hunger'),\n        new BuffModel(heroData, unitData, 'bane', 'bane_enfeeble'),\n        new BuffModel(heroData, unitData, 'batrider', 'batrider_sticky_napalm'),\n        new BuffModel(heroData, unitData, 'beastmaster', 'beastmaster_primal_roar'),\n        new BuffModel(heroData, unitData, 'bounty_hunter', 'bounty_hunter_jinada'),\n        new BuffModel(heroData, unitData, 'brewmaster', 'brewmaster_thunder_clap'),\n        new BuffModel(heroData, unitData, 'brewmaster', 'brewmaster_drunken_haze'),\n        new BuffModel(heroData, unitData, 'bristleback', 'bristleback_viscous_nasal_goo'),\n        new BuffModel(heroData, unitData, 'broodmother', 'broodmother_incapacitating_bite'),\n        new BuffModel(heroData, unitData, 'centaur', 'centaur_stampede'),\n        new BuffModel(heroData, unitData, 'chen', 'chen_penitence'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_crystal_nova'),\n        new BuffModel(heroData, unitData, 'crystal_maiden', 'crystal_maiden_freezing_field'),\n        new BuffModel(heroData, unitData, 'dazzle', 'dazzle_weave'),\n        new BuffModel(heroData, unitData, 'drow_ranger', 'drow_ranger_frost_arrows'),\n        new BuffModel(heroData, unitData, 'earth_spirit', 'earth_spirit_rolling_boulder'),\n        new BuffModel(heroData, unitData, 'elder_titan', 'elder_titan_natural_order'),\n        new BuffModel(heroData, unitData, 'elder_titan', 'elder_titan_earth_splitter'),\n        new BuffModel(heroData, unitData, 'enchantress', 'enchantress_untouchable'),\n        new BuffModel(heroData, unitData, 'enchantress', 'enchantress_enchant'),\n        new BuffModel(heroData, unitData, 'faceless_void', 'faceless_void_time_walk'),\n        new BuffModel(heroData, unitData, 'huskar', 'huskar_life_break'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_ghost_walk'),\n        new BuffModel(heroData, unitData, 'invoker', 'invoker_ice_wall'),\n        new BuffModel(heroData, unitData, 'wisp', 'wisp_tether'),\n        new BuffModel(heroData, unitData, 'jakiro', 'jakiro_dual_breath'),\n        new BuffModel(heroData, unitData, 'jakiro', 'jakiro_liquid_fire'),\n        new BuffModel(heroData, unitData, 'keeper_of_the_light', 'keeper_of_the_light_blinding_light'),\n        new BuffModel(heroData, unitData, 'kunkka', 'kunkka_torrent'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_nova'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_frost_armor'),\n        new BuffModel(heroData, unitData, 'lich', 'lich_chain_frost'),\n        new BuffModel(heroData, unitData, 'life_stealer', 'life_stealer_open_wounds'),\n        new BuffModel(heroData, unitData, 'lion', 'lion_voodoo'),\n        new BuffModel(heroData, unitData, 'magnataur', 'magnataur_skewer'),\n        new BuffModel(heroData, unitData, 'medusa', 'medusa_stone_gaze'),\n        new BuffModel(heroData, unitData, 'meepo', 'meepo_geostrike'),\n        new BuffModel(heroData, unitData, 'naga_siren', 'naga_siren_rip_tide'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_void'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_crippling_fear'),\n        new BuffModel(heroData, unitData, 'night_stalker', 'night_stalker_darkness'),\n        new BuffModel(heroData, unitData, 'ogre_magi', 'ogre_magi_ignite'),\n        new BuffModel(heroData, unitData, 'omniknight', 'omniknight_degen_aura'),\n        new BuffModel(heroData, unitData, 'phantom_assassin', 'phantom_assassin_stifling_dagger'),\n        new BuffModel(heroData, unitData, 'phantom_lancer', 'phantom_lancer_spirit_lance'),\n        new BuffModel(heroData, unitData, 'pudge', 'pudge_rot'),\n        new BuffModel(heroData, unitData, 'pugna', 'pugna_decrepify'),\n        new BuffModel(heroData, unitData, 'queenofpain', 'queenofpain_shadow_strike'),\n        new BuffModel(heroData, unitData, 'riki', 'riki_smoke_screen'),\n        new BuffModel(heroData, unitData, 'rubick', 'rubick_fade_bolt'),\n        new BuffModel(heroData, unitData, 'sand_king', 'sandking_epicenter'),\n        new BuffModel(heroData, unitData, 'nevermore', 'nevermore_dark_lord'),\n        new BuffModel(heroData, unitData, 'shadow_shaman', 'shadow_shaman_voodoo'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_hellfire_blast'),\n        new BuffModel(heroData, unitData, 'skeleton_king', 'skeleton_king_reincarnation'),\n        new BuffModel(heroData, unitData, 'skywrath_mage', 'skywrath_mage_concussive_shot'),\n        new BuffModel(heroData, unitData, 'skywrath_mage', 'skywrath_mage_ancient_seal'),\n        new BuffModel(heroData, unitData, 'slardar', 'slardar_slithereen_crush'),\n        new BuffModel(heroData, unitData, 'slardar', 'slardar_amplify_damage'),\n        new BuffModel(heroData, unitData, 'slark', 'slark_essence_shift'),\n        new BuffModel(heroData, unitData, 'sniper', 'sniper_shrapnel'),\n        new BuffModel(heroData, unitData, 'spectre', 'spectre_spectral_dagger'),\n        new BuffModel(heroData, unitData, 'storm_spirit', 'storm_spirit_overload'),\n        new BuffModel(heroData, unitData, 'templar_assassin', 'templar_assassin_meld'),\n        new BuffModel(heroData, unitData, 'tidehunter', 'tidehunter_gush'),\n        new BuffModel(heroData, unitData, 'tinker', 'tinker_laser'),\n        new BuffModel(heroData, unitData, 'treant', 'treant_leech_seed'),\n        new BuffModel(heroData, unitData, 'tusk', 'tusk_frozen_sigil'),\n        new BuffModel(heroData, unitData, 'undying', 'undying_flesh_golem'),\n        new BuffModel(heroData, unitData, 'ursa', 'ursa_earthshock'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_wave_of_terror'),\n        new BuffModel(heroData, unitData, 'vengefulspirit', 'vengefulspirit_command_aura'),\n        new BuffModel(heroData, unitData, 'venomancer', 'venomancer_venomous_gale'),\n        new BuffModel(heroData, unitData, 'venomancer', 'venomancer_poison_sting'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_poison_attack'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_corrosive_skin'),\n        new BuffModel(heroData, unitData, 'viper', 'viper_viper_strike'),\n        new BuffModel(heroData, unitData, 'visage', 'visage_grave_chill'),\n        new BuffModel(heroData, unitData, 'warlock', 'warlock_upheaval'),\n        new BuffModel(heroData, unitData, 'weaver', 'weaver_the_swarm'),\n        new BuffModel(heroData, unitData, 'windrunner', 'windrunner_windrun'),\n        new BuffModel(heroData, unitData, 'winter_wyvern', 'winter_wyvern_arctic_burn'),\n        new BuffModel(heroData, unitData, 'winter_wyvern', 'winter_wyvern_splinter_blast'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ghost', 'ghost_frost_attack'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_polar_furbolg_ursa_warrior', 'polar_furbolg_ursa_warrior_thunder_clap'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_ogre_magi', 'ogre_magi_frost_armor'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_satyr_trickster', 'satyr_trickster_purge'),\n        new BuffModel(heroData, unitData, 'npc_dota_neutral_enraged_wildkin', 'enraged_wildkin_tornado')\n    ];\n    return debuffOptionsArray.items;\n}\n\ndebuffOptionsArray.init = init;\n\nmodule.exports = debuffOptionsArray;","var HeroCalcData = {\n    heroData: {},\n    itemData: {},\n    unitData: {}\n};\n\nmodule.exports = HeroCalcData;","var HeroCalcData = require('./HeroCalcData') || {};\nvar getJSON = require(\"../util/getJSON\");\nvar isEmpty = require(\"../util/isEmpty\");\nvar isString = require(\"../util/isString\");\nvar extend = function(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n      continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n        out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\nvar resourceCounter = 0;\n\nvar onResourceLoaded = function (callback) {\n    resourceCounter--;\n    if (resourceCounter === 0) {\n        fixHeroData(HeroCalcData.heroData);\n        modifyItemData(HeroCalcData.itemData);\n        if (callback) callback();\n    }\n}\n\nvar modifyItemData = function (itemData) {\n    itemData[\"item_bottle_doubledamage\"] = {\n        displayname: \"Double Damage\",\n        name: \"item_bottle_doubledamage\",\n        attributes: [{\n            \"name\": \"bottle_doubledamage\", \n            \"tooltip\": \"%BONUS ATTACK DAMAGE:\", \n            \"value\": [\n                100\n            ]\n        }]\n    }\n}\n\nvar fixHeroData = function (heroData) {\n    heroData['npc_dota_hero_invoker'].abilities[5].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_chen'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_nevermore'].abilities[1].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_nevermore'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_morphling'].abilities[3].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_ogre_magi'].abilities[3].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_techies'].abilities[4].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n    heroData['npc_dota_hero_beastmaster'].abilities[2].behavior.push('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE');\n\n    var index = heroData['npc_dota_hero_lone_druid'].abilities[3].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN');\n    heroData['npc_dota_hero_lone_druid'].abilities[3].behavior.splice(index, 1);\n\n    index = heroData['npc_dota_hero_abaddon'].abilities[2].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE');\n    heroData['npc_dota_hero_abaddon'].abilities[2].behavior.splice(index, 1);\n\n    index = heroData['npc_dota_hero_riki'].abilities[2].behavior.indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE');\n    heroData['npc_dota_hero_riki'].abilities[2].behavior.splice(index, 1);\n}\n\nvar init = function (HERODATA_PATH, ITEMDATA_PATH, UNITDATA_PATH, callback) {\n    resourceCounter = 3;\n    \n    if (!HeroCalcData.heroData || isEmpty(HeroCalcData.heroData)) {\n        if (isString(HERODATA_PATH)) {\n            getJSON(HERODATA_PATH, function (data) {\n                HeroCalcData.heroData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(HERODATA_PATH)) {\n            HeroCalcData.heroData = HERODATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n    \n    if (!HeroCalcData.itemData || isEmpty(HeroCalcData.itemData)) {\n        if (isString(ITEMDATA_PATH)) {\n            getJSON(ITEMDATA_PATH, function (data) {\n                HeroCalcData.itemData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(ITEMDATA_PATH)) {\n            HeroCalcData.itemData = ITEMDATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n    \n    if (!HeroCalcData.unitData || isEmpty(HeroCalcData.unitData)) {\n        if (isString(UNITDATA_PATH)) {\n            getJSON(UNITDATA_PATH, function (data) {\n                HeroCalcData.unitData = data;\n                onResourceLoaded(callback);\n            });\n        }\n        else if (!isEmpty(UNITDATA_PATH)) {\n            HeroCalcData.unitData = UNITDATA_PATH;\n            onResourceLoaded(callback);\n        }\n    }\n    else {\n        onResourceLoaded(callback);\n    }\n}\n    \nHeroCalcData.init = init;\n\nmodule.exports = HeroCalcData;","'use strict';\nvar HeroModel = require(\"./HeroModel\");\n\nvar CloneModel = function (heroData, itemData, h,p) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, h);\n    self.parent = p;\n    return self;\n}\nCloneModel.prototype = Object.create(HeroModel.prototype);\nCloneModel.prototype.constructor = CloneModel;\n\nmodule.exports = CloneModel;","var DamageTypeColor = {\n    'physical': '#979aa2',\n    'pure': 'goldenrod',\n    'magic': '#428bca',\n    'default': '#979aa2'\n}\n\nmodule.exports = DamageTypeColor;","'use strict';\nvar ko = require('../herocalc_knockout');\n    \nvar DamageTypeColor = require(\"./DamageTypeColor\");\nvar extend = require(\"../util/extend\");\nvar TalentController = require(\"./TalentController\");\n\nvar HeroDamageMixin = function (self, itemData) {\n    self.critInfo = ko.pureComputed(function () {\n        var critSources = self.inventory.getCritSource();\n        extend(critSources, self.ability().getCritSource());\n        extend(critSources, self.buffs.getCritSource());\n        var critSourcesArray = [];\n        for (var prop in critSources) {\n            var el = critSources[prop];\n            el.name = prop\n            critSourcesArray.push(el);\n        }\n        function compareByMultiplier(a,b) {\n            if (a.multiplier < b.multiplier)\n                return 1;\n            if (a.multiplier > b.multiplier)\n                return -1;\n            return 0;\n        }\n\n        critSourcesArray.sort(compareByMultiplier);\n        \n        var result = [];\n        var critTotal = 0;\n        for (var i = 0; i < critSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k <critSourcesArray[j].count; k++) {\n                    total *= (1 - critSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < critSourcesArray[i].count; k++) {\n                total2 *= (1 - critSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            critTotal += total;\n            if (critSourcesArray[i].count > 1) {\n                result.push({\n                    'name':critSourcesArray[i].displayname + ' x' + critSourcesArray[i].count,\n                    'chance':critSourcesArray[i].chance,\n                    'multiplier':critSourcesArray[i].multiplier,\n                    'count':critSourcesArray[i].count,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':critSourcesArray[i].displayname,\n                    'chance':critSourcesArray[i].chance,\n                    'multiplier':critSourcesArray[i].multiplier,\n                    'count':critSourcesArray[i].count,\n                    'totalChance':total\n                });\n            }\n        }\n        return { sources: result, total: critTotal };\n    });\n\n    self.cleaveInfo = ko.pureComputed(function () {\n        var cleaveSources = self.inventory.getCleaveSource();\n        extend(cleaveSources, self.ability().getCleaveSource());\n        extend(cleaveSources, self.buffs.getCleaveSource());\n        var cleaveSourcesArray = [];\n        for (var prop in cleaveSources) {\n            var el = cleaveSources[prop];\n            el.name = prop\n            cleaveSourcesArray.push(el);\n        }\n        function compareByRadius(a,b) {\n            if (a.radius < b.radius)\n                return 1;\n            if (a.radius > b.radius)\n                return -1;\n            return 0;\n        }\n\n        cleaveSourcesArray.sort(compareByRadius);\n        var cleaveSourcesByRadius = {};\n        for (var i = 0; i < cleaveSourcesArray.length; i++) {\n            var total = 0;\n            for (var j = 0; j <cleaveSourcesArray.length; j++) {\n                if (cleaveSourcesArray[j].radius >= cleaveSourcesArray[i].radius) {\n                    total += cleaveSourcesArray[j].magnitude * cleaveSourcesArray[j].count;\n                }\n            }\n            cleaveSourcesByRadius[cleaveSourcesArray[i].radius] = total;\n        }\n        var result = [];\n        for (var prop in cleaveSourcesByRadius) {\n            result.push({\n                'radius':prop,\n                'magnitude':cleaveSourcesByRadius[prop]\n            });\n        }\n        return result;\n    });\n    \n    self.bashInfo = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        var bashSources = self.inventory.getBashSource(attacktype);\n        extend(bashSources, self.ability().getBashSource());\n        var bashSourcesArray = [];\n        for (var prop in bashSources) {\n            var el = bashSources[prop];\n            el.name = prop\n            bashSourcesArray.push(el);\n        }\n        function compareByDuration(a, b) {\n            if (a.duration < b.duration)\n                return 1;\n            if (a.duration > b.duration)\n                return -1;\n            return 0;\n        }\n\n        //bashSourcesArray.sort(compareByDuration);\n        \n        var result = [];\n        var bashTotal = 0;\n        for (var i = 0;i < bashSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k < bashSourcesArray[j].count; k++) {\n                    total *= (1 - bashSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < bashSourcesArray[i].count; k++) {\n                total2 *= (1 - bashSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            bashTotal += total;\n            if (bashSourcesArray[i].name === 'spirit_breaker_greater_bash') {\n                var d = bashSourcesArray[i].damage * self.totalMovementSpeed();\n            }\n            else {\n                var d = bashSourcesArray[i].damage;\n            }\n            if (bashSourcesArray[i].count > 1) {\n                result.push({\n                    'name':bashSourcesArray[i].displayname, // + ' x' + bashSourcesArray[i].count,\n                    'chance':bashSourcesArray[i].chance,\n                    'damage':d,\n                    'count':bashSourcesArray[i].count,\n                    'damageType':bashSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':bashSourcesArray[i].displayname,\n                    'chance':bashSourcesArray[i].chance,\n                    'damage':d,\n                    'count':bashSourcesArray[i].count,\n                    'damageType':bashSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n\n        }\n        return { sources: result, total: bashTotal };\n    });\n    \n    self.orbProcInfo = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        var damageSources = self.inventory.getOrbProcSource();\n        var damageSourcesArray = [];\n        for (var prop in damageSources) {\n            var el = damageSources[prop];\n            el.name = prop\n            damageSourcesArray.push(el);\n        }\n        function compareByDamage(a, b) {\n            if (a.priority > b.priority) {\n                return 1;\n            }\n            if (a.priority < b.priority) {\n                return -1;\n            }\n            if (a.damage < b.damage)\n                return 1;\n            if (a.damage > b.damage)\n                return -1;\n            return 0;\n        }\n\n        damageSourcesArray.sort(compareByDamage);\n        \n        var result = [];\n        var damageTotal = 0;\n        for (var i=0 ; i < damageSourcesArray.length; i++) {\n            var total = 1;\n            for (var j = 0; j < i; j++) {\n                for (var k = 0; k < damageSourcesArray[j].count; k++) {\n                    total *= (1 - damageSourcesArray[j].chance);\n                }\n            }\n            var total2 = 1;\n            for (var k = 0; k < damageSourcesArray[i].count; k++) {\n                total2 *= (1 - damageSourcesArray[i].chance);\n            }\n            total *= (1 - total2);\n            damageTotal += total;\n            if (damageSourcesArray[i].count > 1) {\n                result.push({\n                    'name':damageSourcesArray[i].displayname + ' x' + damageSourcesArray[i].count,\n                    'chance':damageSourcesArray[i].chance,\n                    'damage':damageSourcesArray[i].damage,\n                    'count':damageSourcesArray[i].count,\n                    'damageType':damageSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n            else {\n                result.push({\n                    'name':damageSourcesArray[i].displayname,\n                    'chance':damageSourcesArray[i].chance,\n                    'damage':damageSourcesArray[i].damage,\n                    'count':damageSourcesArray[i].count,\n                    'damageType':damageSourcesArray[i].damageType,\n                    'totalChance':total\n                });\n            }\n        }\n        return { sources: result, total: damageTotal };\n    });\n    \n    self.getReducedDamage = function (value, type) {\n        var result = value;\n        switch (type) {\n            case 'physical':\n                result = value * (1 - (0.06 * self.enemy().totalArmorPhysical()) / (1 + 0.06 * Math.abs(self.enemy().totalArmorPhysical())));\n            break;\n            case 'magic':\n                result = value * (1 - self.enemy().totalMagicResistance() / 100);\n            break;\n            case 'pure':\n                result = value;\n            break;\n            case 'composite':\n                result = value * (1 - (0.06 * self.enemy().totalArmorPhysical()) / (1 + 0.06 * Math.abs(self.enemy().totalArmorPhysical())));\n                result *= (1 - self.enemy().totalMagicResistance() / 100);\n            break;\n        }\n        result *= self.ability().getDamageAmplification() * self.debuffs.getDamageAmplification();\n        result *= self.enemy().ability().getDamageReduction() * self.enemy().buffs.getDamageReduction();\n        return result;\n    }\n    \n    self.damageTotalInfo = ko.pureComputed(function () {\n        var bonusDamageArray = [\n            self.ability().getBonusDamage().sources,\n            self.buffs.getBonusDamage().sources,\n            TalentController.getBonusDamage(self.selectedTalents()).sources\n        ],\n        bonusDamagePctArray = [\n            self.ability().getBonusDamagePercent().sources,\n            self.buffs.getBonusDamagePercent().sources\n        ],\n        itemBonusDamage = self.inventory.getBonusDamage().sources,\n        itemBonusDamagePct = self.buffs.itemBuffs.getBonusDamagePercent(self.inventory.getBonusDamagePercent()).sources,\n        critSources = self.critInfo(),\n        abilityOrbSources = self.ability().getOrbSource(),\n        itemOrbSources = self.inventory.getOrbSource(),\n        itemProcOrbSources = self.orbProcInfo(),\n        bashSources = self.bashInfo(),\n        \n        attackSources = [];\n        \n        attackSources.push({\n            name: 'Base Attack',\n            cooldown: 1\n        });\n        \n        // weaver_geminate_attack\n        if (self.heroId() === 'weaver') {\n            var a = self.ability().abilities().find(function (ability) {\n                return ability.name === 'weaver_geminate_attack';\n            });\n            if (a) {\n                if (a.level() > 0) {\n                    var cd = a.cooldown[a.level() - 1];\n                    attackSources.push({\n                        name: a.displayname,\n                        cooldown: (1/cd)\n                    });\n                }\n            }\n        }\n        \n        // echo_sabre\n        var item = self.inventory.items().find(function (o) { return o.item === \"echo_sabre\" && o.enabled(); });\n        if (item && self.heroData().attacktype === 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n            var item_echo_sabre = itemData['item_echo_sabre'];\n            attackSources.push({\n                name: item_echo_sabre.displayname,\n                cooldown: (1/item_echo_sabre.cooldown)\n            });\n        }\n\n        var attacks = attackSources.map(function (a) {\n            var baseDamage = (self.baseDamage()[0] + self.baseDamage()[1]) / 2,\n            totalDamage = 0,\n            totalCritableDamage = 0,\n            totalCrit = 0,\n            geminateAttack = { damage: 0, damageReduced: 0, cooldown: 6, active: false },\n            echoSabreAttack = { damage: 0, damageReduced: 0, cooldown: itemData['item_echo_sabre'].cooldown[0], active: false },\n            damage = {\n                pure: 0,\n                physical: 0,\n                magic: 0\n            },\n            result = [],\n            crits = [];\n            \n            // base damage\n            result.push({\n                name: 'Base Damage',\n                damage: baseDamage,\n                damageType: 'physical',\n                damageReduced: self.getReducedDamage(baseDamage, 'physical'),\n                enabled: ko.observable(true)\n            });\n            totalDamage += baseDamage;\n            totalCritableDamage += baseDamage;\n            damage.physical += baseDamage;\n            \n            // bonus damage from items\n            for (i in itemBonusDamage) {\n                var d = itemBonusDamage[i].damage*itemBonusDamage[i].count * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct();\n                result.push({\n                    name: itemBonusDamage[i].displayname + (itemBonusDamage[i].count > 1 ? ' x' + itemBonusDamage[i].count : ''),\n                    damage: d,\n                    damageType: itemBonusDamage[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemBonusDamage[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                totalCritableDamage += d;\n                damage[itemBonusDamage[i].damageType] += d;\n            }\n\n            // bonus damage percent from items\n            for (i in itemBonusDamagePct) {\n                var d = baseDamage * itemBonusDamagePct[i].damage;\n                result.push({\n                    name: itemBonusDamagePct[i].displayname,\n                    damage: d,\n                    damageType: itemBonusDamagePct[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemBonusDamagePct[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                totalCritableDamage += d;\n                damage[itemBonusDamagePct[i].damageType] += d;\n            }\n            \n            // bonus damage from abilities and buffs\n            for (var i = 0; i < bonusDamageArray.length; i++) {\n                for (j in bonusDamageArray[i]) {\n                    var d = bonusDamageArray[i][j].damage;\n                    result.push({\n                        name: bonusDamageArray[i][j].displayname,\n                        damage: d,\n                        damageType: bonusDamageArray[i][j].damageType,\n                        damageReduced: self.getReducedDamage(d, bonusDamageArray[i][j].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage[bonusDamageArray[i][j].damageType] += d;\n                }\n            }\n            \n            // bonus damage percent from abilities and buffs\n            for (var i = 0; i < bonusDamagePctArray.length; i++) {\n                for (j in bonusDamagePctArray[i]) {\n                    var d = baseDamage * bonusDamagePctArray[i][j].damage;\n                    result.push({\n                        name: bonusDamagePctArray[i][j].displayname,\n                        damage: d,\n                        damageType: bonusDamagePctArray[i][j].damageType,\n                        damageReduced: self.getReducedDamage(d, bonusDamagePctArray[i][j].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage[bonusDamagePctArray[i][j].damageType] += d;\n                }\n            }\n            // drow_ranger_trueshot\n            if (self.heroData().attacktype === 'DOTA_UNIT_CAP_RANGED_ATTACK') {\n                if (self.heroId() === 'drow_ranger') {\n                    var s = self.ability().getBonusDamagePrecisionAura().sources;\n                    var index = 0;\n                }\n                else {\n                    var s = self.buffs.getBonusDamagePrecisionAura().sources;\n                    var index = 1;\n                }\n                if (s[index] != undefined) {\n                    if (self.heroId() === 'drow_ranger') {\n                        var d = s[index].damage * self.totalAgi();\n                    }\n                    else {\n                        var d = s[index].damage;\n                    }\n                    result.push({\n                        name: s[index].displayname,\n                        damage: d,\n                        damageType: 'physical',\n                        damageReduced: self.getReducedDamage(d, 'physical'),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    totalCritableDamage += d;\n                    damage.physical += d;                    \n                }\n            }\n            \n            // riki_backstab\n            if (self.heroId() === 'riki') {\n                var s = self.ability().getBonusDamageBackstab().sources;\n                var index = 0;\n            }\n            else {\n                var s = self.buffs.getBonusDamageBackstab().sources;\n                var index = 1;\n            }\n            if (s[index] != undefined) {\n                if (self.heroId() === 'riki') {\n                    var d = s[index].damage * self.totalAgi();\n                }\n                else {\n                    var d = s[index].damage;\n                }\n                result.push({\n                    name: s[index].displayname,\n                    damage: d,\n                    damageType: 'physical',\n                    damageReduced: self.getReducedDamage(d, 'physical'),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                //totalCritableDamage += d;\n                damage.physical += d;                    \n            }\n\n            // bash damage\n            for (var i = 0; i < bashSources.sources.length; i++) {\n                var o = bashSources.sources[i];\n                var d = bashSources.sources[i].damage;\n                var cd = self.attacksPerSecond();\n                if (o.cooldown) {\n                    cd = Math.max(1/o.cooldown, cd);\n                }\n                for (var j = 0; j < bashSources.sources[i].count; j++) {\n                    result.push({\n                        name: bashSources.sources[i].name,\n                        damage: d,\n                        damageType: bashSources.sources[i].damageType,\n                        damageReduced: self.getReducedDamage(d, bashSources.sources[i].damageType),\n                        dps: d * cd * bashSources.sources[i].chance,\n                        dpsReduced: self.getReducedDamage(d, bashSources.sources[i].damageType) * cd * bashSources.sources[i].chance,\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    damage[bashSources.sources[i].damageType] += d;\n                }\n\n            }\n            \n            // %-based orbs\n            for (var i = 0; i < itemProcOrbSources.sources.length; i++) {\n                var d = itemProcOrbSources.sources[i].damage * (1 - Math.pow(1 - itemProcOrbSources.sources[i].chance, itemProcOrbSources.sources[i].count));\n                result.push({\n                    name: itemProcOrbSources.sources[i].name,\n                    damage: d,\n                    damageType: itemProcOrbSources.sources[i].damageType,\n                    damageReduced: self.getReducedDamage(d, itemProcOrbSources.sources[i].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                damage[itemProcOrbSources.sources[i].damageType] += d;\n            }\n            \n            // ability orbs\n            for (var orb in abilityOrbSources) {\n                var d = abilityOrbSources[orb].damage * (1 - itemProcOrbSources.total);\n                result.push({\n                    name: abilityOrbSources[orb].displayname,\n                    damage: d,\n                    damageType: abilityOrbSources[orb].damageType,\n                    damageReduced: self.getReducedDamage(d, abilityOrbSources[orb].damageType),\n                    enabled: ko.observable(true)\n                });\n                totalDamage += d;\n                damage[abilityOrbSources[orb].damageType] += d;\n            }\n            \n            // item orbs\n            if (Object.keys(abilityOrbSources).length === 0) {\n                for (var orb in itemOrbSources) {\n                    var d = itemOrbSources[orb].damage * (1 - itemProcOrbSources.total);\n                    result.push({\n                        name: itemOrbSources[orb].displayname,\n                        damage: d,\n                        damageType: itemOrbSources[orb].damageType,\n                        damageReduced: self.getReducedDamage(d, itemOrbSources[orb].damageType),\n                        enabled: ko.observable(true)\n                    });\n                    totalDamage += d;\n                    damage[itemOrbSources[orb].damageType] += d;\n                }            \n            }\n            \n            // crit damage\n            for (var i = 0; i < critSources.sources.length; i++) {\n                var d = totalCritableDamage * (critSources.sources[i].multiplier - 1);// * critSources.sources[i].totalChance;\n                crits.push({\n                    name: critSources.sources[i].name + ', ' + critSources.sources[i].multiplier + 'x, ' + (critSources.sources[i].totalChance * 100).toFixed(1) + '%',\n                    damage: d,\n                    damageType: 'physical',\n                    damageReduced: self.getReducedDamage(d, 'physical'),\n                    enabled: ko.observable(true),\n                    chance: critSources.sources[i].totalChance\n                });\n                totalCrit += d;\n            }\n\n            var totalReduced = self.getReducedDamage(damage.pure, 'pure') \n                    + self.getReducedDamage(damage.physical, 'physical')\n                    + self.getReducedDamage(damage.magic, 'magic'),\n                totalCritReduced = self.getReducedDamage(totalCrit, 'physical'),\n                dps = {\n                    base: totalDamage * self.attacksPerSecond(),\n                    crit: totalCrit * self.attacksPerSecond(),\n                    geminateAttack: geminateAttack.active ? geminateAttack.damage / geminateAttack.cooldown : 0,\n                    reduced: {\n                        base: totalReduced * self.attacksPerSecond(),\n                        crit: totalCritReduced * self.attacksPerSecond(),\n                        geminateAttack: geminateAttack.active ? self.getReducedDamage(geminateAttack.damage, 'physical') / geminateAttack.cooldown : 0,\n                    }\n                }\n                \n            crits.forEach(function (o) {\n                if (!o.dps) {\n                    o.dps = o.damage * (o.cooldown || self.attacksPerSecond()) * o.chance;\n                }\n                if (!o.dpsReduced) {\n                    o.dpsReduced = o.damageReduced * (o.cooldown || self.attacksPerSecond()) * o.chance;\n                }\n            });\n                \n            result.forEach(function (o) {\n                if (!o.dps) {\n                    o.dps = o.damage * (o.cooldown || self.attacksPerSecond());\n                }\n                if (!o.dpsReduced) {\n                    o.dpsReduced = o.damageReduced * (o.cooldown || self.attacksPerSecond());\n                }\n            });\n            \n            var totalCritChance = crits.reduce(function (memo, o) { return memo + o.chance }, 0);\n                \n            var t1Crit = ko.computed(function () {\n                var c = crits.find(function (o) { return o.enabled(); });\n                return c ? c.damage : 0;\n            });\n            var t2Crit = ko.computed(function () {\n                var c = crits.find(function (o) { return o.enabled(); });\n                return c ? c.damageReduced : 0;\n            });\n            var t3Crit = ko.computed(function () {\n                return crits.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dps }, 0);\n            });\n            var t4Crit = ko.computed(function () {\n                return crits.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dpsReduced }, 0);\n            });\n                \n            var t1 = ko.computed(function () {\n                return result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.damage }, 0) + t1Crit();\n            });\n            var t2 = ko.computed(function () {\n                return result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.damageReduced }, 0) + t2Crit();\n            });\n            var t3 = ko.computed(function () {\n                return (result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dps }, 0) + t3Crit()) * a.cooldown;\n            });\n            var t4 = ko.computed(function () {\n                return (result.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.dpsReduced }, 0) + t4Crit()) * a.cooldown;\n            });\n            \n            var totalCritRow = [t1Crit, t2Crit, t3Crit, t4Crit];\n            \n            var totalRow = [t1, t2, t3, t4];\n\n            return {\n                name: a.name + ' Subtotal',\n                cooldown: a.cooldown,\n                enabled: ko.observable(true),\n                visible: ko.observable(true),\n                totalCritChance: totalCritChance,\n                totalCritRow: totalCritRow,\n                totalRow: totalRow,\n                sources: result,\n                sourcesCrit: crits,\n                total: totalDamage,\n                totalCrit: totalCrit,\n                totalGeminateAttack: totalDamage + geminateAttack.damage,\n                totalGeminateAttackReduced: totalReduced + geminateAttack.damageReduced,\n                geminateAttack: geminateAttack,\n                totalCritReduced: totalCritReduced,\n                totalReduced: totalReduced,\n                sumTotal: totalDamage + totalCrit,\n                sumTotalReduced: totalReduced + totalCritReduced,\n                dps: {\n                    base: dps.base,\n                    crit: dps.base + dps.crit,\n                    geminateAttack: dps.base + dps.geminateAttack,\n                    total: dps.base + dps.crit + dps.geminateAttack,\n                    reduced: {\n                        base: dps.reduced.base,\n                        crit: dps.reduced.base + dps.reduced.crit,\n                        geminateAttack: dps.reduced.base + dps.reduced.geminateAttack,\n                        total: dps.reduced.base + dps.reduced.crit + dps.reduced.geminateAttack\n                    }\n                }\n            };\n        });\n        \n        var t1 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[0]() }, 0);\n        });\n        var t2 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[1]() }, 0);\n        });\n        var t3 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[2]() }, 0);\n        });\n        var t4 = ko.computed(function () {\n            return attacks.filter(function (o) { return o.enabled(); }).reduce(function (memo, o) { return memo + o.totalRow[3]() }, 0);\n        });\n            \n        return {\n            attacks: attacks,\n            totalRow: [t1, t2, t3, t4]\n        }\n    });\n    \n    self.getDamageTypeColor = function (damageType) {\n        return DamageTypeColor[damageType] || DamageTypeColor['default'];\n    }\n    \n}\n\nmodule.exports = HeroDamageMixin;","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar AbilityModel = require(\"../AbilityModel\");\nvar BuffViewModel = require(\"../BuffViewModel\");\nvar InventoryViewModel = require(\"../inventory/InventoryViewModel\");\nvar diffProperties = require(\"./diffProperties\");\nvar HeroDamageMixin = require(\"./HeroDamageMixin\");\nvar TalentController = require(\"./TalentController\");\nvar totalExp = require(\"./totalExp\");\nvar nextLevelExp = require(\"./nextLevelExp\");\n\nvar HeroModel = function (heroData, itemData, h) {\n    var self = this;\n    self.heroId = ko.observable(h);\n    self.selectedHeroLevel = ko.observable(1);\n    self.inventory = new InventoryViewModel(itemData, self);\n    self.selectedInventory = ko.observable(-1);\n    self.buffs = new BuffViewModel(itemData);\n    self.buffs.hasScepter = self.inventory.hasScepter;\n    self.debuffs = new BuffViewModel(itemData);\n    self.heroData = ko.computed(function () {\n      return heroData['npc_dota_hero_' + self.heroId()];\n    });\n    self.heroCompare = ko.observable(self);\n    self.enemy = ko.observable(self);\n    self.unit = ko.observable(self);\n    self.clone = ko.observable(self);\n    \n    self.talents = [\n        ko.observable(-1),\n        ko.observable(-1),\n        ko.observable(-1),\n        ko.observable(-1)\n    ];\n    \n    self.selectedTalents = ko.computed(function () {\n        var arr = [];\n        for (var i = 0; i < 4; i++) {\n            if (self.talents[i]() !== -1) {\n                arr.push(self.heroData().talents[i][self.talents[i]()]);\n            }\n        }\n        return arr;\n    });\n    \n    self.skillPointHistory = ko.observableArray();\n    \n    self.ability = ko.computed(function () {\n        var a = new AbilityModel(ko.observableArray(JSON.parse(JSON.stringify(self.heroData().abilities))), self);\n        switch (self.heroId()) {\n            case 'earth_spirit':\n            case 'ogre_magi':\n                a._abilities[3].level(1);\n            break;\n            case 'monkey_king':\n                a._abilities[5].level(1);\n            break;\n            case 'invoker':\n                for (var i = 5; i < 16; i++) {\n                    a._abilities[i].level(1);\n                }\n            break;\n        }\n        self.skillPointHistory.removeAll();\n        a.hasScepter = self.inventory.hasScepter\n        return a;\n    });\n\n    self.availableSkillPoints = ko.computed(function () {\n        var c = self.selectedHeroLevel();\n        for (var i = 0; i < 4; i++) {\n            if (self.selectedHeroLevel() < i * 5 + 10) self.talents[i](-1);\n        }\n        c -= self.talents.filter(function (talent) { return talent() !== -1 }).length;\n        for (var i = 0; i < self.ability().abilities().length; i++) {\n            switch(self.ability().abilities()[i].abilitytype) {\n                case 'DOTA_ABILITY_TYPE_ULTIMATE':\n                    if (self.heroId() === 'invoker') {\n                        /*while (\n                            ((self.ability().abilities()[i].level() == 1) && (parseInt(self.selectedHeroLevel()) < 2)) ||\n                            ((self.ability().abilities()[i].level() == 2) && (parseInt(self.selectedHeroLevel()) < 7)) ||\n                            ((self.ability().abilities()[i].level() == 3) && (parseInt(self.selectedHeroLevel()) < 11)) ||\n                            ((self.ability().abilities()[i].level() == 4) && (parseInt(self.selectedHeroLevel()) < 17))\n                        ) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }*/\n                    }\n                    else if (self.heroId() === 'meepo') {\n                        while ((self.ability().abilities()[i].level()-1) * 7 + 3 > parseInt(self.selectedHeroLevel())) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }\n                    }\n                    else {\n                        while (self.ability().abilities()[i].level() * 5 + 1 > parseInt(self.selectedHeroLevel())) {\n                            self.ability().levelDownAbility(i, null, null, self);\n                        }\n                    }\n                break;\n                default:\n                    while (self.ability().abilities()[i].level() * 2 - 1 > parseInt(self.selectedHeroLevel())) {\n                        self.ability().levelDownAbility(i, null, null, self);\n                    }\n                break;\n            }\n        }\n        while (self.skillPointHistory().length > c) {\n            self.ability().levelDownAbility(self.skillPointHistory()[self.skillPointHistory().length-1], null, null, self);\n        }\n        return c-self.skillPointHistory().length;\n    }, this);\n    self.primaryAttribute = ko.pureComputed(function () {\n        var v = self.heroData().attributeprimary;\n        if (v === 'DOTA_ATTRIBUTE_AGILITY') return 'agi';\n        if (v === 'DOTA_ATTRIBUTE_INTELLECT') return 'int';\n        if (v === 'DOTA_ATTRIBUTE_STRENGTH') return 'str';\n        return '';\n    });\n    self.totalExp = ko.pureComputed(function () {\n        return totalExp[self.selectedHeroLevel() - 1];\n    });\n    self.nextLevelExp = ko.pureComputed(function () {\n        return nextLevelExp[self.selectedHeroLevel() - 1];\n    });\n    self.startingArmor = ko.pureComputed(function () {\n        return (self.heroData().attributebaseagility * .14 + self.heroData().armorphysical).toFixed(2);\n    });\n    self.respawnTime = ko.pureComputed(function () {\n        var level = self.selectedHeroLevel();\n        var reduction = TalentController.getRespawnReduction(self.selectedTalents());\n        if (level >= 1 && level <= 5) {\n            return (level - 1) * 2 + 8 - reduction;\n        }\n        else if (level >= 6 && level <= 11) {\n            return (level - 6) * 2 + 26 - reduction;\n        }\n        else if (level >= 12 && level <= 17) {\n            return (level - 12) * 2 + 46 - reduction;\n        }\n        else if (level >= 18 && level <= 24) {\n            return (level - 18) * 4 + 66 - reduction;\n        }\n        else if (level == 25) {\n            return 100 - reduction;\n        }\n    });\n    self.totalAttribute = function (a) {\n        if (a === 'agi') return parseFloat(self.totalAgi());\n        if (a === 'int') return parseFloat(self.totalInt());\n        if (a === 'str') return parseFloat(self.totalStr());\n        return 0;\n    };\n    self.totalAgi = ko.pureComputed(function () {\n        return (self.heroData().attributebaseagility\n                + self.heroData().attributeagilitygain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getAgility()\n                + TalentController.getAgility(self.selectedTalents())\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.intStolen = ko.observable(0).extend({ numeric: 0 });\n    self.totalInt = ko.pureComputed(function () {\n        return (self.heroData().attributebaseintelligence \n                + self.heroData().attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getIntelligence()\n                + TalentController.getIntelligence(self.selectedTalents())\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction() + self.intStolen()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.pureComputed(function () {\n        return (self.heroData().attributebasestrength \n                + self.heroData().attributestrengthgain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getStrength()\n                + TalentController.getStrength(self.selectedTalents())\n                + self.enemy().ability().getStrengthReduction()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.health = ko.pureComputed(function () {\n        return (self.heroData().statushealth + Math.floor(self.totalStr()) * 20 \n                + self.inventory.getHealth()\n                + self.ability().getHealth()\n                + TalentController.getHealth(self.selectedTalents())\n                ).toFixed(2);\n    });\n    self.healthregen = ko.pureComputed(function () {\n        var healthRegenAura = [self.inventory.getHealthRegenAura, self.buffs.itemBuffs.getHealthRegenAura].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value: 0, excludeList: []});\n        return (self.heroData().statushealthregen + self.totalStr() * .03 \n                + self.inventory.getHealthRegen() \n                + self.ability().getHealthRegen()\n                + TalentController.getHealthRegen(self.selectedTalents())\n                + self.buffs.getHealthRegen()\n                + healthRegenAura.value\n                ).toFixed(2);\n    });\n    self.mana = ko.pureComputed(function () {\n        return (self.heroData().statusmana\n                + self.totalInt() * 12\n                + self.inventory.getMana()\n                + TalentController.getMana(self.selectedTalents())\n                + self.ability().getMana()).toFixed(2);\n    });\n    self.manaregen = ko.pureComputed(function () {\n        return ((self.heroData().statusmanaregen \n                + self.totalInt() * .04 \n                + self.ability().getManaRegen()\n                + TalentController.getManaRegen(self.selectedTalents())\n                ) \n                * (1 + self.inventory.getManaRegenPercent()) \n                + (self.heroId() === 'crystal_maiden' ? self.ability().getManaRegenArcaneAura() * 2 : self.buffs.getManaRegenArcaneAura())\n                + self.inventory.getManaRegenBloodstone()\n                + self.inventory.getManaRegen()\n                - self.enemy().ability().getManaRegenReduction()).toFixed(2);\n    });\n    self.totalArmorPhysical = ko.pureComputed(function () {\n        var armorAura = [self.inventory.getArmorAura, self.buffs.itemBuffs.getArmorAura].reduce(function (memo, fn) {\n            var obj = fn(memo.attributes);\n            return obj;\n        }, {value:0, attributes:[]});\n        var armorReduction = [self.enemy().inventory.getArmorReduction, self.debuffs.itemBuffs.getArmorReduction].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value: 0, excludeList: []});\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (self.heroData().armorphysical + self.totalAgi() * .14)\n                + self.inventory.getArmor()\n                //+ self.inventory.getArmorAura().value\n                //+ self.enemy().inventory.getArmorReduction()\n                + self.ability().getArmor()\n                + TalentController.getArmor(self.selectedTalents())\n                + self.enemy().ability().getArmorReduction()\n                + self.buffs.getArmor()\n                //+ self.buffs.itemBuffs.getArmor()\n                + self.debuffs.getArmorReduction()\n                //+ self.buffs.itemBuffs.getArmorAura().value\n                + armorAura.value\n                + armorReduction.value\n                //+ self.debuffs.getArmorReduction()\n                ).toFixed(2);\n    });\n    self.totalArmorPhysicalReduction = ko.pureComputed(function () {\n        var totalArmor = self.totalArmorPhysical();\n        if (totalArmor >= 0) {\n            return ((0.06 * self.totalArmorPhysical()) / (1 + 0.06 * self.totalArmorPhysical()) * 100).toFixed(2);\n        }\n        else {\n            return -((0.06 * -self.totalArmorPhysical()) / (1 + 0.06 * -self.totalArmorPhysical()) * 100).toFixed(2);\n        }\n    });\n    self.spellAmp = ko.pureComputed(function () {\n        return (self.totalInt() / 16\n                + self.inventory.getSpellAmp()\n                + self.ability().getSpellAmp()\n                + TalentController.getSpellAmp(self.selectedTalents())\n                + self.buffs.getSpellAmp()\n                ).toFixed(2);\n    });\n    self.cooldownReductionFlat = ko.pureComputed(function () {\n        return self.inventory.getCooldownReductionFlat()\n                + self.ability().getCooldownReductionFlat()\n                + TalentController.getCooldownReductionFlat(self.selectedTalents())\n                + self.buffs.getCooldownReductionFlat()\n                - self.enemy().inventory.getCooldownIncreaseFlat()\n                - self.enemy().ability().getCooldownIncreaseFlat()\n                - self.debuffs.getCooldownIncreaseFlat()\n                - self.debuffs.itemBuffs.getCooldownIncreaseFlat();\n    });\n    self.cooldownReductionProduct = ko.pureComputed(function () {\n        return self.inventory.getCooldownReductionPercent().value\n                * self.ability().getCooldownReductionPercent()\n                * TalentController.getCooldownReductionPercent(self.selectedTalents())\n                * self.buffs.getCooldownReductionPercent()\n                * self.enemy().inventory.getCooldownIncreasePercent()\n                * self.enemy().ability().getCooldownIncreasePercent()\n                * self.debuffs.getCooldownIncreasePercent()\n                * self.debuffs.itemBuffs.getCooldownIncreasePercent();\n    });\n    self.cooldownReductionPercent = ko.pureComputed(function () {\n        return ((1 - self.cooldownReductionProduct()) * 100).toFixed(2);\n    });\n    self.totalMovementSpeed = ko.pureComputed(function () {\n        var MIN_MOVESPEED = 100;\n        var ms = (self.ability().setMovementSpeed() > 0 ? self.ability().setMovementSpeed() : self.buffs.setMovementSpeed());\n        if (ms > 0) {\n            return ms;\n        }\n        else {\n            var movementSpeedFlat = [self.inventory.getMovementSpeedFlat, self.buffs.itemBuffs.getMovementSpeedFlat].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value:0, excludeList:[]});\n            var movementSpeedPercent = [self.inventory.getMovementSpeedPercent, self.buffs.itemBuffs.getMovementSpeedPercent].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value:0, excludeList:[]});\n            var movementSpeedPercentReduction = [self.enemy().inventory.getMovementSpeedPercentReduction, self.debuffs.itemBuffs.getMovementSpeedPercentReduction].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value:0, excludeList:[]});\n            return Math.max(\n                self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped() ? 140 :\n                (self.heroData().movementspeed + movementSpeedFlat.value + self.ability().getMovementSpeedFlat() + TalentController.getMovementSpeedFlat(self.selectedTalents())) * \n                (1 //+ self.inventory.getMovementSpeedPercent() \n                   + movementSpeedPercent.value\n                   + movementSpeedPercentReduction.value\n                   + self.ability().getMovementSpeedPercent() \n                   //+ self.enemy().inventory.getMovementSpeedPercentReduction() \n                   + self.enemy().ability().getMovementSpeedPercentReduction() \n                   + self.buffs.getMovementSpeedPercent() \n                   + self.debuffs.getMovementSpeedPercentReduction()\n                   + self.unit().ability().getMovementSpeedPercent() \n                )\n            , MIN_MOVESPEED).toFixed(2);\n        }\n    });\n    self.totalTurnRate = ko.pureComputed(function () {\n        return (self.heroData().movementturnrate \n                * (1 + self.enemy().ability().getTurnRateReduction()\n                     + self.debuffs.getTurnRateReduction())).toFixed(2);\n    });\n    self.baseDamage = ko.pureComputed(function () {\n        var totalAttribute = self.totalAttribute(self.primaryAttribute()),\n            abilityBaseDamage = self.ability().getBaseDamage(),\n            minDamage = self.heroData().attackdamagemin,\n            maxDamage = self.heroData().attackdamagemax;\n        return [Math.floor((minDamage + totalAttribute + abilityBaseDamage.total) * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct() * abilityBaseDamage.multiplier),\n                Math.floor((maxDamage + totalAttribute + abilityBaseDamage.total) * self.ability().getSelfBaseDamageReductionPct() * self.enemy().ability().getBaseDamageReductionPct() * self.debuffs.getBaseDamageReductionPct() * self.debuffs.itemBuffs.getBaseDamageReductionPct() * abilityBaseDamage.multiplier)];\n    });\n    self.baseDamageAvg = ko.pureComputed(function () {\n        return (self.baseDamage()[0] + self.baseDamage()[1]) / 2;\n    });\n    self.baseDamageMin = ko.pureComputed(function () {\n        return self.baseDamage()[0];\n    });\n    self.baseDamageMax = ko.pureComputed(function () {\n        return self.baseDamage()[1];\n    });\n    self.bonusDamage = ko.pureComputed(function () {\n        return ((self.inventory.getBonusDamage().total\n                + self.ability().getBonusDamage().total\n                + TalentController.getBonusDamage(self.selectedTalents()).total\n                + self.buffs.getBonusDamage().total\n                + Math.floor((self.baseDamage()[0] + self.baseDamage()[1]) / 2 \n                              * (self.buffs.itemBuffs.getBonusDamagePercent(self.inventory.getBonusDamagePercent()).total\n                                 + self.ability().getBonusDamagePercent().total\n                                 + self.buffs.getBonusDamagePercent().total\n                                )\n                            )\n                + Math.floor(\n                    (self.heroData().attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK' \n                        ? ((self.heroId() == 'drow_ranger') ? self.ability().getBonusDamagePrecisionAura().total[0] * self.totalAgi() : self.buffs.getBonusDamagePrecisionAura().total[1])\n                        : 0)\n                  )\n                + Math.floor(\n                    ((self.heroId() == 'riki') ? self.ability().getBonusDamageBackstab().total[0] * self.totalAgi() : 0)\n                  )\n                ) * self.ability().getSelfBaseDamageReductionPct()\n                  * self.enemy().ability().getBaseDamageReductionPct()\n                  * self.debuffs.itemBuffs.getBaseDamageReductionPct());\n    });\n    self.bonusDamageReduction = ko.pureComputed(function () {\n        return Math.abs(self.enemy().ability().getBonusDamageReduction() + self.debuffs.getBonusDamageReduction());\n    });\n    self.damageAvg = ko.pureComputed(function () {\n        return (self.baseDamage()[0] + self.baseDamage()[1]) / 2 + self.bonusDamage();\n    });\n    self.damageMin = ko.pureComputed(function () {\n        return self.baseDamage()[0] + self.bonusDamage();\n    });\n    self.damageMax = ko.pureComputed(function () {\n        return self.baseDamage()[1] + self.bonusDamage();\n    });\n    self.damage = ko.pureComputed(function () {\n        return [self.baseDamage()[0] + self.bonusDamage(),\n                self.baseDamage()[1] + self.bonusDamage()];\n    });\n    self.totalMagicResistanceProduct = ko.pureComputed(function () {\n        return (1 - self.heroData().magicalresistance / 100) \n                * self.inventory.getMagicResist()\n                * self.ability().getMagicResist()\n                * TalentController.getMagicResist(self.selectedTalents())\n                * self.buffs.getMagicResist()\n                * self.inventory.getMagicResistReductionSelf()\n                * self.enemy().inventory.getMagicResistReduction()\n                * self.enemy().ability().getMagicResistReduction()\n                * self.debuffs.getMagicResistReduction()\n                * self.debuffs.itemBuffs.getMagicResistReduction();\n    });\n    self.totalMagicResistance = ko.pureComputed(function () {\n        return ((1 - self.totalMagicResistanceProduct()) * 100).toFixed(2);\n    });\n    self.bat = ko.pureComputed(function () {\n        var abilityBAT = self.ability().getBAT();\n        if (abilityBAT > 0) {\n            return abilityBAT;\n        }\n        return self.heroData().attackrate;\n    });\n    self.ias = ko.pureComputed(function () {\n        var attackSpeed = [self.inventory.getAttackSpeed].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value:0, excludeList:[]});\n        var attackSpeedAura = [self.inventory.getAttackSpeedAura, self.buffs.itemBuffs.getAttackSpeedAura].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value: 0, excludeList: []});\n        var attackSpeedReduction = [self.enemy().inventory.getAttackSpeedReduction, self.debuffs.itemBuffs.getAttackSpeedReduction].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value += memo.value;\n            return obj;\n        }, {value:0, excludeList: []});\n        var val = parseFloat(self.totalAgi()) \n                //+ self.inventory.getAttackSpeed() \n                + attackSpeed.value\n                + attackSpeedAura.value\n                + attackSpeedReduction.value\n                //+ self.enemy().inventory.getAttackSpeedReduction() \n                + self.ability().getAttackSpeed() \n                + TalentController.getAttackSpeed(self.selectedTalents()) \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction()\n                + self.unit().ability().getAttackSpeed(); \n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 500) {\n            return 500;\n        }\n        return val.toFixed(2);\n    });\n    self.attackTime = ko.pureComputed(function () {\n        return (self.bat() / (1 + self.ias() / 100)).toFixed(2);\n    });\n    self.attacksPerSecond = ko.pureComputed(function () {\n        return ((1 + self.ias() / 100) / self.bat()).toFixed(2);\n    });\n    self.evasion = ko.pureComputed(function () {\n        if (self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped()) return 0;\n        var e = self.ability().setEvasion();\n        if (e) {\n            return (e * 100).toFixed(2);\n        }\n        else {\n            return (\n                (\n                    1 - (\n                        self.inventory.getEvasion()\n                        * self.ability().getEvasion()\n                        * self.ability().getEvasionBacktrack()\n                        * TalentController.getEvasion(self.selectedTalents())\n                        * self.buffs.itemBuffs.getEvasion()\n                    )\n                ) * 100\n            ).toFixed(2);\n        }\n    });\n    self.ehpPhysical = ko.pureComputed(function () {\n        var evasion = self.enemy().inventory.isSheeped() || self.debuffs.itemBuffs.isSheeped() ? 1 : self.inventory.getEvasion() * self.ability().getEvasion() * self.buffs.itemBuffs.getEvasion();\n        if (self.totalArmorPhysical() >= 0) {\n            var ehp = self.health() * (1 + .06 * self.totalArmorPhysical());\n        }\n        else {\n            var ehp = self.health() * (1 - .06 * self.totalArmorPhysical()) / (1 - .12 * self.totalArmorPhysical());\n        }\n        ehp /= (1 - (1 - (evasion * self.ability().getEvasionBacktrack())));\n        ehp /= (1 - parseFloat(self.enemy().missChance()) / 100);\n        ehp *= (self.inventory.activeItems().some(function (item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.ability().getDamageReduction());\n        ehp *= (1 / self.buffs.getDamageReduction());\n        ehp *= (1 / self.enemy().ability().getDamageAmplification());\n        ehp *= (1 / self.debuffs.getDamageAmplification());\n        return ehp.toFixed(2);\n    });\n    self.ehpMagical = ko.pureComputed(function () {\n        var ehp = self.health() / self.totalMagicResistanceProduct();\n        ehp *= (self.inventory.activeItems().some(function (item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.ability().getDamageReduction());\n        ehp *= (1 / self.buffs.getDamageReduction());\n        ehp *= (1 / self.ability().getEvasionBacktrack());\n        ehp *= (1 / self.enemy().ability().getDamageAmplification());\n        ehp *= (1 / self.debuffs.getDamageAmplification());\n        return ehp.toFixed(2);\n    });\n    self.bash = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        return ((1 - (self.inventory.getBash(attacktype) * self.ability().getBash())) * 100).toFixed(2);\n    });\n    \n    self.critChance = ko.pureComputed(function () {\n        return ((1 - (self.inventory.getCritChance() * self.ability().getCritChance())) * 100).toFixed(2);\n    });\n\n    HeroDamageMixin(self, itemData);\n    \n    /*self.critDamage = ko.computed(function () {\n        self.critInfo();\n        return 0;\n    });*/\n    self.missChance = ko.pureComputed(function () {\n        var missDebuff = [self.enemy().inventory.getMissChance, self.debuffs.itemBuffs.getMissChance].reduce(function (memo, fn) {\n            var obj = fn(memo.excludeList);\n            obj.value *= memo.value;\n            return obj;\n        }, {value:1, excludeList:[]});\n        return ((1 - (self.enemy().ability().getMissChance() * self.debuffs.getMissChance() * missDebuff.value)) * 100).toFixed(2);\n    });\n    self.totalattackrange = ko.pureComputed(function () {\n        var attacktype = self.heroData().attacktype;\n        return self.heroData().attackrange\n             + self.ability().getAttackRange()\n             + TalentController.getAttackRange(self.selectedTalents())\n             + self.inventory.getAttackRange(attacktype).value;\n    });\n    self.visionrangeday = ko.pureComputed(function () {\n        return (self.heroData().visiondaytimerange) * (1 + self.enemy().ability().getVisionRangePctReduction() + self.debuffs.getVisionRangePctReduction());\n    });\n    self.visionrangenight = ko.pureComputed(function () {\n        return (self.heroData().visionnighttimerange + self.inventory.getVisionRangeNight() + self.ability().getVisionRangeNight()) * (1 + self.enemy().ability().getVisionRangePctReduction() + self.debuffs.getVisionRangePctReduction());\n    });\n    self.lifesteal = ko.pureComputed(function () {\n        var total = self.inventory.getLifesteal()\n                  + self.ability().getLifesteal()\n                  + TalentController.getLifesteal(self.selectedTalents())\n                  + self.buffs.getLifesteal();\n        if (self.heroData().attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n            var lifestealAura = [self.inventory.getLifestealAura, self.buffs.itemBuffs.getLifestealAura].reduce(function (memo, fn) {\n                var obj = fn(memo.excludeList);\n                obj.value += memo.value;\n                return obj;\n            }, {value: 0, excludeList: []});\n            total += lifestealAura.value;\n        }\n        return (total).toFixed(2);\n    });\n    \n    self.diffProperties = diffProperties;\n    self.diff = {};\n\n    for (var i = 0; i < self.diffProperties.length; i++) {\n        var index = i;\n        self.diff[self.diffProperties[index]] = self.getDiffFunction(self.diffProperties[index]);\n    }\n};\n\nHeroModel.prototype.getDiffFunction = function (prop) {\n    var self = this;\n    return ko.computed(function () {\n        if (prop == 'baseDamage') {\n            return [self[prop]()[0] - self.heroCompare()[prop]()[0], self[prop]()[1] - self.heroCompare()[prop]()[1]];\n        }\n        else {\n            return self[prop]() - self.heroCompare()[prop]();\n        }\n    }, this, { deferEvaluation: true });\n}\n\nHeroModel.prototype.getAbilityLevelMax = function (data) {\n    if (data.abilitytype === 'DOTA_ABILITY_TYPE_ATTRIBUTES') {\n        return 1;\n    }\n    else if (data.name === 'invoker_quas' || data.name === 'invoker_wex' || data.name === 'invoker_exort') {\n        return 7;\n    }\n    else if (data.name === 'invoker_invoke') {\n        return 1;\n    }\n    else if (data.name === 'earth_spirit_stone_caller' || data.name === 'ogre_magi_unrefined_fireblast' || data.name === 'monkey_king_mischief') {\n        return 1;\n    }\n    else if (data.abilitytype === 'DOTA_ABILITY_TYPE_ULTIMATE' || data.name === 'keeper_of_the_light_recall' ||\n             data.name === 'keeper_of_the_light_blinding_light' || data.name === 'ember_spirit_activate_fire_remnant' ||\n             data.name === 'lone_druid_true_form_battle_cry') {\n        return 3;\n    }\n    else if (data.name === 'puck_ethereal_jaunt'  || data.name === 'shadow_demon_shadow_poison_release' ||\n             data.name === 'templar_assassin_trap' || data.name === 'spectre_reality') {\n        return 0;\n    }\n    else if (data.name === 'invoker_cold_snap'  || data.name === 'invoker_ghost_walk' || data.name === 'invoker_tornado' || \n             data.name === 'invoker_emp' || data.name === 'invoker_alacrity' || data.name === 'invoker_chaos_meteor' || \n             data.name === 'invoker_sun_strike' || data.name === 'invoker_forge_spirit' || data.name === 'invoker_ice_wall' || \n             data.name === 'invoker_deafening_blast') {\n        return 0;\n    }\n    else if (data.name === 'techies_minefield_sign' || data.name === 'techies_focused_detonate') {\n        return 0;\n    }\n    else {\n        return 4;\n    }\n};\n\nHeroModel.prototype.toggleTalent = function (talentTier, talentIndex) {\n    if (this.talents[talentTier]() === talentIndex) {\n        this.talents[talentTier](-1);\n    }\n    else if (this.availableSkillPoints() > 0 || this.talents[talentTier]() == 1 - talentIndex) {\n        if (parseInt(this.selectedHeroLevel()) >= talentTier * 5 + 10) {\n            this.talents[talentTier](talentIndex);\n        }\n    }\n}\n\nmodule.exports = HeroModel;","var HeroOption = function (name, displayname, hero) {\n    this.heroName = name;\n    this.heroDisplayName = displayname;\n    this.hero = hero;\n};\n\nmodule.exports = HeroOption;","'use strict';\nvar HeroModel = require(\"./HeroModel\");\nvar illusionData = require(\"../illusion/illusionData\");\nvar findWhere = require(\"../util/findWhere\");\n\nvar IllusionModel = function (heroData, itemData, h,p, abilityLevel) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, h);\n    self.illusionAbilityLevel = ko.observable(abilityLevel);\n    self.parent = p;\n    \n    self.totalAgi = ko.computed(function () {\n        return (self.heroData().attributebaseagility\n                + self.heroData().attributeagilitygain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getAgility()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.intStolen = ko.observable(0).extend({ numeric: 0 });\n    self.totalInt = ko.computed(function () {\n        return (self.heroData().attributebaseintelligence \n                + self.heroData().attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getIntelligence()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction() + self.intStolen()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.computed(function () {\n        return (self.heroData().attributebasestrength \n                + self.heroData().attributestrengthgain * (self.selectedHeroLevel() - 1) \n                + self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel() * 2\n                + self.ability().getStrength()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    \n    self.getAbilityAttributeValue = function(hero, ability, attributeName, level) {\n        if (ability == 'item_manta') {\n            var abilityObj = itemData[ability];\n        }\n        else {\n            var abilityObj = findWhere(heroData['npc_dota_hero_' + hero].abilities, {name: ability});\n        }\n        var attribute = findWhere(abilityObj.attributes, {name: attributeName});\n        if (level == 0) {\n            return parseFloat(attribute.value[0]);\n        }\n        else if (level > attribute.length) {\n            return parseFloat(attribute.value[0]);\n        }\n        else {\n            return parseFloat(attribute.value[level - 1]);\n        }\n    }\n    \n    self.getIncomingDamageMultiplier = function(illusionType, hasScepter, attackType) {\n        if (illusionType == 'item_manta') {\n            if (attackType == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage_melee, self.illusionAbilityLevel())/100)\n            }\n            else {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage_ranged, self.illusionAbilityLevel())/100)\n            }\n        }\n        else {\n            return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].incoming_damage, self.illusionAbilityLevel())/100)\n        }\n    }\n    self.getOutgoingDamageMultiplier = function(illusionType, hasScepter, attackType) {\n        if (illusionType == 'item_manta') {\n            if (attackType == 'DOTA_UNIT_CAP_MELEE_ATTACK') {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage_melee, self.illusionAbilityLevel())/100);\n            }\n            else {\n                return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage_ranged, self.illusionAbilityLevel())/100);\n            }\n        }\n        else {\n            return (1 + self.getAbilityAttributeValue(illusionData[self.illusionType()].hero, self.illusionType(), illusionData[illusionType].outgoing_damage, self.illusionAbilityLevel())/100);\n        }\n    }\n\n    self.baseDamage = ko.computed(function() {\n        return [Math.floor(heroData['npc_dota_hero_' + self.heroId()].attackdamagemin + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)\n                * self.getOutgoingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype),\n                Math.floor(heroData['npc_dota_hero_' + self.heroId()].attackdamagemax + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)\n                * self.getOutgoingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype)];\n    });\n    \n    self.damage = ko.computed(function() {\n        return [self.baseDamage()[0],\n                self.baseDamage()[1]];\n    });\n    \n    self.ehpPhysical = ko.computed(function() {\n        var ehp = (self.health() * (1 + .06 * self.totalArmorPhysical())) / (1 - (1 - (self.inventory.getEvasion() * self.ability().getEvasion())))\n        ehp *= (self.inventory.activeItems().some(function(item) {return item.item == 'mask_of_madness';}) ? (1 / 1.3) : 1);\n        ehp *= (1 / self.getIncomingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype));\n        return ehp.toFixed(2);\n    });\n    self.ehpMagical = ko.computed(function() {\n        var ehp = self.health() / self.totalMagicResistanceProduct();\n        ehp *= (1 / self.getIncomingDamageMultiplier(self.illusionType(), false, self.heroData().attacktype));\n        return ehp.toFixed(2);\n    });\n    \n    self.totalArmorPhysical = ko.computed(function() {\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (heroData['npc_dota_hero_' + self.heroId()].armorphysical + self.totalAgi() * .14)\n                + self.ability().getArmor() + self.enemy().ability().getArmorReduction() + self.buffs.getArmor() + self.debuffs.getArmorReduction()).toFixed(2);\n    });\n    \n    self.ias = ko.computed(function() {\n        var val = parseFloat(self.totalAgi()) \n                + self.ability().getAttackSpeed() \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction()\n                + self.unit().ability().getAttackSpeed(); \n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 400) {\n            return 400;\n        }\n        return val.toFixed(2);\n    });\n    \n    return self;\n}\nIllusionModel.prototype = Object.create(HeroModel.prototype);\nIllusionModel.prototype.constructor = IllusionModel;\n\nmodule.exports = IllusionModel;","module.exports = {\n    getBonusDamage: function (talents) {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_damage_')) {\n                totalAttribute += ability.attributes[0].value[0];\n                sources[ability.name] = {\n                    'damage': ability.attributes[0].value[0],\n                    'damageType': 'physical',\n                    'displayname': ability.displayname\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    },\n    getHealth: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_hp_') && !ability.name.startsWith('special_bonus_hp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getHealthRegen: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_hp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getMana: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_mp_') && !ability.name.startsWith('special_bonus_mp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getManaRegen: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_mp_regen_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getArmor: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_armor_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getSpellAmp: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_spell_amplify_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getCooldownReductionFlat: function (talents) {\n        var totalAttribute = 0;\n        return totalAttribute;\n    },\n    getCooldownReductionPercent: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_cooldown_reduction_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getCooldownIncreaseFlat: function (talents) {\n        var totalAttribute = 0;\n        return totalAttribute;\n    },\n    getCooldownIncreasePercent: function (talents) {\n        var totalAttribute = 1;\n        return totalAttribute;\n    },\n    getMovementSpeedFlat: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_movement_speed_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAttackRange: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_range_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAttackSpeed: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_attack_speed_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getLifesteal: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_lifesteal_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getEvasion: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_evasion_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getMagicResist: function (talents) {\n        var totalAttribute = 1;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_magic_resistance_')) {\n                totalAttribute *= (1 - ability.attributes[0].value[0]/100);\n            }\n        }\n        return totalAttribute;\n    },\n    getRespawnReduction: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_respawn_reduction_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getStrength: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_strength_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getAgility: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_agility_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    },\n    getIntelligence: function (talents) {\n        var totalAttribute = 0;\n        for (var i = 0; i < talents.length; i++) {\n            var ability = talents[i];\n            if (ability.name.startsWith('special_bonus_intelligence_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n            else if (ability.name.startsWith('special_bonus_all_stats_')) {\n                totalAttribute += ability.attributes[0].value[0];\n            }\n        }\n        return totalAttribute;\n    }\n}","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar AbilityModel = require(\"../AbilityModel\");\nvar HeroModel = require(\"./HeroModel\");\n\nvar UnitModel = function (heroData, itemData, unitData, h, p) {\n    var self = this;\n    HeroModel.call(this, heroData, itemData, 'abaddon');\n    self.parent = p;\n    self.unitId = ko.observable(h);\n    self.unitLevel = ko.observable(1);\n\n    self.heroData = ko.computed(function() {\n        return unitData[self.unitId()];\n    });\n    self.getAbilityLevelMax = function(data) {\n        if (data.abilitytype == 'DOTA_ABILITY_TYPE_ATTRIBUTES') {\n            return 10;\n        }\n        else if (data.name == 'necronomicon_archer_mana_burn' || data.name == 'necronomicon_archer_aoe'\n            || data.name == 'necronomicon_warrior_mana_burn' || data.name == 'necronomicon_warrior_last_will') {\n            return 3;\n        }\n        else if (data.name == 'necronomicon_warrior_sight') {\n            return 1;\n        }\n        else {\n            return 4;\n        }\n    };\n    self.availableSkillPoints.dispose();\n    self.ability = ko.computed(function() {\n        var a = new AbilityModel(ko.observableArray(JSON.parse(JSON.stringify(self.heroData().abilities))), self);\n        a.hasScepter = self.inventory.hasScepter\n        switch (self.unitId()) {\n            case 'npc_dota_necronomicon_archer_1':\n            case 'npc_dota_necronomicon_warrior_1':\n                a.abilities()[0].level(1);\n                a.abilities()[1].level(1);\n            break;\n            case 'npc_dota_necronomicon_archer_2':\n            case 'npc_dota_necronomicon_warrior_2':\n                a.abilities()[0].level(2);\n                a.abilities()[1].level(2);\n            break;\n            case 'npc_dota_necronomicon_archer_3':\n                a.abilities()[0].level(3);\n                a.abilities()[1].level(3);\n            break;\n            case 'npc_dota_necronomicon_warrior_3':\n                a.abilities()[0].level(3);\n                a.abilities()[1].level(3);\n                a.abilities()[2].level(1);\n            break;\n        }\n        a.levelUpAbility = function(index, data, event, hero) {\n            var i = ko.utils.unwrapObservable(index);\n            switch (a.abilities()[i].name) {\n                case 'necronomicon_archer_mana_burn':\n                case 'necronomicon_archer_aoe':\n                case 'necronomicon_warrior_mana_burn':\n                case 'necronomicon_warrior_last_will':\n                case 'necronomicon_warrior_sight':\n                break;\n                default:\n                    if (a.abilities()[i].level() < hero.getAbilityLevelMax(data)) {\n                        a.abilities()[i].level(a.abilities()[i].level()+1);\n                    }                    \n                break;\n            }\n\n        };\n        a.levelDownAbility = function(index, data, event, hero) {            \n            var i = ko.utils.unwrapObservable(index);\n            switch (a.abilities()[i].name) {\n                case 'necronomicon_archer_mana_burn':\n                case 'necronomicon_archer_aoe':\n                case 'necronomicon_warrior_mana_burn':\n                case 'necronomicon_warrior_last_will':\n                case 'necronomicon_warrior_sight':\n                break;\n                default:\n                    if (a.abilities()[i].level()>0) {\n                        a.abilities()[i].level(a.abilities()[i].level()-1);\n                    }\n                break;\n            }\n        };\n        return a;\n    });        \n    self.primaryAttribute = ko.computed(function() {\n        //var v = unitData[self.unitId()].attributeprimary;\n        var v = 0;\n        if (v == 'DOTA_ATTRIBUTE_AGILITY') {\n            return 'agi'\n        }\n        else if (v == 'DOTA_ATTRIBUTE_INTELLECT') {\n            return 'int'\n        }\n        else if (v == 'DOTA_ATTRIBUTE_STRENGTH') {\n            return 'str'\n        }\n        else {\n            return ''\n        }\n    });\n    self.totalAttribute = function(a) {\n        if (a == 'agi') {\n            return parseFloat(self.totalAgi());\n        }\n        if (a == 'int') {\n            return parseFloat(self.totalInt());\n        }\n        if (a == 'str') {\n            return parseFloat(self.totalStr());\n        }\n        return 0;\n    };\n    self.totalAgi = ko.computed(function() {\n        return (unitData[self.unitId()].attributebaseagility\n                + unitData[self.unitId()].attributeagilitygain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('agi') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getAgility()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.totalInt = ko.computed(function() {\n        return (unitData[self.unitId()].attributebaseintelligence \n                + unitData[self.unitId()].attributeintelligencegain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('int') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getIntelligence()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    self.totalStr = ko.computed(function() {\n        return (unitData[self.unitId()].attributebasestrength \n                + unitData[self.unitId()].attributestrengthgain * (self.selectedHeroLevel() - 1) \n                //+ self.inventory.getAttributes('str') \n                + self.ability().getAttributeBonusLevel()*2\n                + self.ability().getStrength()\n                + self.enemy().ability().getAllStatsReduction()\n                + self.debuffs.getAllStatsReduction()\n               ).toFixed(2);\n    });\n    /*self.health = ko.computed(function() {\n        return (unitData[self.unitId()].statushealth + self.totalStr()*19 \n                + self.inventory.getHealth()\n                + self.ability().getHealth()).toFixed(2);\n    });\n    self.healthregen = ko.computed(function() {\n        return (unitData[self.unitId()].statushealthregen + self.totalStr()*.03 \n                + self.inventory.getHealthRegen() \n                + self.ability().getHealthRegen()\n                + self.buffs.getHealthRegen()).toFixed(2);\n    });\n    self.mana = ko.computed(function() {\n        return (unitData[self.unitId()].statusmana + self.totalInt()*13 + self.inventory.getMana()).toFixed(2);\n    });\n    self.manaregen = ko.computed(function() {\n        return ((unitData[self.unitId()].statusmanaregen \n                + self.totalInt()*.04 \n                + self.ability().getManaRegen()) \n                * (1 + self.inventory.getManaRegenPercent()) \n                + (self.selectedHero().heroName == 'crystal_maiden' ? self.ability().getManaRegenArcaneAura() * 2 : self.buffs.getManaRegenArcaneAura())\n                + self.inventory.getManaRegenBloodstone()\n                - self.enemy().ability().getManaRegenReduction()).toFixed(2);\n    });\n    self.totalArmorPhysical = ko.computed(function() {\n        return (self.enemy().ability().getArmorBaseReduction() * self.debuffs.getArmorBaseReduction() * (unitData[self.unitId()].armorphysical + self.totalAgi()*.14)\n                + self.inventory.getArmor() + self.ability().getArmor() + self.enemy().ability().getArmorReduction() + self.buffs.getArmor() + self.debuffs.getArmorReduction()).toFixed(2);\n    });\n    self.totalArmorPhysicalReduction = ko.computed(function() {\n        return ((0.06 * self.totalArmorPhysical()) / (1 + 0.06 * self.totalArmorPhysical()) * 100).toFixed(2);\n    });\n    self.totalMovementSpeed = ko.computed(function() {\n        if (self.parent.ability().isShapeShiftActive()) {\n            return 522;\n        }\n        var ms = (self.ability().setMovementSpeed() > 0 ? self.ability().setMovementSpeed() : self.buffs.setMovementSpeed());\n        if (ms > 0) {\n            return ms;\n        }\n        else {\n            return ((unitData[self.unitId()].movementspeed + self.inventory.getMovementSpeedFlat()+ self.ability().getMovementSpeedFlat()) * \n                    (1 + self.inventory.getMovementSpeedPercent() \n                       + self.ability().getMovementSpeedPercent() \n                       + self.enemy().inventory.getMovementSpeedPercentReduction() \n                       + self.enemy().ability().getMovementSpeedPercentReduction() \n                       + self.buffs.getMovementSpeedPercent() \n                       + self.debuffs.getMovementSpeedPercentReduction()\n                    )).toFixed(2);\n        }\n    });\n    self.totalTurnRate = ko.computed(function() {\n        return (unitData[self.unitId()].movementturnrate \n                * (1 + self.enemy().ability().getTurnRateReduction()\n                     + self.debuffs.getTurnRateReduction())).toFixed(2);\n    });\n    */\n    self.baseDamage = ko.computed(function() {\n        return [Math.floor(unitData[self.unitId()].attackdamagemin + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total),\n                Math.floor(unitData[self.unitId()].attackdamagemax + self.totalAttribute(self.primaryAttribute()) + self.ability().getBaseDamage().total)];\n    });\n    /*self.bonusDamage = ko.computed(function() {\n        return self.inventory.getBonusDamage().total\n                + self.ability().getBonusDamage().total\n                + self.buffs.getBonusDamage().total\n                + Math.floor((self.baseDamage()[0] + self.baseDamage()[1])/2 \n                              * (self.inventory.getBonusDamagePercent().total\n                                 + self.ability().getBonusDamagePercent().total\n                                 + self.buffs.getBonusDamagePercent().total\n                                )\n                            )\n                + Math.floor(\n                    (self.hero().attacktype() == 'DOTA_UNIT_CAP_RANGED_ATTACK' \n                        ? ((self.selectedHero().heroName == 'drow_ranger') ? self.ability().getBonusDamagePrecisionAura().total[0] * self.totalAgi() : self.buffs.getBonusDamagePrecisionAura().total[1])\n                        : 0)\n                  );\n    });*/\n    /*self.bonusDamageReduction = ko.computed(function() {\n        return Math.abs(self.enemy().ability().getBonusDamageReduction() + self.debuffs.getBonusDamageReduction());\n    });\n    self.damage = ko.computed(function() {\n        return [self.baseDamage()[0] + self.bonusDamage()[0],\n                self.baseDamage()[1] + self.bonusDamage()[1]];\n    });*/\n    self.totalMagicResistanceProduct = ko.computed(function() {\n        return (1 - unitData[self.unitId()].magicalresistance / 100) \n                   * (1 - self.inventory.getMagicResist() / 100) \n                   * (1 - self.ability().getMagicResist() / 100) \n                   * (1 - self.buffs.getMagicResist() / 100) \n                   * self.enemy().inventory.getMagicResistReduction()\n                   * self.enemy().ability().getMagicResistReduction() \n                   * self.debuffs.getMagicResistReduction();\n    });\n    self.totalMagicResistance = ko.computed(function() {\n        return (1 - self.totalMagicResistanceProduct());\n    });\n    self.bat = ko.computed(function() {\n        var abilityBAT = self.ability().getBAT();\n        if (abilityBAT > 0) {\n            return abilityBAT;\n        }\n        return unitData[self.unitId()].attackrate;\n    });\n    /*\n    self.ias = ko.computed(function() {\n        var val = parseFloat(self.totalAgi()) \n                + self.inventory.getAttackSpeed() \n                + self.ability().getAttackSpeed() \n                + self.enemy().ability().getAttackSpeedReduction() \n                + self.buffs.getAttackSpeed() \n                + self.debuffs.getAttackSpeedReduction();\n        if (val < -80) {\n            return -80;\n        }\n        else if (val > 400) {\n            return 400;\n        }\n        return (val).toFixed(2);\n    });*/\n    self.attackTime = ko.computed(function() {\n        return (self.bat() / (1 + self.ias() / 100)).toFixed(2);\n    });\n    self.attacksPerSecond = ko.computed(function() {\n        return (1 + self.ias() / 100) / self.bat();\n    });\n    self.evasion = ko.computed(function() {\n        var e = self.ability().setEvasion();\n        if (e) {\n            return (e * 100).toFixed(2) + '%';\n        }\n        else {\n            return ((1-(self.inventory.getEvasion() * self.ability().getEvasion())) * 100).toFixed(2) + '%';\n        }\n    });\n    self.ehpPhysical = ko.computed(function() {\n        return ((self.health() * (1 + .06 * self.totalArmorPhysical())) / (1-(1-(self.inventory.getEvasion() * self.ability().getEvasion())))).toFixed(2);\n    });\n    self.ehpMagical = ko.computed(function() {\n        return (self.health() / self.totalMagicResistanceProduct()).toFixed(2);\n    });\n    self.heroId(h);\n    self.unitId.subscribe(function (newValue) {\n        self.heroId(newValue);\n    });\n    return self;\n}\nUnitModel.prototype = Object.create(HeroModel.prototype);\nUnitModel.prototype.constructor = UnitModel;\n\nmodule.exports = UnitModel;","var diffProperties = [\n    'totalAgi',\n    'totalInt',\n    'totalStr',\n    'health',\n    'healthregen',\n    'mana',\n    'manaregen',\n    'totalArmorPhysical',\n    'totalArmorPhysicalReduction',\n    'totalMovementSpeed',\n    'totalTurnRate',\n    'spellAmp',\n    'cooldownReductionPercent',\n    'baseDamage',\n    'bonusDamage',\n    'bonusDamageReduction',\n    'damage',\n    'totalMagicResistanceProduct',\n    'totalMagicResistance',\n    'bat',\n    'ias',\n    'attackTime',\n    'attacksPerSecond',\n    'evasion',\n    'ehpPhysical',\n    'ehpMagical',\n    'bash',\n    'critChance',\n    //'critDamage',\n    'missChance',\n    'totalattackrange',\n    'visionrangeday',\n    'visionrangenight',\n    'lifesteal'\n];\n\nmodule.exports = diffProperties;","var HeroOption = require(\"./HeroOption\");\n\nvar heroOptionsArray = {};\n\nvar init = function (heroData) {\n    heroOptionsArray.items = [];\n    for (var h in heroData) {\n        heroOptionsArray.items.push(new HeroOption(h.replace('npc_dota_hero_', ''), heroData[h].displayname));\n    }\n    return heroOptionsArray.items;\n}\n\nheroOptionsArray.init = init;\n\nmodule.exports = heroOptionsArray;","var nextLevelExp = [200, 300, 400, 500, 600, 615, 630, 645, 660, 675, 775, 1175, 1200, 1225, 1250, 1275, 1375, 1400, 1425, 1600, 1900, 2200, 2500, 2975, '&mdash;'];\n\nmodule.exports = nextLevelExp;","var totalExp = [0, 200, 500, 900, 1400, 2000, 2615, 3425, 3890, 4550, 5225, 6000, 7175, 8375, 9600, 10850, 12125, 13500, 14900, 16325, 17925, 19825, 22025, 24525, 27500];\n\nmodule.exports = totalExp;","var abilityData = {\n    'alchemist_acid_spray': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'armor_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'alchemist_unstable_concoction': [\n        {\n            label: 'Brew Time',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'max_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/5;\n            }\n        },\n        {\n            attributeName: 'max_stun',\n            label: 'Total Stun',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/5;\n            }\n        }\n    ],\n    'ancient_apparition_cold_feet': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'stun_duration',\n            label: 'Total Stun',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        }\n    ],\n    'ancient_apparition_ice_blast': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'dot_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')+v*a;\n            }\n        }\n    ],\n    'antimage_mana_void': [\n        {\n            label: 'Enemy Missing Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_void_damage_per_mana',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'axe_battle_hunger': [\n        {\n            label: 'Battle Hungered Enemies',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'speed_bonus',\n            label: 'Movement Speed Bonus',\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'slow',\n            label: 'Movement Speed Bonus',\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'bane_nightmare': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'bane_fiends_grip': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'fiend_grip_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'fiend_grip_damage_scepter',ability.level());\n                }\n                else {\n                    return v[0]*a;\n                }\n            }\n        },\n        {\n            attributeName: 'fiend_grip_mana_drain',\n            label: 'Total Mana Drain',\n            controlType: 'text',\n            controls: [0,1],\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v[0]*v[1]*abilityModel.getAbilityAttributeValue(ability.attributes, 'fiend_grip_mana_drain_scepter',ability.level())/100;\n                }\n                else {\n                    return v[0]*v[1]*a/100;\n                }\n            }\n        }\n    ],\n    'batrider_sticky_napalm': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Bonus Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'movement_speed_pct',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'turn_rate_pct',\n            label: 'Enemy Turn Rate Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'turnRateReduction'\n        }\n    ],\n    'batrider_firefly': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'bloodseeker_rupture': [\n        {\n            label: 'Enemy Distance Traveled',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_damage_pct',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage') + v*a/100;\n            }\n        }\n    ],\n    'bristleback_viscous_nasal_goo': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'armor_per_stack',\n            label: 'Enemy Armor Reduction',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        },\n        {\n            attributeName: 'move_slow_per_stack',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -(abilityModel.getAbilityAttributeValue(ability.attributes, 'base_move_slow',0)+v*a);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'bristleback_quill_spray': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'quill_stack_damage',\n            label: 'DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'quill_base_damage',ability.level())+v*a,\n                damage_cap = abilityModel.getAbilityAttributeValue(ability.attributes, 'max_damage',0);\n                if (total > damage_cap) {\n                    total = damage_cap;\n                }\n                return total;\n            }\n        }\n    ],\n    'bristleback_bristleback': [\n        {\n            label: 'Damage From',\n            controlType: 'radio',\n            controlValueType: 'string',\n            controlOptions: [\n                {text: 'Back', value: 'back'},\n                {text: 'Side', value: 'side'}\n            ]\n        },\n        {\n            attributeName: 'back_damage_reduction',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ability = abilityModel.abilities().find(function(b) {\n                    return b.name == 'bristleback_bristleback';\n                });\n                if (v == 'back') {\n                    var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'back_damage_reduction', ability.level());\n                }\n                else {\n                    var total = abilityModel.getAbilityAttributeValue(ability.attributes, 'side_damage_reduction', ability.level());\n                }\n                return -total;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'bristleback_warpath': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_stack',\n            label: 'BONUS DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v < 1) {\n                    return 0;\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'base_damage',ability.level())+(v-1)*a;\n                }\n            }\n        },\n        {\n            attributeName: 'move_speed_per_stack',\n            label: '%MOVEMENT:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v < 1) {\n                    return 0;\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'base_move_speed',ability.level())+(v-1)*a;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'centaur_return': [\n        {\n            label: 'Strength',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'strength_pct',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'return_damage',ability.level()) + v*a/100;\n            }\n        }\n    ],\n    'centaur_stampede': [\n        {\n            label: 'Strength',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'strength_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'clinkz_death_pact': [\n        {\n            label: 'Consumed Unit HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_gain_pct',\n            label: 'BASE DAMAGE GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'baseDamage'\n        },\n        {\n            attributeName: 'health_gain_pct',\n            label: 'HEALTH GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusHealth'\n        }\n    ],\n    'crystal_maiden_frostbite': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'dark_seer_ion_shell': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'dazzle_shadow_wave': [\n        {\n            label: 'Targets',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'dazzle_weave': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'armor_per_second',\n            label: 'ARMOR',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'armor_per_second',\n            label: 'ARMOR REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'death_prophet_exorcism': [\n        {\n            label: 'Damage Dealt',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percent',\n            label: 'Total Armor',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ],\n    'disruptor_static_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damagevalue = 0.25 * (130 + 40 * ability.level()) * (1/20),\n                mult = (v*4)*((v*4)+1)/2;\n                return damagevalue * mult;\n            }\n        }\n    ],\n    'doom_bringer_scorched_earth': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'HP REGEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'doom_bringer_doom': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    return v*abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_scepter',ability.level());\n                }\n                else {\n                    return v*a;\n                }\n            }\n        }\n    ],\n    'dragon_knight_elder_dragon_form': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_attack_range',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackrange'\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedFlat'\n        }\n    ],\n    'drow_ranger_trueshot': [\n        {\n            label: 'Drow\\'s Agility',\n            controlType: 'input',\n            display: 'buff'\n        },\n        {\n            attributeName: 'trueshot_ranged_damage',\n            label: 'DAMAGE BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'buff',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamagePrecisionAura'\n        }\n    ],\n    'earth_spirit_rolling_boulder': [\n        {\n            label: 'Using Stone',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'move_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return -a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'earthshaker_enchant_totem': [\n        {\n            label: 'Activated',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'totem_damage_percentage',\n            label: 'DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'baseDamageMultiplier'\n        }\n    ],\n    'earthshaker_echo_slam': [\n        {\n            label: 'Enemies in Range',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'echo_slam_echo_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'elder_titan_ancestral_spirit': [\n        {\n            label: 'HEROES PASSED THROUGH',\n            controlType: 'input'\n        },\n        {\n            label: 'CREEPS PASSED THROUGH',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_creeps',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_heroes',ability.level()) + v[1]*a;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'move_pct_creeps',\n            label: '%BONUS SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*abilityModel.getAbilityAttributeValue(ability.attributes, 'move_pct_heroes',ability.level()) + v[1]*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'elder_titan_earth_splitter': [\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        },\n        {\n            attributeName: 'slow_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'enchantress_natures_attendants': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal',\n            label: 'HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'wisp_count',ability.level())*v*a;\n            }\n        }\n    ],\n    'enigma_malefice': [\n        {\n            label: 'Hits',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'stun_duration',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'enigma_midnight_pulse': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_percent',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'enigma_black_hole': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'far_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'near_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'faceless_void_time_lock': [\n        {\n            label: 'In Chronosphere',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: '%MOVESPEED AS DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a*2;\n                }\n                else {\n                    return a;\n                }\n            },\n            returnProperty: 'bashBonusDamage'\n        },\n        {\n            attributeName: 'duration',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            attributeName: 'chance_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bash'\n        }\n    ],\n    'gyrocopter_rocket_barrage': [\n        {\n            label: 'Rockets',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'rockets_per_second',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n/*        'gyrocopter_homing_missile': [\n        {\n            label: 'Distance Traveled',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'gyrocopter_flak_cannon': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],*/\n    'huskar_burning_spear': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_cost',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'huskar_berserkers_blood': [\n        {\n            label: '%HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hp_threshold_max',\n            label: 'Health at given %HP:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return parent.health()*v/100;\n            }\n        },\n        {\n            attributeName: 'hp_threshold_max',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            }\n        },\n        {\n            attributeName: 'maximum_resistance',\n            label: 'MAGIC RESISTANCE BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var v = Math.min(v, 100);\n                v = Math.max(v, 10);\n                var hp_threshold_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'hp_threshold_max',0);\n                var d = 100 - hp_threshold_max;\n                var c = (v - hp_threshold_max) / d;\n                c = 1 - c;\n                return c*a;\n            },\n            returnProperty: 'magicResist'\n        },\n        {\n            attributeName: 'maximum_attack_speed',\n            label: 'ATTACK SPEED BONUS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var v = Math.min(v, 100);\n                v = Math.max(v, 10);\n                var hp_threshold_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'hp_threshold_max',0);\n                var d = 100 - hp_threshold_max;\n                var c = (v - hp_threshold_max) / d;\n                c = 1 - c;\n                return c*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'huskar_life_break': [\n        {\n            label: 'Enemy Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'Huskar Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_cost_percent',\n            label: 'DAMAGE TAKEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movespeed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'invoker_quas': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_strength',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusStrength'\n        },*/\n        {\n            attributeName: 'health_regen_per_instance',\n            label: 'HP REGEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'invoker_wex': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_agility',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusAgility'\n        },*/\n        {\n            attributeName: 'move_speed_per_instance',\n            label: '%MOVE SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'attack_speed_per_instance',\n            label: '%ATTACK SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'invoker_exort': [\n        {\n            label: 'Instances',\n            controlType: 'input'\n        },\n        /*{\n            attributeName: 'bonus_intelligence',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusInt'\n        },*/\n        {\n            attributeName: 'bonus_damage_per_instance',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'invoker_ghost_walk': [\n        {\n            label: 'Quas Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'enemy_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'enemy_slow',v);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            label: 'Wex Level',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            attributeName: 'self_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            display: 'ability',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'self_slow',v);\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'invoker_alacrity': [\n        {\n            label: 'Wex Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'bonus_attack_speed',v);\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            label: 'Exort Level',\n            controlType: 'input',\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'bonus_damage',v);\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'invoker_ice_wall': [\n        {\n            label: 'Quas Level',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow',v);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            label: 'Exort Level',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            label: 'Duration',\n            controlType: 'input',\n            display: 'ability'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'ability',\n            controls: [1,2],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v[0] == 0) {\n                    return 0;\n                }\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_per_second',v[0])*v[1];\n            }\n        }\n    ],\n    'jakiro_dual_breath': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*2 + \n                abilityModel.getAbilityAttributeValue(ability.attributes, 'burn_damage',ability.level())*v;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'slow_attack_speed_pct',\n            label: '%ATTACK SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'jakiro_liquid_fire': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_attack_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'jakiro_macropyre': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'juggernaut_blade_fury': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'juggernaut_healing_ward': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'healing_ward_heal_amount',\n            label: 'HEAL OVER TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'juggernaut_omni_slash': [\n        {\n            label: 'Jumps',\n            controlType: 'input'\n        },\n        {\n            label: 'MIN DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'omni_slash_damage',1)*v;\n            }\n        },\n        {\n            label: 'MAX DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'omni_slash_damage',2)*v;\n            }\n        }\n    ],\n    'keeper_of_the_light_illuminate': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'keeper_of_the_light_mana_leak': [\n        {\n            label: 'Distance Moved',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_leak_pct',\n            label: 'MANA LEAKED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]/100*v[1]*a/100;\n            }\n        }\n    ],\n    'legion_commander_duel': [\n        {\n            label: 'Duel Wins',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'reward_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'leshrac_pulse_nova': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'lich_chain_frost': [\n        {\n            label: 'Bounce Hits',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'slow_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'life_stealer_feast': [\n        {\n            label: 'Enemy Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hp_leech_percent',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'life_stealer_open_wounds': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percent',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'lifesteal'\n        },\n        {\n            attributeName: 'slow_steps',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow_steps',v+1);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'lina_fiery_soul': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'fiery_soul_move_speed_bonus',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'fiery_soul_attack_speed_bonus',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'lion_mana_drain': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA DRAINED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'luna_moon_glaive': [\n        {\n            label: 'Damage',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_reduction_percent',\n            label: 'BOUNCE DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var result = [];\n                for (var i = 1; i < 6; i++) {\n                    result.push((v*Math.pow(a/100,i)).toFixed(2))\n                }\n                return result.join('<br>');\n            }\n        }\n    ],\n    'luna_eclipse': [\n        {\n            label: 'Beam Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'beams',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var lucentBeamAbility = abilityModel.abilities().find(function(b) {\n                    return b.name == 'luna_lucent_beam';\n                });\n                if (lucentBeamAbility.level() == 0) return 0;\n                var damage = abilityModel.getAbilityPropertyValue(lucentBeamAbility, 'damage');\n                return v*damage;\n            }\n        }\n    ],\n    'medusa_mystic_snake': [\n        {\n            label: 'Jump Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Damage Per Jump:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            display: 'none',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var snake_jumps = abilityModel.getAbilityAttributeValue(ability.attributes, 'snake_jumps',ability.level());\n                var snake_scale = abilityModel.getAbilityAttributeValue(ability.attributes, 'snake_scale',0);\n                var damage = [];\n                for (var i = 0; i < snake_jumps; i++) {\n                    damage.push(a + a * i * snake_scale/100);\n                }\n                return damage;\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Damage Per Jump:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].join(' / ');\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].slice(0, v[0]).reduce(function (memo, o) { return memo + o }, 0);\n            }\n        },\n        {\n            attributeName: 'snake_damage',\n            label: 'Max Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[1].reduce(function (memo, o) { return memo + o }, 0);\n            }\n        }\n    ],\n    'medusa_mana_shield': [\n        {\n            label: 'Damage',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_mana',\n            label: 'MANA USED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return (v/a).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'absorption_tooltip',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'meepo_poof': [\n        {\n            label: 'Meepo Count',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'meepo_geostrike': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            attributeName: 'slow',\n            label: '%SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            noLevel: true,\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'slow',ability.level())*v;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'mirana_arrow': [\n        {\n            label: 'Arrow Travel Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'arrow_max_stun',\n            label: 'STUN DURATION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var arrow_min_stun = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_min_stun',0);\n                var arrow_max_stunrange = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_max_stunrange',0);\n                var scale = Math.min(v, arrow_max_stunrange) / arrow_max_stunrange;\n                return Math.max(arrow_min_stun, Math.floor(a * scale / 0.1) * 0.1);\n            }\n        },\n        {\n            attributeName: 'arrow_bonus_damage',\n            label: 'TOTAL DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ability = ability;\n                var damage = ko.utils.unwrapObservable(ability.damage)[ability.level()-1];\n                var arrow_max_stunrange = abilityModel.getAbilityAttributeValue(ability.attributes, 'arrow_max_stunrange',0);\n                var scale = Math.min(v, arrow_max_stunrange) / arrow_max_stunrange;\n                var bonus_damage = Math.floor(a * scale / 2.8) * 2.8;\n                return damage + ' + ' + bonus_damage + ' = ' + (damage + bonus_damage);\n            }\n        }\n    ],\n    'morphling_morph_agi': [\n        {\n            label: 'Shifts',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'AGI SHIFT GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'STR SHIFT LOSS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'bonus_attributes',\n            label: 'SHIFT TIME:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusAgility2'\n        },\n        {\n            attributeName: 'morph_cooldown',\n            label: 'SHIFT TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost',\n            label: 'SHIFT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a*abilityModel.getAbilityAttributeValue(ability.attributes, 'morph_cooldown',ability.level());\n            }\n        }\n    ],\n    'morphling_morph_str': [\n        {\n            label: 'Shifts',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'STR SHIFT GAIN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'points_per_tick',\n            label: 'AGI SHIFT LOSS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'bonus_attributes',\n            label: 'SHIFT TIME:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusStrength2'\n        },\n        {\n            attributeName: 'morph_cooldown',\n            label: 'SHIFT TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_cost',\n            label: 'SHIFT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a*abilityModel.getAbilityAttributeValue(ability.attributes, 'morph_cooldown',ability.level());\n            }\n        }\n    ],\n    'furion_wrath_of_nature': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'necrolyte_heartstopper_aura': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Enemy Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'aura_damage',\n            label: 'HEALTH LOST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        }\n    ],\n    'necrolyte_sadist': [\n        {\n            label: 'Unit Kills',\n            controlType: 'input'\n        },\n        {\n            label: 'Hero Kills',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var hero_multiplier = abilityModel.getAbilityAttributeValue(ability.attributes, 'hero_multiplier',0)\n                return (v[0]+v[1]*hero_multiplier)*a;\n            },\n            returnProperty: 'healthregen'\n        },\n        {\n            attributeName: 'mana_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var hero_multiplier = abilityModel.getAbilityAttributeValue(ability.attributes, 'hero_multiplier',0)\n                return (v[0]+v[1]*hero_multiplier)*a;\n            },\n            returnProperty: 'manaregen'\n        }\n    ],\n    'night_stalker_crippling_fear': [\n        {\n            label: 'Is Night',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'miss_rate_night',\n            label: '%CHANCE TO MISS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'miss_rate_night',ability.level());\n                }\n                else {\n                    return abilityModel.getAbilityAttributeValue(ability.attributes, 'miss_rate_day',ability.level());\n                }\n            },\n            returnProperty: 'missChance'\n        }\n    ],    \n    'night_stalker_hunter_in_the_night': [\n        {\n            label: 'Is Night',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_attack_speed_night',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            attributeName: 'bonus_movement_speed_pct_night',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],    \n    'obsidian_destroyer_arcane_orb': [\n        {\n            label: 'Current Mana',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_pool_damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            },\n            returnProperty: 'bonusDamageOrb'\n        }\n    ],\n    'ogre_magi_ignite': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'burn_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'pudge_rot': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            attributeName: 'rot_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'pudge_flesh_heap': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'flesh_heap_strength_buff_amount',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusStrength'\n        },\n        {\n            attributeName: 'flesh_heap_magic_resist',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'pudge_dismember': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'dismember_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'pugna_nether_ward': [\n        {\n            label: 'Enemy Mana Spent',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'mana_multiplier',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'mana_regen',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'manaregenreduction'\n        }\n    ],\n    'pugna_life_drain': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'health_drain',\n            label: 'HEALTH DRAINED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'queenofpain_shadow_strike': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'strike_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration_damage = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_damage',ability.level());\n                var ticks = Math.floor(v/3);\n                return a + duration_damage * ticks;\n            }\n        }\n    ],\n    'razor_plasma_field': [\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'radius',\n            label: 'MIN DISTANCE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return 200;\n            }\n        },\n        {\n            attributeName: 'radius',\n            label: 'MAX DISTANCE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return 200 + a;\n            }\n        },\n        {\n            attributeName: 'radius',\n            label: 'Instance Damage',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_radius = a + 200;\n                var scale = (Math.min(Math.max(v, 200), max_radius) - 200) / (max_radius - 200);\n                var damage_min = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_min',ability.level());\n                var damage_max = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_max',ability.level());\n                return damage_min + (damage_max - damage_min) * scale;\n            }\n        }\n    ],\n    'razor_static_link': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_length',\n            label: 'Damage Drained:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var tick_duration = Math.floor(v * 4) + 1;\n                var ticks = Math.min(a * 4 + 1, tick_duration);\n                var drain_rate = abilityModel.getAbilityAttributeValue(ability.attributes, 'drain_rate',ability.level());\n                return ticks * drain_rate/4;\n            },\n            returnProperty: 'bonusDamage'\n        },\n        {\n            attributeName: 'drain_length',\n            label: 'Enemy Damage Lost:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            display: 'hidden',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var tick_duration = Math.floor(v * 4) + 1;\n                var ticks = Math.min(a * 4 + 1, tick_duration);\n                var drain_rate = abilityModel.getAbilityAttributeValue(ability.attributes, 'drain_rate',ability.level());\n                return ticks * drain_rate/4;\n            },\n            returnProperty: 'bonusDamageReduction'\n        }\n    ],\n    'razor_eye_of_the_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'rubick_fade_bolt': [\n        {\n            label: 'Jumps',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a * (1 - v*abilityModel.getAbilityAttributeValue(ability.attributes, 'jump_damage_reduction_pct',ability.level())/100);\n            }\n        },\n        {\n            attributeName: 'hero_attack_damage_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'bonusDamageReduction'\n        }\n    ],\n    'sandking_sand_storm': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'sandking_epicenter': [\n        {\n            label: 'Pulses',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'epicenter_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'epicenter_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'epicenter_slow_as',\n            label: '%ATTACK SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'shadow_demon_shadow_poison': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'stack_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var stackmult = [1,2,4,8];\n                if (v > 4) {\n                    return a * stackmult[3] + 50 * (v - 4);\n                }\n                else if (v <= 0) {\n                    return 0\n                }\n                else {\n                    return a * stackmult[v-1]\n                }\n            }\n        }\n    ],\n    'nevermore_necromastery': [\n        {\n            label: 'Souls',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'necromastery_damage_per_soul',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'nevermore_requiem': [\n        {\n            label: 'Line Hit Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'requiem_reduction_damage',\n            label: 'Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        },\n        {\n            label: 'Return Line Hit Count (Scepter)',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'requiem_damage_pct_scepter',\n            label: 'Damage/Heal:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v*a/100;\n            }\n        },\n        {\n            attributeName: 'requiem_damage_pct_scepter',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return damage*v[0] + damage*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'requiem_reduction_damage',\n            label: '%DAMAGE REDUCTION:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'baseDamageReductionPct'\n        },\n        {\n            attributeName: 'requiem_reduction_ms',\n            label: '%DAMAGE REDUCTION:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'shadow_shaman_shackles': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'silencer_curse_of_the_silent': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return Math.floor(v)*a;\n            }\n        },\n        {\n            attributeName: 'movespeed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n/*        'silencer_glaives_of_wisdom': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],*/\n    'skywrath_mage_mystic_flare': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'slark_essence_shift': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'agi_gain',\n            label: 'Total Damage',\n            controlType: 'text',\n            display: 'ability',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'bonusAgility'\n        },\n        {\n            attributeName: 'stat_loss',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'bonusAllStatsReduction'\n        }\n    ],\n    'slark_shadow_dance': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_regen_pct',\n            label: 'TOTAL HEALTH REGENERATED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*parent.health()*a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_regen_pct',\n            label: 'HEALTH GAINED PER SECOND:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return parent.health()*a/100;\n            },\n            returnProperty: 'healthregen'\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: '%MOVE SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPct'\n        }\n    ],\n    'sniper_shrapnel': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'shrapnel_damage',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'slow_movement_speed',\n            label: 'Enemy Movement Speed Slow',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'spectre_desolate': [\n        {\n            label: 'Enemy Alone',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'spectre_dispersion': [\n        {\n            label: 'Damage Taken',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_reflection_pct',\n            label: 'DAMAGE REFLECTED:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        },\n        {\n            attributeName: 'damage_reflection_pct',\n            label: 'DAMAGE REFLECTED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ],\n    'storm_spirit_ball_lightning': [\n        {\n            label: 'MAX MANA',\n            controlType: 'input'\n        },\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')/100*v[1];\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'FLAT MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var distance_intervals = Math.floor(v[1]/100);\n                var travel_cost_base = abilityModel.getAbilityAttributeValue(ability.attributes, 'ball_lightning_travel_cost_base',0);\n                return a + distance_intervals * travel_cost_base;\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_percentage',\n            label: '%MAX MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var distance_intervals = Math.floor(v[1]/100);\n                var travel_cost_percent = abilityModel.getAbilityAttributeValue(ability.attributes, 'ball_lightning_travel_cost_percent',0);\n                return a + distance_intervals * travel_cost_percent;\n            }\n        },\n        {\n            attributeName: 'ball_lightning_initial_mana_base',\n            label: 'TOTAL MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0, 1, 2, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[2] + ' + ' + (v[3]/100 * v[0]) + ' (' + v[3] + '% of max) = ' + (v[2] + v[3]/100 * v[0]);\n            }\n        }\n    ],\n    'templar_assassin_psionic_trap': [\n        {\n            label: 'Charge Time',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'movement_speed_min_tooltip',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'movement_speed_max_tooltip',0);\n                var slow_per_tick = (max_slow - a)/40;\n                return -(a + slow_per_tick * Math.min(Math.max(0, v), 4) * 10);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'shredder_reactive_armor': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_armor',\n            label: 'Total Armor Bonus',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'bonus_hp_regen',\n            label: 'Total HP Regen Bonus',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'healthregen'\n        }\n    ],\n    'shredder_chakram': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_second',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_interval',0);\n                var ticks = Math.floor(v / interval);\n                return a*interval*ticks;\n            }\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'damage_interval',0);\n                var ticks = Math.floor(v / interval);\n                return a*interval*ticks;\n            }\n        },\n        {\n            label: 'ENEMY %HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow',\n            label: 'MANA COST:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var ticks = 20 - Math.floor(Math.min(Math.max(v-1, 0), 99) / 5);\n                return -a*ticks;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'spirit_breaker_greater_bash': [\n        {\n            label: 'Bash Proc',\n            controlType: 'checkbox'\n        },\n        {\n            attributeName: 'damage',\n            label: '%MOVESPEED AS DAMAGE',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'bashBonusDamage'\n        },\n        {\n            attributeName: 'bonus_movespeed_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (v) {\n                    return a;\n                }\n                else {\n                    return 0;\n                }\n            },\n            returnProperty: 'movementSpeedPct'\n        },\n        {\n            attributeName: 'chance_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a\n            },\n            returnProperty: 'bash'\n        }\n    ],\n    'techies_land_mines': [\n        {\n            label: 'Number of Mines',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (v * a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        }\n    ],\n    'techies_suicide': [\n        {\n            attributeName: 'damage',\n            label: 'FULL DAMAGE AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'partial_damage',\n            label: 'PARTIAL DAMAGE AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var phys_reduction = parent.enemy().totalArmorPhysicalReduction(),\n                    magic_reduction = parent.enemy().totalMagicResistance();\n                return (a * (1 - phys_reduction / 100) * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'RESPAWN TIME:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return (parent.respawnTime() / 2).toFixed(0) + ' seconds';\n            }\n        }\n    ],\n    'techies_remote_mines': [\n        {\n            label: 'Number of Mines',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'damage',\n            label: 'AFTER REDUCTIONS:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var magic_reduction = parent.enemy().totalMagicResistance();\n                return (v * a * (1 - magic_reduction / 100)).toFixed(2);\n            }\n        }\n    ],\n    'tinker_march_of_the_machines': [\n        {\n            label: 'Robot Explosions',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'machines_per_sec',\n            label: 'TOTAL DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'treant_leech_seed': [\n        {\n            label: 'Pulses',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'leech_damage',\n            label: 'DAMAGE/HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'troll_warlord_fervor': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'attack_speed',\n            label: 'ATTACK SPEED:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'attackspeed'\n        }\n    ],\n    'undying_decay': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'str_steal',\n            label: 'STRENGTH STOLEN:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                if (parent.inventory.hasScepter()) {\n                    var str_steal_scepter = abilityModel.getAbilityAttributeValue(ability.attributes, 'str_steal_scepter',0);\n                    return v*str_steal_scepter;\n                }\n                else {\n                    return v*a;\n                }\n            },\n            returnProperty: 'bonusStrength'\n        },\n    ],\n    'undying_soul_rip': [\n        {\n            label: 'Units',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_unit',\n            label: 'DAMAGE/HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'undying_flesh_golem': [\n        {\n            label: 'Distance',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'max_speed_slow',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var min_speed_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'min_speed_slow', 0);\n                var radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'radius', 0);\n                var full_power_radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'full_power_radius', 0);\n                var distance = Math.min(Math.max(v, full_power_radius), radius);\n                var scale = 1 - (distance - full_power_radius) / (radius - full_power_radius);\n                return -Math.max(scale * a, min_speed_slow);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'max_damage_amp',\n            label: '%DAMAGE AMP:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var min_damage_amp = abilityModel.getAbilityAttributeValue(ability.attributes, 'min_damage_amp', 0);\n                var radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'radius', 0);\n                var full_power_radius = abilityModel.getAbilityAttributeValue(ability.attributes, 'full_power_radius', 0);\n                var distance = Math.min(Math.max(v, full_power_radius), radius);\n                var scale = 1 - (distance - full_power_radius) / (radius - full_power_radius);\n                return Math.max(scale * a, min_damage_amp);\n            },\n            returnProperty: 'damageAmplification'\n        },\n        {\n            label: 'MAX HP',\n            controlType: 'input'\n        },\n        {\n            label: 'Hero Death Count',\n            controlType: 'input'\n        },\n        {\n            label: 'Creep Death Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'death_heal',\n            label: 'DEATH HEAL (HEROES):',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [1, 2],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'death_heal_creep',\n            label: 'DEATH HEAL (CREEPS):',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [1, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]*v[1]*a/100;\n            }\n        },\n        {\n            attributeName: 'death_heal_creep',\n            label: 'TOTAL DEATH HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [4, 5],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v[0]+v[1];\n            }\n        }\n    ],\n    'ursa_fury_swipes': [\n        {\n            label: 'Stacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_per_stack',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var enrageAbility = abilityModel.abilities().find(function(b) {\n                    return b.name == 'ursa_enrage';\n                });\n                if (enrageAbility.isActive() && enrageAbility.level() > 0) {\n                    var enrage_multiplier = abilityModel.getAbilityAttributeValue(enrageAbility.attributes, 'enrage_multiplier', enrageAbility.level());\n                    return v*a*enrage_multiplier;\n                }\n                return v*a;\n            },\n            returnProperty: 'bonusDamage'\n        }\n    ],\n    'ursa_enrage': [\n        {\n            attributeName: 'damage_reduction',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'venomancer_venomous_gale': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'tick_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityAttributeValue(ability.attributes, 'strike_damage',ability.level()) + Math.floor(v/3)*a;\n            }\n        },\n        {\n            attributeName: 'movement_slow',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'venomancer_poison_sting': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'venomancer_poison_nova': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'viper_poison_attack': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'viper_corrosive_skin': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        },\n        {\n            attributeName: 'bonus_magic_resistance',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'viper_viper_strike': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_movement_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeedreduction'\n        }\n    ],\n    'visage_soul_assumption': [\n        {\n            label: 'Charges',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'soul_charge_damage',\n            label: 'Total Damage:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var soul_base_damage = abilityModel.getAbilityAttributeValue(ability.attributes, 'soul_base_damage',0);\n                var stack_limit = abilityModel.getAbilityAttributeValue(ability.attributes, 'stack_limit', ability.level());\n                stack_limit = Math.max(Math.min(v, stack_limit), 0);\n                return soul_base_damage + stack_limit*a;\n            }\n        }\n    ],\n    'visage_gravekeepers_cloak': [\n        {\n            label: 'Layers',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_armor',\n            label: 'ARMOR:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'armor'\n        },\n        {\n            attributeName: 'bonus_resist',\n            label: '%RESIST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            },\n            returnProperty: 'magicResist'\n        }\n    ],\n    'warlock_shadow_word': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'warlock_upheaval': [\n        {\n            label: 'Channel Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'slow_rate_duration',\n            label: '%MOVE SLOW:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var max_slow = abilityModel.getAbilityAttributeValue(ability.attributes, 'max_slow',0);\n                var slow_per_tick = max_slow / (a - 0.5) / 2;\n                var ticks = Math.max(Math.floor(v * 2) - 1, 0);\n                return -Math.min(ticks * slow_per_tick, max_slow);\n            },\n            returnProperty: 'movementSpeedPctReduction'\n        }\n    ],\n    'weaver_the_swarm': [\n        {\n            label: 'Attacks',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'armor_reduction',\n            label: 'DAMAGE:',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return -v*a;\n            },\n            returnProperty: 'armorReduction'\n        }\n    ],\n    'windrunner_powershot': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*v;\n            }\n        }\n    ],\n    'winter_wyvern_cold_embrace': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            label: 'Ally Max Health',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal_percentage',\n            label: 'TOTAL HEAL:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            controls: [0,1],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var base_heal = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_additive',ability.level());\n                return (base_heal + v[1] * a/100) * v[0];\n            }\n        }\n    ],\n    'wisp_spirits': [\n        {\n            label: 'Collision Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'creep_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'wisp_overcharge': [\n        {\n            label: 'Current HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_pct',\n            label: 'HP DRAINED:',\n            ignoreTooltip: true, \n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            label: 'Current MP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'drain_pct',\n            label: 'MP DRAINED:',\n            ignoreTooltip: true, \n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        },\n        {\n            attributeName: 'bonus_attack_speed',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'attackspeed'\n        },\n        {\n            attributeName: 'bonus_damage_pct',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return a;\n            },\n            returnProperty: 'damageReduction'\n        }\n    ],\n    'witch_doctor_paralyzing_cask': [\n        {\n            label: 'Hero Bounce Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var bounces = abilityModel.getAbilityAttributeValue(ability.attributes, 'bounces',ability.level());\n                return Math.min(Math.max(v, 0), bounces)*a;\n            }\n        },\n        {\n            label: 'Creep Bounce Count',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'hero_damage',\n            label: 'CREEP DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var bounces = abilityModel.getAbilityAttributeValue(ability.attributes, 'bounces',ability.level());\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return Math.min(Math.max(v, 0), bounces)*damage;\n            }\n        }\n    ],\n    'witch_doctor_voodoo_restoration': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'heal',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_interval',ability.level());\n                var heal_per_tick = a * interval;\n                var ticks = Math.max(Math.floor(v / interval) - 1, 0);\n                return heal_per_tick * ticks;\n            }\n        },\n        {\n            attributeName: 'mana_per_second',\n            label: 'MANA COST:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var interval = abilityModel.getAbilityAttributeValue(ability.attributes, 'heal_interval',ability.level());\n                var mana_per_tick = a * interval;\n                var ticks = Math.max(Math.floor(v / interval) - 1, 0);\n                return mana_per_tick * ticks;\n            }\n        }\n    ],\n    'witch_doctor_maledict': [\n        {\n            label: 'damage 0-4s',\n            controlType: 'input'\n        },\n        {\n            label: 'damage 4-8s',\n            controlType: 'input'\n        },\n        {\n            label: 'damage 8-12s',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 3s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 3*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 4s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 3],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 7s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 7*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 8s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1, 4, 5],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Dot Damage after 11s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return 11*damage;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Burst Damage at 12s:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [0, 1, 2, 4, 6, 7],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                var d = v.reduce(function (memo, o) { return memo + o }, 0);\n                return Math.max(d, 0) * a/100;\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Burst Damage:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [4, 6, 8],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v.reduce(function (memo, o) { return memo + o }, 0);\n            }\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'Total Maledict Damage:',\n            ignoreTooltip: true,\n            controlType: 'method',\n            controls: [9],\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_tooltip',0);\n                var damage = abilityModel.getAbilityPropertyValue(ability, 'damage');\n                return damage * duration + v[0];\n            }\n        },\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'bonus_damage',\n            label: 'DOT Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                var duration = abilityModel.getAbilityAttributeValue(ability.attributes, 'duration_tooltip',0);\n                return abilityModel.getAbilityPropertyValue(ability, 'damage')*Math.min(Math.max(v, 0), duration);\n            }\n        }\n    ],\n    'witch_doctor_death_ward': [\n        {\n            label: 'Duration',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage',\n            label: 'Total Damage',\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a;\n            }\n        }\n    ],\n    'zuus_static_field': [\n        {\n            label: 'Enemy HP',\n            controlType: 'input'\n        },\n        {\n            attributeName: 'damage_health_pct',\n            label: 'DAMAGE:',\n            ignoreTooltip: true,\n            controlType: 'text',\n            fn: function (v, a, parent, index, abilityModel, ability) {\n                return v*a/100;\n            }\n        }\n    ]\n}\n\nmodule.exports = abilityData;","'use strict';\nvar ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\n\nko.mapping = require('../lib/knockout.mapping');\nko.wrap = require('../lib/knockout.wrap');\n\nko.extenders.numeric = function(target, opts) {\n    //create a writable computed observable to intercept writes to our observable\n    var result = ko.pureComputed({\n        read: target,  //always return the original observables value\n        write: function(newValue) {\n            var current = target(),\n                roundingMultiplier = Math.pow(10, (opts === Object(opts) ? opts.precision : opts) || 0),\n                newValueAsNum = isNaN(newValue) ? (opts.defaultValue || 0) : +newValue,\n                valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;\n \n            //only write if it changed\n            if (valueToWrite !== current) {\n                target(valueToWrite);\n            } else {\n                //if the rounded value is the same, but a different value was written, force a notification for the current field\n                if (newValue !== current) {\n                    target.notifySubscribers(valueToWrite);\n                }\n            }\n        }\n    }).extend({ notify: 'always' });\n \n    //initialize with current value to make sure it is rounded appropriately\n    result(target());\n \n    //return the new computed observable\n    return result;\n};\n\nmodule.exports = ko;","var illusionData = {\n    chaos_knight_phantasm: {\n        hero: 'chaos_knight',\n        displayName: 'Chaos Knight Phantasm',\n        use_selected_hero: false,\n        max_level: 3,\n        outgoing_damage: 'outgoing_damage',\n        incoming_damage: 'incoming_damage'\n    },\n    naga_siren_mirror_image: {\n        hero: 'naga_siren',\n        displayName: 'Naga Siren Mirror Image',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'outgoing_damage',\n        incoming_damage: 'incoming_damage'\n    },\n    dark_seer_wall_of_replica: {\n        hero: 'dark_seer',\n        displayName: 'Dark Seer Wall of Replica',\n        use_selected_hero: true,\n        max_level: 3,\n        outgoing_damage: 'replica_damage_outgoing',\n        incoming_damage: 'replica_damage_incoming',\n        outgoing_damage_scepter: 'replica_damage_outgoing_scepter'\n    },\n    morphling_replicate: {\n        hero: 'morphling',\n        displayName: 'Morphling Replicate',\n        use_selected_hero: true,\n        max_level: 3,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'\n    },\n    phantom_lancer_doppelwalk: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Doppelwalk',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    phantom_lancer_juxtapose: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Juxtapose',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    phantom_lancer_spirit_lance: {\n        hero: 'phantom_lancer',\n        displayName: 'Phantom Lancer Spirit Lance',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_damage_out_pct',\n        incoming_damage: 'illusion_damage_in_pct'        \n    },\n    shadow_demon_disruption: {\n        hero: 'shadow_demon',\n        displayName: 'Shadow Demon Disruption',\n        use_selected_hero: true,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage',\n        incoming_damage: 'illusion_incoming_damage'        \n    },\n    spectre_haunt: {\n        hero: 'spectre',\n        displayName: 'Spectre Haunt',\n        use_selected_hero: false,\n        max_level: 3,\n        outgoing_damage: 'illusion_damage_outgoing',\n        incoming_damage: 'illusion_damage_incoming'        \n    },\n    terrorblade_conjure_image: {\n        hero: 'terrorblade',\n        displayName: 'Terrorblade Conjure Image',\n        use_selected_hero: false,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage',\n        incoming_damage: 'illusion_incoming_damage'        \n    },\n    terrorblade_reflection: {\n        hero: 'terrorblade',\n        displayName: 'Terrorblade Reflection',\n        use_selected_hero: true,\n        max_level: 4,\n        outgoing_damage: 'illusion_outgoing_damage'     \n    },\n    item_manta: {\n        hero: '',\n        is_item: true,\n        displayName: 'Manta Style Illusion',\n        use_selected_hero: true,\n        max_level: 1,\n        outgoing_damage_melee: 'images_do_damage_percent_melee',\n        incoming_damage_melee: 'images_take_damage_percent_melee',\n        outgoing_damage_ranged: 'images_do_damage_percent_ranged',\n        incoming_damage_ranged: 'images_take_damage_percent_ranged'\n    }\n}\n\nmodule.exports = illusionData;","var ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\nvar stackableItems = require(\"./stackableItems\");\nvar levelItems = require(\"./levelItems\");\nvar itemsWithActive = require(\"./itemsWithActive\");\n\nvar BasicInventoryViewModel = function (h) {\n    var self = this;\n    self.items = ko.observableArray([]);\n    self.activeItems = ko.observableArray([]);\n    self.addItem = function (data, event) {\n        if (data.selectedItem() != undefined) {\n            var new_item = {\n                item: data.selectedItem().split('|')[0],\n                state: ko.observable(0),\n                size: data.itemInputValue(),\n                enabled: ko.observable(true)\n            }\n            switch (new_item.item) {\n                case 'dagon':\n                    new_item.size = Math.min(new_item.size, 5);\n                break;\n                break;\n                case 'travel_boots':\n                case 'diffusal_blade':\n                    new_item.size = Math.min(new_item.size, 2);\n                break;\n                case 'necronomicon':\n                    new_item.size = Math.min(new_item.size, 3);\n                break;\n            }\n            this.items.push(new_item);\n            if (data.selectedItem() === 'ring_of_aquila' || data.selectedItem() === 'ring_of_basilius' || data.selectedItem() === 'heart') {\n                this.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    }.bind(this);\n    self.toggleItem = function (index, data, event) {\n        if (itemsWithActive.indexOf(data.item) >= 0) {\n            if (this.activeItems.indexOf(data) < 0) {\n                this.activeItems.push(data);\n            }\n            else {\n                this.activeItems.remove(data);\n            }\n            switch (data.item) {\n                case 'power_treads':\n                    if (data.state() < 2) {\n                        data.state(data.state() + 1);\n                    }\n                    else {\n                        data.state(0);\n                    }                \n                break;\n                default:\n                    if (data.state() == 0) {\n                        data.state(1);\n                    }\n                    else {\n                        data.state(0);\n                    }                \n                break;\n            }\n        }\n    }.bind(this);\n    self.removeItem = function (item) {\n        this.activeItems.remove(item);\n        this.items.remove(item);\n    }.bind(this);\n    self.toggleMuteItem = function (item) {\n        item.enabled(!item.enabled());\n    }.bind(this);\n    self.removeAll = function () {\n        this.activeItems.removeAll();\n        this.items.removeAll();\n    }.bind(this);\n}\nBasicInventoryViewModel.prototype.getItemImage = function (data) {\n    var state = ko.utils.unwrapObservable(data.state);\n    switch (data.item) {\n        case 'power_treads':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '_str.png';\n            }\n            else if (state == 1) {\n                return '/media/images/items/' + data.item + '_int.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_agi.png';\n            }\n        break;\n        case 'tranquil_boots':\n        case 'ring_of_basilius':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n        break;\n        case 'armlet':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n        break;\n        case 'ring_of_aquila':\n            if (state == 0) {\n                return '/media/images/items/' + data.item + '_active.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '.png';\n            }\n        break;\n        case 'dagon':\n        case 'diffusal_blade':\n        case 'travel_boots':\n        case 'necronomicon':\n            if (data.size > 1) {\n                return '/media/images/items/' + data.item + '_' + data.size + '.png';\n            }\n            else {\n                return '/media/images/items/' + data.item + '.png';\n            }\n        break;\n        default:\n            return '/media/images/items/' + data.item + '.png';            \n        break;\n    }\n};\nBasicInventoryViewModel.prototype.getItemSizeLabel = function (data) {\n    if (stackableItems.indexOf(data.item) != -1) {\n        return '<span style=\"font-size:10px\">Qty: </span>' + data.size;\n    }\n    else if (levelItems.indexOf(data.item) != -1) {\n        return '<span style=\"font-size:10px\">Lvl: </span>' + data.size;\n    }\n    else if (data.item == 'bloodstone') {\n        return '<span style=\"font-size:10px\">Charges: </span>' + data.size;\n    }\n    else {\n        return '';\n    }\n};\nBasicInventoryViewModel.prototype.getActiveBorder = function (data) {\n    switch (data.item) {\n        case 'power_treads':\n        case 'tranquil_boots':\n        case 'ring_of_basilius':\n        case 'ring_of_aquila':\n        case 'armlet':\n            return 0;\n        break;\n        default:\n            return ko.utils.unwrapObservable(data.state);    \n        break;\n    }\n}\nBasicInventoryViewModel.prototype.getItemAttributeValue = function (attributes, attributeName, level) {\n    for (var i = 0; i < attributes.length; i++) {\n        if (attributes[i].name == attributeName) {\n            if (level == 0) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else if (level > attributes[i].value.length) {\n                return parseFloat(attributes[i].value[0]);\n            }\n            else {\n                return parseFloat(attributes[i].value[level - 1]);\n            }\n        }\n    }\n}\n\nmodule.exports = BasicInventoryViewModel;","'use strict';\nvar ko = require('../herocalc_knockout');\n\nvar stackableItems = require(\"./stackableItems\");\nvar levelItems = require(\"./levelItems\");\nvar BasicInventoryViewModel = require(\"./BasicInventoryViewModel\");\nvar itemOptionsArray = require(\"./itemOptionsArray\");\nvar itemBuffOptions = require(\"./itemBuffOptions\");\nvar itemDebuffOptions = require(\"./itemDebuffOptions\");\n\nvar InventoryViewModel = function (itemData, h) {\n    var self = this;\n    BasicInventoryViewModel.call(this, h);\n    self.hero = h;\n    self.hasInventory = ko.observable(true);\n    self.items = ko.observableArray([]);\n    self.activeItems = ko.observableArray([]);\n    self.hasScepter = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (item === 'ultimate_scepter' && self.items()[i].enabled()) {\n                return true;\n            }\n            \n        }\n        return false;\n    }, this);\n    self.isEthereal = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if ((item === 'ghost' || item === 'ethereal_blade') && self.items()[i].enabled() && isActive) {\n                return true;\n            }\n        }\n        return false;\n    }, this);\n    self.isSheeped = ko.computed(function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (item === 'sheepstick' && self.items()[i].enabled() && isActive) {\n                return true;\n            }\n        }\n        return false;\n    }, this);\n    self.totalCost = ko.computed(function () {\n        var c = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            if (stackableItems.indexOf(item) != -1) {\n                c += itemData['item_' + item].itemcost * self.items()[i].size;\n            }\n            else if (levelItems.indexOf(item) != -1) {\n                switch(item) {\n                    case 'travel_boots':\n                    case 'diffusal_blade':\n                    case 'necronomicon':\n                    case 'dagon':\n                        c += itemData['item_' + item].itemcost + (self.items()[i].size - 1) * itemData['item_recipe_' + item].itemcost;\n                    break;\n                    default:\n                        c += itemData['item_' + item].itemcost;\n                    break;\n                }\n            }\n            else {\n                c += itemData['item_' + item].itemcost;\n            }\n            \n        }\n        return c;\n    }, this);\n    self.addItemBuff = function (data, event) {\n        if (self.hasInventory() && self.selectedItemBuff() != undefined) {\n            var new_item = {\n                item: self.selectedItemBuff(),\n                state: ko.observable(0),\n                size: 1,\n                enabled: ko.observable(true)\n            }\n            self.items.push(new_item);\n            if (self.selectedItemBuff() === 'ring_of_aquila' || self.selectedItemBuff() === 'ring_of_basilius') {\n                self.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    };\n    self.addItemDebuff = function (data, event) {\n        if (self.hasInventory() && self.selectedItemDebuff() != undefined) {\n            var new_item = {\n                item: self.selectedItemDebuff().split('|')[0],\n                state: ko.observable(0),\n                size: 1,\n                enabled: ko.observable(true)\n            }\n            if (self.selectedItemDebuff().split('|').length == 2) {\n                new_item.debuff = self.selectedItemDebuff().split('|')[1]\n            }\n            self.items.push(new_item);\n            if (self.selectedItemDebuff() === 'ring_of_aquila' || self.selectedItemDebuff() === 'ring_of_basilius') {\n                self.toggleItem(undefined, new_item, undefined);\n            }\n        }\n    };\n    \n    self.getAttributes = function (attributetype) {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            var size = self.items()[i].size;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_all_stats':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'bonus_stats':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n                switch(attributetype) {\n                    case 'agi':\n                        if (attribute.name == 'bonus_agility') {\n                            if (item == 'diffusal_blade') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 2) {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_agi') {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                    case 'int':\n                        if (attribute.name == 'bonus_intellect') {\n                            if (item == 'necronomicon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else if (item == 'diffusal_blade') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else if (item == 'dagon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_intelligence') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_int') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 1) {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                    case 'str':\n                        if (attribute.name == 'bonus_strength') {\n                            if (item == 'necronomicon') {\n                                totalAttribute += parseInt(attribute.value[size-1]);\n                            }\n                            else {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        if (attribute.name == 'bonus_stat' && self.items()[i].state() == 0) {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'bonus_str') {totalAttribute += parseInt(attribute.value[0]);};\n                        if (attribute.name == 'unholy_bonus_strength' && isActive) {totalAttribute += parseInt(attribute.value[0]);};\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getBash = function (attacktype) {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bash_chance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'bash_chance_melee':\n                        if (attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); };\n                    break;\n                    case 'bash_chance_ranged':\n                        if (attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK') { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getCritChance = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'crit_chance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getCritSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'lesser_crit':\n                case 'greater_crit':\n                case 'bloodthorn':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'crit_chance', 0) / 100,\n                            'multiplier': self.getItemAttributeValue(itemData['item_' + item].attributes, 'crit_multiplier', 0) / 100,\n                            'count': 1,\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n            if (item === 'bloodthorn' && isActive) {\n                if (sources['soul_rend'] == undefined) {\n                    sources['soul_rend'] = {\n                        'chance': 1,\n                        'multiplier': self.getItemAttributeValue(itemData['item_' + item].attributes, 'target_crit_multiplier', 0) / 100,\n                        'count': 1,\n                        'displayname': 'Soul Rend'\n                    }\n                }\n                else {\n                    sources['soul_rend'].count += 1;\n                }\n            }\n        }\n        return sources;\n    };\n\n    self.getCleaveSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'bfury':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'radius': self.getItemAttributeValue(itemData['item_' + item].attributes, 'cleave_radius', 0),\n                            'magnitude': self.getItemAttributeValue(itemData['item_' + item].attributes, 'cleave_damage_percent', 0) / 100,\n                            'count': 1,\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getBashSource = function (attacktype) {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'javelin':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance_damage', 1),\n                            'damageType': 'magic',\n                            'count': 1,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance', 1) / 100,\n                            'displayname': itemData['item_' + item].displayname + ' Pierce'\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n                case 'monkey_king_bar':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'item': item,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_chance', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_damage', 0),\n                            'duration': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_stun', 0),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': 'Mini-Bash' //itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n                case 'abyssal_blade':\n                case 'basher':\n                    if (!sources.hasOwnProperty('bash')) {\n                        sources['bash'] = {\n                            'item': item,\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, (attacktype == 'DOTA_UNIT_CAP_MELEE_ATTACK') ?'bash_chance_melee' : 'bash_chance_ranged', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bonus_chance_damage', 0),\n                            'duration': self.getItemAttributeValue(itemData['item_' + item].attributes, 'bash_duration', 0),\n                            'count': 1,\n                            'damageType': 'physical',\n                            'displayname': 'Bash' //itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        //sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getOrbProcSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'maelstrom':\n                case 'mjollnir':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': self.getItemAttributeValue(itemData['item_' + item].attributes, 'chain_chance', 0) / 100,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'chain_damage', 0),\n                            'count': 1,\n                            'damageType': 'magic',\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n\n    self.getOrbSource = function () {\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            switch (item) {\n                case 'diffusal_blade':\n                    if (sources[item] == undefined) {\n                        sources[item] = {\n                            'chance': 1,\n                            'damage': self.getItemAttributeValue(itemData['item_' + item].attributes, 'feedback_mana_burn', self.items()[i].size),\n                            'count': 1,\n                            'damageType': 'physical',\n                            'displayname': itemData['item_' + item].displayname\n                        }\n                    }\n                    else {\n                        sources[item].count += 1;\n                    }\n                break;\n            }\n\n        }\n        return sources;\n    };\n    \n    self.getHealth = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_health':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getHealthRegen = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'health_regen':\n                    case 'bonus_regen':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'bonus_health_regen':\n                        if (item == 'tranquil_boots' && !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                        else if (item != 'tranquil_boots') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'hp_regen':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    case 'health_regen_rate':\n                        if (item == 'heart' && isActive) {\n                            totalAttribute += (parseInt(attribute.value[0]) / 100) * self.hero.health();\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getHealthRegenAura = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(item + attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'aura_health_regen':\n                    case 'hp_regen_aura':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(item + attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getMana = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_mana':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getManaRegen = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'aura_mana_regen':\n                    case 'mana_regen_aura':\n                        totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                    case 'mana_regen':\n                        if (item == 'infused_raindrop') totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;    \n    };\n    self.getManaRegenPercent = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_mana_regen':\n                    case 'mana_regen':\n                    case 'bonus_mana_regen_pct':\n                        if (item != 'infused_raindrop') totalAttribute += parseFloat(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute / 100;    \n    };\n    self.getManaRegenBloodstone = function () {\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            if (!self.items()[i].enabled()) continue;\n            if (item.indexOf('bloodstone') != -1) {\n                return parseInt(self.items()[i].size);\n            }\n        }\n        return 0;\n    };\n    \n    self.getArmor = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_armor':\n                        if (!isActive || (item != 'medallion_of_courage' && item != 'solar_crest')) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                    case 'unholy_bonus_armor':\n                        if (isActive && item == 'armlet') { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.getArmorAura = function (aList) {\n        var totalAttribute = 0,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // buckler\n                    case 'bonus_aoe_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                    // assault\n                    case 'aura_positive_armor':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                    // ring_of_aquila,ring_of_basilius\n                    case 'aura_bonus_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                    // vladmir\n                    case 'armor_aura':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                    // mekansm\n                    case 'heal_bonus_armor':\n                        if (isActive) {\n                            attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                        }\n                    break;\n                }\n            }\n        }\n        // remove buckler if there is a mekansm\n        if (attributeList.find(function (attribute) { return attribute.name == 'heal_bonus_armor'; })) {\n            attributeList = attributeList.filter(function (attribute) {\n                return attribute.name !== 'bonus_aoe_armor';\n            });\n        }\n        // remove ring_of_aquila,ring_of_basilius if there is a vladmir\n        if (attributeList.find(function (attribute) { return attribute.name == 'armor_aura'; })) {\n            attributeList = attributeList.filter(function (attribute) {\n                return attribute.name !== 'aura_bonus_armor';\n            });\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo += attribute.value;\n        }, 0);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    self.getArmorReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [],\n            selfExcludeList = [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1 || excludeList.indexOf(item + '_' + attribute.name) > -1) continue;\n                // self exclusion check only for hero items, not buff items\n                if (self.hero && (selfExcludeList.indexOf(attribute.name) > -1 || selfExcludeList.indexOf(item + '_' + attribute.name) > -1)) continue;\n                switch(attribute.name) {\n                    case 'armor_reduction':\n                        if (isActive || (item != 'medallion_of_courage' && item != 'solar_crest')) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(item + '_' + attribute.name);\n                        }\n                    break;\n                    case 'aura_negative_armor':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                    case 'corruption_armor':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        // allow blight_stone and desolator corruption_armor stacking from different sources, but not from same source\n                        excludeList.push(item + '_' + attribute.name);\n                        selfExcludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getEvasion = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_evasion':\n                        if (!isActive || (item != 'butterfly' && item != 'solar_crest')) { totalAttribute *= (1 - parseInt(attribute.value[0]) / 100); }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getMovementSpeedFlat = function (e) {\n        var totalAttribute = 0,\n        excludeList = e || [],\n        hasBoots = false,\n        hasEuls = false,\n        hasWindLace = false,\n        hasDrums = false,\n        bootItems = ['boots','phase_boots','arcane_boots','travel_boots','power_treads','tranquil_boots','guardian_greaves'];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'bonus_movement_speed':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            if (item != 'tranquil_boots' || (item == 'tranquil_boots' && !isActive)) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasBoots = true;\n                            }\n                        }\n                        //else if (!hasEuls && item == 'cyclone') {\n                        else if (item == 'cyclone') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasEuls = true;\n                        }\n                    break;\n                    case 'broken_movement_speed':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            if (item == 'tranquil_boots' && isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasBoots = true;\n                            }\n                        }\n                    break;\n                    case 'bonus_movement':\n                        if (!hasBoots && bootItems.indexOf(item) >= 0) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasBoots = true;\n                        }\n                    break;\n                    case 'movement_speed':\n                        if (!hasWindLace && item == 'wind_lace') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasWindLace = true;\n                        }\n                    break;\n                    case 'bonus_aura_movement_speed':\n                        if (!hasDrums && item == 'ancient_janggo') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasDrums = true;\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getMovementSpeedPercent = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [],\n            hasYasha = false,\n            hasDrumsActive = false,\n            hasPhaseActive = false,\n            hasShadowBladeActive = false,\n            hasButterflyActive = false,\n            hasMoMActive = false,\n            yashaItems = ['manta','yasha','sange_and_yasha'];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'movement_speed_percent_bonus':\n                        if (!hasYasha && yashaItems.indexOf(item) >= 0) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasYasha = true;\n                        }\n                    break;\n                    case 'phase_movement_speed':\n                        if (isActive && !hasPhaseActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasPhaseActive = true;\n                        }\n                    break;\n                    case 'bonus_movement_speed_pct':\n                        if (isActive && !hasDrumsActive && item == 'ancient_janggo') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasDrumsActive = true;\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'windwalk_movement_speed':\n                        if (isActive && !hasShadowBladeActive && (item == 'invis_sword' || item == 'silver_edge')) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasShadowBladeActive = true;\n                        }\n                    break;\n                    case 'berserk_bonus_movement_speed':\n                        if (isActive && !hasMoMActive && item == 'mask_of_madness') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasMoMActive = true;\n                        }\n                    break;\n                    case 'bonus_movement_speed': //manta\n                        if (!hasYasha && item == 'manta') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasYasha = true;\n                        }\n                        else if (item == 'smoke_of_deceit' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'bonus_move_speed':\n                        if (isActive && !hasButterflyActive && item == 'butterfly') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            hasButterflyActive = true;\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute/100, excludeList: excludeList};\n    };\n    \n    self.getMovementSpeedPercentReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'movespeed':\n                        if (item == 'dust' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    case 'blast_movement_speed':\n                        if (item == 'shivas_guard' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    case 'cold_movement_speed':\n                        if (item == 'skadi') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'maim_movement_speed':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'maim') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute/100, excludeList: excludeList};\n    };\n    \n    self.getBonusDamage = function () {\n        var totalAttribute = 0;\n        var sources = {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_damage':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        if (sources[item] == undefined) {\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]),\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }                            \n                        }\n                        else {\n                            sources[item].count += 1;\n                        }\n                    break;\n                    case 'unholy_bonus_damage':\n                        if (isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            if (sources[item + '_active'] == undefined) {\n                                sources[item + '_active'] = {\n                                    'damage': parseInt(attribute.value[0]),\n                                    'damageType': 'physical',\n                                    'count':1,\n                                    'displayname': itemData['item_' + item].displayname + ' Unholy Strength'\n                                }                            \n                            }\n                            else {\n                                sources[item].count += 1;\n                            }\n                        }\n                    break;\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    };\n    self.getBonusDamagePercent = function (s) {\n        s = s || {sources:{},total:0};\n        var totalAttribute = s.total || 0;\n        var sources = s.sources || {};\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'damage_aura':\n                        if (sources[item] == undefined) {\n                            totalAttribute += parseInt(attribute.value[0]) / 100;\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]) / 100,\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }\n                        }\n                        // else {\n                            // sources[item].count += 1;\n                        // }\n                    break;\n                    case 'bottle_doubledamage':\n                        if (sources[item] == undefined) {\n                            totalAttribute += parseInt(attribute.value[0]) / 100;\n                            sources[item] = {\n                                'damage': parseInt(attribute.value[0]) / 100,\n                                'damageType': 'physical',\n                                'count':1,\n                                'displayname': itemData['item_' + item].displayname\n                            }\n                        }\n                    break;\n                }\n            }\n        }\n        return { sources: sources, total: totalAttribute };\n    };\n    self.getAttackSpeed = function (e) {\n        var totalAttribute = 0,\n            hasPowerTreads = false,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'bonus_attack_speed':\n                        if (item == 'power_treads') {\n                            if (!hasPowerTreads) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                                hasPowerTreads = true;\n                            }\n                        }\n                        else if (item == 'moon_shard') {\n                            if (!isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        else if (item == 'hurricane_pike') {\n                            if (isActive) {\n                                totalAttribute += parseInt(attribute.value[0]);\n                            }\n                        }\n                        else {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'consumed_bonus':\n                        if (item == 'moon_shard' && isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                    break;\n                    case 'bonus_speed':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                    // helm_of_the_dominator\n                    case 'attack_speed':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                    case 'unholy_bonus_attack_speed':\n                        if (isActive) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                    case 'berserk_bonus_attack_speed':\n                        if (isActive) { totalAttribute += parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getAttackSpeedAura = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(item + attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    // helm_of_the_dominator\n                    case 'attack_speed_aura':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(item + attribute.name);\n                    break;\n                    // assault_cuirass\n                    case 'aura_attack_speed':\n                        if (item != 'shivas_guard') { totalAttribute += parseInt(attribute.value[0]); };\n                        excludeList.push(item + attribute.name);\n                    break;\n                    // ancient_janggo\n                    case 'bonus_attack_speed_pct':\n                        if (isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getAttackSpeedReduction = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'aura_attack_speed':\n                        if (item == 'shivas_guard') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'cold_attack_speed':\n                        if (item == 'skadi') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'maim_attack_speed':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'maim') {\n                            totalAttribute += parseInt(attribute.value[0]);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getLifesteal = function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'lifesteal_percent':\n                        if (item == 'satanic') {\n                            if (!isActive) { return parseInt(attribute.value[0]); };\n                        }\n                        else {\n                            return parseInt(attribute.value[0]);\n                        }\n                    break;\n                    case 'unholy_lifesteal_percent':\n                        if (isActive) { return parseInt(attribute.value[0]); };\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getLifestealAura = function (e) {\n        var totalAttribute = 0,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'vampiric_aura':\n                        totalAttribute += parseInt(attribute.value[0]);\n                        excludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    self.getSpellAmp = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'spell_amp':\n                        totalAttribute += parseInt(attribute.value[0]);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    self.getCooldownReductionFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        /*for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_night_vision':\n                        if (item != 'moon_shard' || !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                }\n            }\n        }*/\n        return totalAttribute;\n    });\n    self.getCooldownReductionPercent = function (aList) {        \n        var totalAttribute = 1,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // octarine_core\n                    case 'bonus_cooldown':\n                        attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                }\n            }\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo *= (1 - attribute.value / 100);\n        }, 1);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    self.getCooldownIncreaseFlat = ko.computed(function () {\n        var totalAttribute = 0;\n        return totalAttribute;\n    });\n    self.getCooldownIncreasePercent = function () {\n        var totalAttribute = 1;\n        return totalAttribute;\n    };\n    self.getMagicResist = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_magical_armor':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'bonus_spell_resist':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                    case 'magic_resistance':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    self.getMagicResistReductionSelf = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            if (isActive) {\n                for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                    var attribute = itemData['item_' + item].attributes[j];\n                    switch(attribute.name) {\n                        case 'extra_spell_damage_percent':\n                        case 'ethereal_damage_bonus':\n                            return (1 - parseInt(attribute.value[0]) / 100);\n                        break;\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    };   \n    self.getMagicResistReduction = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            if (isActive) {\n                for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                    var attribute = itemData['item_' + item].attributes[j];\n                    switch(attribute.name) {\n                        case 'ethereal_damage_bonus':\n                            if (!self.isEthereal()) totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        case 'resist_debuff':\n                            totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        break;\n                    }\n                }\n            }\n        }\n        return totalAttribute;\n    };        \n\n    self.getVisionRangeNight = ko.computed(function () {\n        var totalAttribute = 0;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'bonus_night_vision':\n                        if (item != 'moon_shard' || !isActive) {\n                            totalAttribute += parseInt(attribute.value[0]);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    });\n    \n    self.getAttackRange = function (attacktype, aList) {\n        var totalAttribute = 0,\n            attributeList = aList || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0;j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (attributeList.find(function (a) { return attribute.name == a.name; })) continue;\n                switch(attribute.name) {\n                    // dragon_lance\n                    case 'base_attack_range':\n                        if (attacktype == 'DOTA_UNIT_CAP_RANGED_ATTACK') attributeList.push({'name':attribute.name, 'value': parseInt(attribute.value[0])});\n                    break;\n                }\n            }\n        }\n        \n        totalAttribute = attributeList.reduce(function (memo, attribute) {\n            return memo += attribute.value;\n        }, 0);\n        return {value: totalAttribute, attributes: attributeList};\n    };\n    \n    self.getMissChance = function (e) {\n        var totalAttribute = 1,\n            excludeList = e || [];\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                if (excludeList.indexOf(attribute.name) > -1) continue;\n                switch(attribute.name) {\n                    case 'miss_chance':\n                        if (item === 'solar_crest' && isActive) {\n                            totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                            excludeList.push(attribute.name);\n                        }\n                    break;\n                    case 'blind_pct':\n                        totalAttribute *= (1 - parseInt(attribute.value[0]) / 100);\n                        excludeList.push(attribute.name);\n                    break;\n                }\n            }\n        }\n        return {value: totalAttribute, excludeList: excludeList};\n    };\n    \n    self.getBaseDamageReductionPct = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'backstab_reduction':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'shadow_walk') {\n                            totalAttribute *= (1 + parseInt(attribute.value[0]) / 100);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };    \n    self.getBonusDamageReductionPct = function () {\n        var totalAttribute = 1;\n        for (var i = 0; i < self.items().length; i++) {\n            var item = self.items()[i].item;\n            var isActive = self.activeItems.indexOf(self.items()[i]) >= 0 ? true : false;\n            if (!self.items()[i].enabled()) continue;\n            for (var j = 0; j < itemData['item_' + item].attributes.length; j++) {\n                var attribute = itemData['item_' + item].attributes[j];\n                switch(attribute.name) {\n                    case 'backstab_reduction':\n                        if (self.items()[i].debuff && self.items()[i].debuff == 'shadow_walk') {\n                            totalAttribute *= (1 + parseInt(attribute.value[0]) / 100);\n                        }\n                    break;\n                }\n            }\n        }\n        return totalAttribute;\n    };\n    \n    self.itemOptions = ko.observableArray(itemOptionsArray.items);\n    \n    self.itemBuffOptions = ko.observableArray(itemBuffOptions.items);\n    self.selectedItemBuff = ko.observable('assault');\n\n    self.itemDebuffOptions = ko.observableArray(itemDebuffOptions.items);\n    self.selectedItemDebuff = ko.observable('assault');\n    \n    return self;\n};\nInventoryViewModel.prototype = Object.create(BasicInventoryViewModel.prototype);\nInventoryViewModel.prototype.constructor = InventoryViewModel;\n\nmodule.exports = InventoryViewModel;","var ko = (typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null);\n\nvar ItemInput = function (itemData, value, name, debuff) {\n    if (itemData['item_' + value].ItemAliases instanceof Array) {\n        var itemAlias = itemData['item_' + value].ItemAliases.join(' ');\n    }\n    else {\n        var itemAlias = itemData['item_' + value].ItemAliases;\n    }\n    this.value = ko.observable(value);\n    this.debuff = ko.observable(debuff);\n    if (this.debuff()) {\n        this.value = ko.observable(value + '|' + debuff.id);\n        this.name = ko.observable(name + ' (' + debuff.name + ')');\n        this.displayname = ko.observable(name + ' (' + debuff.name + ') <span style=\"display:none\">' + ';' + itemAlias + '</span>');\n    }\n    else {\n        this.value = ko.observable(value);\n        this.name = ko.observable(name);\n        this.displayname = ko.observable(name + ' <span style=\"display:none\">' + ';' + itemAlias + '</span>');\n    }\n};\n\nmodule.exports = ItemInput;","var ItemInput = require(\"./ItemInput\");\nvar itemBuffs = ['assault', 'ancient_janggo', 'headdress', 'mekansm', 'pipe', 'ring_of_aquila', 'vladmir', 'ring_of_basilius', 'buckler', 'solar_crest', 'bottle_doubledamage', 'helm_of_the_dominator'];\nvar itemBuffOptions = {};\n\nvar init = function (itemData) {\n    itemBuffOptions.items = itemBuffs.map(function(item) {\n        return new ItemInput(itemData, item, itemData['item_' + item].displayname);\n    }).sort(function (a, b) {\n        if (a.displayname() < b.displayname()) return -1;\n        if (a.displayname() > b.displayname()) return 1;\n        return 0;\n    });\n    return itemBuffOptions.items;\n}\n\nitemBuffOptions.init = init;\n\nmodule.exports = itemBuffOptions;","var ItemInput = require(\"./ItemInput\");\nvar itemDebuffs = [\n    {item: 'assault', debuff: null},\n    {item: 'shivas_guard', debuff: null},\n    {item: 'desolator', debuff: null},\n    {item: 'blight_stone', debuff: null},\n    {item: 'medallion_of_courage', debuff: null},\n    {item: 'radiance', debuff: null},\n    {item: 'sheepstick', debuff: null},\n    {item: 'veil_of_discord', debuff: null},\n    {item: 'solar_crest', debuff: null},\n    {item: 'silver_edge', debuff: {id: 'shadow_walk', name: 'Shadow Walk'}},\n    {item: 'silver_edge', debuff: {id: 'maim', name: 'Lesser Maim'}}\n]\nvar itemDebuffOptions = {};\n\nvar init = function (itemData) {\n    itemDebuffOptions.items = itemDebuffs.map(function(item) {\n        return new ItemInput(itemData, item.item, itemData['item_' + item.item].displayname, item.debuff);\n    }).sort(function (a, b) {\n        if (a.displayname() < b.displayname()) return -1;\n        if (a.displayname() > b.displayname()) return 1;\n        return 0;\n    });\n    return itemDebuffOptions.items;\n}\n\nitemDebuffOptions.init = init;\n\nmodule.exports = itemDebuffOptions;","var validItems = require(\"./validItems\");\nvar ItemInput = require(\"./ItemInput\");\n\nvar itemOptionsArray = {};\n\nvar init = function (itemData) {\n    itemOptionsArray.items = [];\n    for (var i = 0; i < validItems.length; i++) {\n        itemOptionsArray.items.push(new ItemInput(itemData, validItems[i], itemData['item_' + validItems[i]].displayname));\n    }\n    return itemOptionsArray.items;\n}\n\nitemOptionsArray.init = init;\n\nmodule.exports = itemOptionsArray;","module.exports = ['solar_crest', 'heart','smoke_of_deceit','dust','ghost','tranquil_boots','phase_boots','power_treads','buckler','medallion_of_courage','ancient_janggo','mekansm','pipe','veil_of_discord','rod_of_atos','orchid','sheepstick','armlet','invis_sword','ethereal_blade','shivas_guard','manta','mask_of_madness','diffusal_blade','mjollnir','satanic','ring_of_basilius','ring_of_aquila', 'butterfly', 'moon_shard', 'silver_edge','bloodthorn','hurricane_pike'];","module.exports = ['necronomicon','dagon','diffusal_blade','travel_boots'];","module.exports = ['clarity','flask','dust','ward_observer','ward_sentry','tango','tpscroll','smoke_of_deceit'];","module.exports = [\"abyssal_blade\",\"ultimate_scepter\",\"courier\",\"arcane_boots\",\"armlet\",\"assault\",\"boots_of_elves\",\"bfury\",\"belt_of_strength\",\"black_king_bar\",\"blade_mail\",\"blade_of_alacrity\",\"blades_of_attack\",\"blink\",\"bloodstone\",\"boots\",\"travel_boots\",\"bottle\",\"bracer\",\"broadsword\",\"buckler\",\"butterfly\",\"chainmail\",\"circlet\",\"clarity\",\"claymore\",\"cloak\",\"lesser_crit\",\"greater_crit\",\"dagon\",\"demon_edge\",\"desolator\",\"diffusal_blade\",\"rapier\",\"ancient_janggo\",\"dust\",\"eagle\",\"energy_booster\",\"ethereal_blade\",\"cyclone\",\"skadi\",\"flying_courier\",\"force_staff\",\"gauntlets\",\"gem\",\"ghost\",\"gloves\",\"hand_of_midas\",\"headdress\",\"flask\",\"heart\",\"heavens_halberd\",\"helm_of_iron_will\",\"helm_of_the_dominator\",\"hood_of_defiance\",\"hyperstone\",\"branches\",\"javelin\",\"sphere\",\"maelstrom\",\"magic_stick\",\"magic_wand\",\"manta\",\"mantle\",\"mask_of_madness\",\"medallion_of_courage\",\"mekansm\",\"mithril_hammer\",\"mjollnir\",\"monkey_king_bar\",\"lifesteal\",\"mystic_staff\",\"necronomicon\",\"null_talisman\",\"oblivion_staff\",\"ward_observer\",\"ogre_axe\",\"orb_of_venom\",\"orchid\",\"pers\",\"phase_boots\",\"pipe\",\"platemail\",\"point_booster\",\"poor_mans_shield\",\"power_treads\",\"quarterstaff\",\"quelling_blade\",\"radiance\",\"reaver\",\"refresher\",\"ring_of_aquila\",\"ring_of_basilius\",\"ring_of_health\",\"ring_of_protection\",\"ring_of_regen\",\"robe\",\"rod_of_atos\",\"relic\",\"sobi_mask\",\"sange\",\"sange_and_yasha\",\"satanic\",\"sheepstick\",\"ward_sentry\",\"shadow_amulet\",\"invis_sword\",\"shivas_guard\",\"basher\",\"slippers\",\"smoke_of_deceit\",\"soul_booster\",\"soul_ring\",\"staff_of_wizardry\",\"stout_shield\",\"talisman_of_evasion\",\"tango\",\"tpscroll\",\"tranquil_boots\",\"ultimate_orb\",\"urn_of_shadows\",\"vanguard\",\"veil_of_discord\",\"vitality_booster\",\"vladmir\",\"void_stone\",\"wraith_band\",\"yasha\",\"crimson_guard\",\"enchanted_mango\",\"lotus_orb\",\"glimmer_cape\",\"guardian_greaves\",\"moon_shard\",\"silver_edge\",\"solar_crest\",\"octarine_core\",\"aether_lens\",\"faerie_fire\",\"iron_talon\",\"dragon_lance\",\"echo_sabre\",\"infused_raindrop\",\"blight_stone\",\"wind_lace\",\"tome_of_knowledge\",\"bloodthorn\",\"hurricane_pike\"];","'use strict';\n\nvar core = {};\ncore.InventoryViewModel = require(\"./inventory/InventoryViewModel\");\ncore.AbilityModel = require(\"./AbilityModel\");\ncore.BuffViewModel = require(\"./BuffViewModel\");\ncore.HeroModel = require(\"./hero/HeroModel\");\ncore.CloneModel = require(\"./hero/CloneModel\");\ncore.UnitModel = require(\"./hero/UnitModel\");\ncore.IllusionModel = require(\"./hero/IllusionModel\");\ncore.Data = require(\"./data/main\");\ncore.Util = require(\"./util/main\");\n\ncore.init = function (HERODATA_PATH, ITEMDATA_PATH, UNITDATA_PATH, callback) {\n    core.Data.init(HERODATA_PATH, ITEMDATA_PATH, UNITDATA_PATH, function () {\n        core.HeroOptions = require(\"./hero/heroOptionsArray\").init(core.Data.heroData);\n        core.BuffOptions = require(\"./buffs/buffOptionsArray\").init(core.Data.heroData, core.Data.unitData);\n        core.DebuffOptions = require(\"./buffs/debuffOptionsArray\").init(core.Data.heroData, core.Data.unitData);\n        core.ItemOptions = require(\"./inventory/itemOptionsArray\").init(core.Data.itemData);\n        core.ItemBuffOptions = require(\"./inventory/itemBuffOptions\").init(core.Data.itemData);\n        core.ItemDebuffOptions = require(\"./inventory/itemDebuffOptions\").init(core.Data.itemData);\n        callback();\n    });\n}\n\nmodule.exports = core;","var extend = function (out) {\n    out = out || {};\n\n    for (var i = 1; i < arguments.length; i++) {\n        var obj = arguments[i];\n\n        if (!obj)\n            continue;\n\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                if (typeof obj[key] === 'object')\n                    out[key] = extend(out[key], obj[key]);\n                else\n                    out[key] = obj[key];\n            }\n        }\n    }\n\n    return out;\n};\n\nmodule.exports = extend;","var findWhere = function (arr, obj) {\n    arrLoop: for (var i = 0; i < arr.length; i++) {\n        objLoop: for (var key in obj) {\n            if (arr[i][key] != obj[key]) {\n                continue arrLoop;\n            }\n        }\n        return arr[i];\n    }\n}\n\nmodule.exports = findWhere;","\"use strict\";\n\nvar getJSON = function (url, successCallback, errorCallback) {\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n\n    request.onload = function() {\n        if (request.status >= 200 && request.status < 400) {\n            // Success!\n            var data = JSON.parse(request.responseText);\n            successCallback(data);\n        } else {\n            // We reached our target server, but it returned an error\n            errorCallback();\n        }\n    };\n\n    request.onerror = function() {\n        // There was a connection error of some sort\n        errorCallback();\n    };\n\n    request.send();\n}\n\nmodule.exports = getJSON;","var isEmpty = function (obj) {\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nmodule.exports = isEmpty;","var isString = function (myVar) {\n    return typeof myVar === 'string' || myVar instanceof String;\n}\n\nmodule.exports = isString;","'use strict';\n\nvar util = {};\nutil.extend = require(\"./extend\");\nutil.findWhere = require(\"./findWhere\");\nutil.getJSON = require(\"./getJSON\");\nutil.union = require(\"./union\");\nutil.uniqueId = require(\"./uniqueId\");\nutil.uniques = require(\"./uniques\");\n\nmodule.exports = util;","\"use strict\";\nvar uniques = require(\"./uniques\");\n\nvar union = function (a, b) {\n    var arr = a.concat(b);\n    return uniques(arr);\n}\n\nmodule.exports = union;","\"use strict\";\n\nvar idCounter = 0;\nvar uniqueId = function (prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n};\n\nmodule.exports = uniqueId;","\"use strict\";\nvar uniques = function (arr) {\n    var a = [];\n    for (var i=0, l=arr.length; i<l; i++)\n        if (a.indexOf(arr[i]) === -1 && arr[i] !== '')\n            a.push(arr[i]);\n    return a;\n}\n\nmodule.exports = uniques;","(function (factory) {\n\t// Module systems magic dance.\n\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\n\t\t// CommonJS or Node: hard-coded dependency on \"knockout\"\n\t\tfactory((typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null), exports);\n\t} else if (typeof define === \"function\" && define[\"amd\"]) {\n\t\t// AMD anonymous module with hard-coded dependency on \"knockout\"\n\t\tdefine([\"knockout\", \"exports\"], factory);\n\t} else {\n\t\t// <script> tag: use the global `ko` object, attaching a `mapping` property\n\t\tfactory(ko, ko.mapping = {});\n\t}\n}(function (ko, exports) {\n\tvar DEBUG=true;\n\tvar mappingProperty = \"__ko_mapping__\";\n\tvar realKoDependentObservable = ko.dependentObservable;\n\tvar mappingNesting = 0;\n\tvar dependentObservables;\n\tvar visitedObjects;\n\tvar recognizedRootProperties = [\"create\", \"update\", \"key\", \"arrayChanged\"];\n\tvar emptyReturn = {};\n\n\tvar _defaultOptions = {\n\t\tinclude: [\"_destroy\"],\n\t\tignore: [],\n\t\tcopy: [],\n\t\tobserve: []\n\t};\n\tvar defaultOptions = _defaultOptions;\n\n\t// Author: KennyTM @ StackOverflow\n\tfunction unionArrays (x, y) {\n\t\tvar obj = {};\n\t\tfor (var i = x.length - 1; i >= 0; -- i) obj[x[i]] = x[i];\n\t\tfor (var i = y.length - 1; i >= 0; -- i) obj[y[i]] = y[i];\n\t\tvar res = [];\n\n\t\tfor (var k in obj) {\n\t\t\tres.push(obj[k]);\n\t\t};\n\n\t\treturn res;\n\t}\n\n\tfunction extendObject(destination, source) {\n\t\tvar destType;\n\n\t\tfor (var key in source) {\n\t\t\tif (source.hasOwnProperty(key) && source[key]) {\n\t\t\t\tdestType = exports.getType(destination[key]);\n\t\t\t\tif (key && destination[key] && destType !== \"array\" && destType !== \"string\") {\n\t\t\t\t\textendObject(destination[key], source[key]);\n\t\t\t\t} else {\n\t\t\t\t\tvar bothArrays = exports.getType(destination[key]) === \"array\" && exports.getType(source[key]) === \"array\";\n\t\t\t\t\tif (bothArrays) {\n\t\t\t\t\t\tdestination[key] = unionArrays(destination[key], source[key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction merge(obj1, obj2) {\n\t\tvar merged = {};\n\t\textendObject(merged, obj1);\n\t\textendObject(merged, obj2);\n\n\t\treturn merged;\n\t}\n\n\texports.isMapped = function (viewModel) {\n\t\tvar unwrapped = ko.utils.unwrapObservable(viewModel);\n\t\treturn unwrapped && unwrapped[mappingProperty];\n\t}\n\n\texports.fromJS = function (jsObject /*, inputOptions, target*/ ) {\n\t\tif (arguments.length == 0) throw new Error(\"When calling ko.fromJS, pass the object you want to convert.\");\n\n\t\ttry {\n\t\t\tif (!mappingNesting++) {\n\t\t\t\tdependentObservables = [];\n\t\t\t\tvisitedObjects = new objectLookup();\n\t\t\t}\n\n\t\t\tvar options;\n\t\t\tvar target;\n\n\t\t\tif (arguments.length == 2) {\n\t\t\t\tif (arguments[1][mappingProperty]) {\n\t\t\t\t\ttarget = arguments[1];\n\t\t\t\t} else {\n\t\t\t\t\toptions = arguments[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (arguments.length == 3) {\n\t\t\t\toptions = arguments[1];\n\t\t\t\ttarget = arguments[2];\n\t\t\t}\n\n\t\t\tif (target) {\n\t\t\t\toptions = merge(options, target[mappingProperty]);\n\t\t\t}\n\t\t\toptions = fillOptions(options);\n\n\t\t\tvar result = updateViewModel(target, jsObject, options);\n\t\t\tif (target) {\n\t\t\t\tresult = target;\n\t\t\t}\n\n\t\t\t// Evaluate any dependent observables that were proxied.\n\t\t\t// Do this after the model's observables have been created\n\t\t\tif (!--mappingNesting) {\n\t\t\t\twhile (dependentObservables.length) {\n\t\t\t\t\tvar DO = dependentObservables.pop();\n\t\t\t\t\tif (DO) {\n\t\t\t\t\t\tDO();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Move this magic property to the underlying dependent observable\n\t\t\t\t\t\tDO.__DO[\"throttleEvaluation\"] = DO[\"throttleEvaluation\"];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Save any new mapping options in the view model, so that updateFromJS can use them later.\n\t\t\tresult[mappingProperty] = merge(result[mappingProperty], options);\n\n\t\t\treturn result;\n\t\t} catch(e) {\n\t\t\tmappingNesting = 0;\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\texports.fromJSON = function (jsonString /*, options, target*/ ) {\n\t\tvar parsed = ko.utils.parseJson(jsonString);\n\t\targuments[0] = parsed;\n\t\treturn exports.fromJS.apply(this, arguments);\n\t};\n\n\texports.updateFromJS = function (viewModel) {\n\t\tthrow new Error(\"ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!\");\n\t};\n\n\texports.updateFromJSON = function (viewModel) {\n\t\tthrow new Error(\"ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!\");\n\t};\n\n\texports.toJS = function (rootObject, options) {\n\t\tif (!defaultOptions) exports.resetDefaultOptions();\n\n\t\tif (arguments.length == 0) throw new Error(\"When calling ko.mapping.toJS, pass the object you want to convert.\");\n\t\tif (exports.getType(defaultOptions.ignore) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().ignore should be an array.\");\n\t\tif (exports.getType(defaultOptions.include) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().include should be an array.\");\n\t\tif (exports.getType(defaultOptions.copy) !== \"array\") throw new Error(\"ko.mapping.defaultOptions().copy should be an array.\");\n\n\t\t// Merge in the options used in fromJS\n\t\toptions = fillOptions(options, rootObject[mappingProperty]);\n\n\t\t// We just unwrap everything at every level in the object graph\n\t\treturn exports.visitModel(rootObject, function (x) {\n\t\t\treturn ko.utils.unwrapObservable(x)\n\t\t}, options);\n\t};\n\n\texports.toJSON = function (rootObject, options) {\n\t\tvar plainJavaScriptObject = exports.toJS(rootObject, options);\n\t\treturn ko.utils.stringifyJson(plainJavaScriptObject);\n\t};\n\n\texports.defaultOptions = function () {\n\t\tif (arguments.length > 0) {\n\t\t\tdefaultOptions = arguments[0];\n\t\t} else {\n\t\t\treturn defaultOptions;\n\t\t}\n\t};\n\n\texports.resetDefaultOptions = function () {\n\t\tdefaultOptions = {\n\t\t\tinclude: _defaultOptions.include.slice(0),\n\t\t\tignore: _defaultOptions.ignore.slice(0),\n\t\t\tcopy: _defaultOptions.copy.slice(0)\n\t\t};\n\t};\n\n\texports.getType = function(x) {\n\t\tif ((x) && (typeof (x) === \"object\")) {\n\t\t\tif (x.constructor === Date) return \"date\";\n\t\t\tif (x.constructor === Array) return \"array\";\n\t\t}\n\t\treturn typeof x;\n\t}\n\n\tfunction fillOptions(rawOptions, otherOptions) {\n\t\tvar options = merge({}, rawOptions);\n\n\t\t// Move recognized root-level properties into a root namespace\n\t\tfor (var i = recognizedRootProperties.length - 1; i >= 0; i--) {\n\t\t\tvar property = recognizedRootProperties[i];\n\t\t\t\n\t\t\t// Carry on, unless this property is present\n\t\t\tif (!options[property]) continue;\n\t\t\t\n\t\t\t// Move the property into the root namespace\n\t\t\tif (!(options[\"\"] instanceof Object)) options[\"\"] = {};\n\t\t\toptions[\"\"][property] = options[property];\n\t\t\tdelete options[property];\n\t\t}\n\n\t\tif (otherOptions) {\n\t\t\toptions.ignore = mergeArrays(otherOptions.ignore, options.ignore);\n\t\t\toptions.include = mergeArrays(otherOptions.include, options.include);\n\t\t\toptions.copy = mergeArrays(otherOptions.copy, options.copy);\n\t\t\toptions.observe = mergeArrays(otherOptions.observe, options.observe);\n\t\t}\n\t\toptions.ignore = mergeArrays(options.ignore, defaultOptions.ignore);\n\t\toptions.include = mergeArrays(options.include, defaultOptions.include);\n\t\toptions.copy = mergeArrays(options.copy, defaultOptions.copy);\n\t\toptions.observe = mergeArrays(options.observe, defaultOptions.observe);\n\n\t\toptions.mappedProperties = options.mappedProperties || {};\n\t\toptions.copiedProperties = options.copiedProperties || {};\n\t\treturn options;\n\t}\n\n\tfunction mergeArrays(a, b) {\n\t\tif (exports.getType(a) !== \"array\") {\n\t\t\tif (exports.getType(a) === \"undefined\") a = [];\n\t\t\telse a = [a];\n\t\t}\n\t\tif (exports.getType(b) !== \"array\") {\n\t\t\tif (exports.getType(b) === \"undefined\") b = [];\n\t\t\telse b = [b];\n\t\t}\n\n\t\treturn ko.utils.arrayGetDistinctValues(a.concat(b));\n\t}\n\n\t// When using a 'create' callback, we proxy the dependent observable so that it doesn't immediately evaluate on creation.\n\t// The reason is that the dependent observables in the user-specified callback may contain references to properties that have not been mapped yet.\n\tfunction withProxyDependentObservable(dependentObservables, callback) {\n\t\tvar localDO = ko.dependentObservable;\n\t\tko.dependentObservable = function (read, owner, options) {\n\t\t\toptions = options || {};\n\n\t\t\tif (read && typeof read == \"object\") { // mirrors condition in knockout implementation of DO's\n\t\t\t\toptions = read;\n\t\t\t}\n\n\t\t\tvar realDeferEvaluation = options.deferEvaluation;\n\n\t\t\tvar isRemoved = false;\n\n\t\t\t// We wrap the original dependent observable so that we can remove it from the 'dependentObservables' list we need to evaluate after mapping has\n\t\t\t// completed if the user already evaluated the DO themselves in the meantime.\n\t\t\tvar wrap = function (DO) {\n\t\t\t\t// Temporarily revert ko.dependentObservable, since it is used in ko.isWriteableObservable\n\t\t\t\tvar tmp = ko.dependentObservable;\n\t\t\t\tko.dependentObservable = realKoDependentObservable;\n\t\t\t\tvar isWriteable = ko.isWriteableObservable(DO);\n\t\t\t\tko.dependentObservable = tmp;\n\n\t\t\t\tvar wrapped = realKoDependentObservable({\n\t\t\t\t\tread: function () {\n\t\t\t\t\t\tif (!isRemoved) {\n\t\t\t\t\t\t\tko.utils.arrayRemoveItem(dependentObservables, DO);\n\t\t\t\t\t\t\tisRemoved = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn DO.apply(DO, arguments);\n\t\t\t\t\t},\n\t\t\t\t\twrite: isWriteable && function (val) {\n\t\t\t\t\t\treturn DO(val);\n\t\t\t\t\t},\n\t\t\t\t\tdeferEvaluation: true\n\t\t\t\t});\n\t\t\t\tif (DEBUG) wrapped._wrapper = true;\n\t\t\t\twrapped.__DO = DO;\n\t\t\t\treturn wrapped;\n\t\t\t};\n\t\t\t\n\t\t\toptions.deferEvaluation = true; // will either set for just options, or both read/options.\n\t\t\tvar realDependentObservable = new realKoDependentObservable(read, owner, options);\n\n\t\t\tif (!realDeferEvaluation) {\n\t\t\t\trealDependentObservable = wrap(realDependentObservable);\n\t\t\t\tdependentObservables.push(realDependentObservable);\n\t\t\t}\n\n\t\t\treturn realDependentObservable;\n\t\t}\n\t\tko.dependentObservable.fn = realKoDependentObservable.fn;\n\t\tko.computed = ko.dependentObservable;\n\t\tvar result = callback();\n\t\tko.dependentObservable = localDO;\n\t\tko.computed = ko.dependentObservable;\n\t\treturn result;\n\t}\n\n\tfunction updateViewModel(mappedRootObject, rootObject, options, parentName, parent, parentPropertyName, mappedParent) {\n\t\tvar isArray = exports.getType(ko.utils.unwrapObservable(rootObject)) === \"array\";\n\n\t\tparentPropertyName = parentPropertyName || \"\";\n\n\t\t// If this object was already mapped previously, take the options from there and merge them with our existing ones.\n\t\tif (exports.isMapped(mappedRootObject)) {\n\t\t\tvar previousMapping = ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];\n\t\t\toptions = merge(previousMapping, options);\n\t\t}\n\n\t\tvar callbackParams = {\n\t\t\tdata: rootObject,\n\t\t\tparent: mappedParent || parent\n\t\t};\n\n\t\tvar hasCreateCallback = function () {\n\t\t\treturn options[parentName] && options[parentName].create instanceof Function;\n\t\t};\n\n\t\tvar createCallback = function (data) {\n\t\t\treturn withProxyDependentObservable(dependentObservables, function () {\n\t\t\t\t\n\t\t\t\tif (ko.utils.unwrapObservable(parent) instanceof Array) {\n\t\t\t\t\treturn options[parentName].create({\n\t\t\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\t\t\tparent: callbackParams.parent,\n\t\t\t\t\t\tskip: emptyReturn\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn options[parentName].create({\n\t\t\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\t\t\tparent: callbackParams.parent\n\t\t\t\t\t});\n\t\t\t\t}\t\t\t\t\n\t\t\t});\n\t\t};\n\n\t\tvar hasUpdateCallback = function () {\n\t\t\treturn options[parentName] && options[parentName].update instanceof Function;\n\t\t};\n\n\t\tvar updateCallback = function (obj, data) {\n\t\t\tvar params = {\n\t\t\t\tdata: data || callbackParams.data,\n\t\t\t\tparent: callbackParams.parent,\n\t\t\t\ttarget: ko.utils.unwrapObservable(obj)\n\t\t\t};\n\n\t\t\tif (ko.isWriteableObservable(obj)) {\n\t\t\t\tparams.observable = obj;\n\t\t\t}\n\n\t\t\treturn options[parentName].update(params);\n\t\t}\n\n\t\tvar alreadyMapped = visitedObjects.get(rootObject);\n\t\tif (alreadyMapped) {\n\t\t\treturn alreadyMapped;\n\t\t}\n\n\t\tparentName = parentName || \"\";\n\n\t\tif (!isArray) {\n\t\t\t// For atomic types, do a direct update on the observable\n\t\t\tif (!canHaveProperties(rootObject)) {\n\t\t\t\tswitch (exports.getType(rootObject)) {\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\tif (ko.isWriteableObservable(rootObject)) {\n\t\t\t\t\t\t\trootObject(updateCallback(rootObject));\n\t\t\t\t\t\t\tmappedRootObject = rootObject;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmappedRootObject = updateCallback(rootObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmappedRootObject = rootObject;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (ko.isWriteableObservable(mappedRootObject)) {\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tvar valueToWrite = updateCallback(mappedRootObject);\n\t\t\t\t\t\t\tmappedRootObject(valueToWrite);\n\t\t\t\t\t\t\treturn valueToWrite;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar valueToWrite = ko.utils.unwrapObservable(rootObject);\n\t\t\t\t\t\t\tmappedRootObject(valueToWrite);\n\t\t\t\t\t\t\treturn valueToWrite;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar hasCreateOrUpdateCallback = hasCreateCallback() || hasUpdateCallback();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (hasCreateCallback()) {\n\t\t\t\t\t\t\tmappedRootObject = createCallback();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmappedRootObject = ko.observable(ko.utils.unwrapObservable(rootObject));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tmappedRootObject(updateCallback(mappedRootObject));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (hasCreateOrUpdateCallback) return mappedRootObject;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tmappedRootObject = ko.utils.unwrapObservable(mappedRootObject);\n\t\t\t\tif (!mappedRootObject) {\n\t\t\t\t\tif (hasCreateCallback()) {\n\t\t\t\t\t\tvar result = createCallback();\n\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\tresult = updateCallback(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\t\treturn updateCallback(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmappedRootObject = {};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\tmappedRootObject = updateCallback(mappedRootObject);\n\t\t\t\t}\n\n\t\t\t\tvisitedObjects.save(rootObject, mappedRootObject);\n\t\t\t\tif (hasUpdateCallback()) return mappedRootObject;\n\n\t\t\t\t// For non-atomic types, visit all properties and update recursively\n\t\t\t\tvisitPropertiesOrArrayEntries(rootObject, function (indexer) {\n\t\t\t\t\tvar fullPropertyName = parentPropertyName.length ? parentPropertyName + \".\" + indexer : indexer;\n\n\t\t\t\t\tif (ko.utils.arrayIndexOf(options.ignore, fullPropertyName) != -1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ko.utils.arrayIndexOf(options.copy, fullPropertyName) != -1) {\n\t\t\t\t\t\tmappedRootObject[indexer] = rootObject[indexer];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof rootObject[indexer] != \"object\" && typeof rootObject[indexer] != \"array\" && options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tmappedRootObject[indexer] = rootObject[indexer];\n\t\t\t\t\t\toptions.copiedProperties[fullPropertyName] = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// In case we are adding an already mapped property, fill it with the previously mapped property value to prevent recursion.\n\t\t\t\t\t// If this is a property that was generated by fromJS, we should use the options specified there\n\t\t\t\t\tvar prevMappedProperty = visitedObjects.get(rootObject[indexer]);\n\t\t\t\t\tvar retval = updateViewModel(mappedRootObject[indexer], rootObject[indexer], options, indexer, mappedRootObject, fullPropertyName, mappedRootObject);\n\t\t\t\t\tvar value = prevMappedProperty || retval;\n\t\t\t\t\t\n\t\t\t\t\tif(options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tmappedRootObject[indexer] = value();\n\t\t\t\t\t\toptions.copiedProperties[fullPropertyName] = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (ko.isWriteableObservable(mappedRootObject[indexer])) {\n\t\t\t\t\t\tvalue = ko.utils.unwrapObservable(value);\n\t\t\t\t\t\tif (mappedRootObject[indexer]() !== value) {\n\t\t\t\t\t\t\tmappedRootObject[indexer](value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = mappedRootObject[indexer] === undefined ? value : ko.utils.unwrapObservable(value);\n\t\t\t\t\t\tmappedRootObject[indexer] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\toptions.mappedProperties[fullPropertyName] = true;\n\t\t\t\t});\n\t\t\t}\n\t\t} else { //mappedRootObject is an array\n\t\t\tvar changes = [];\n\n\t\t\tvar hasKeyCallback = false;\n\t\t\tvar keyCallback = function (x) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\tif (options[parentName] && options[parentName].key) {\n\t\t\t\tkeyCallback = options[parentName].key;\n\t\t\t\thasKeyCallback = true;\n\t\t\t}\n\n\t\t\tif (!ko.isObservable(mappedRootObject)) {\n\t\t\t\t// When creating the new observable array, also add a bunch of utility functions that take the 'key' of the array items into account.\n\t\t\t\tmappedRootObject = ko.observableArray([]);\n\n\t\t\t\tmappedRootObject.mappedRemove = function (valueOrPredicate) {\n\t\t\t\t\tvar predicate = typeof valueOrPredicate == \"function\" ? valueOrPredicate : function (value) {\n\t\t\t\t\t\t\treturn value === keyCallback(valueOrPredicate);\n\t\t\t\t\t\t};\n\t\t\t\t\treturn mappedRootObject.remove(function (item) {\n\t\t\t\t\t\treturn predicate(keyCallback(item));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedRemoveAll = function (arrayOfValues) {\n\t\t\t\t\tvar arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);\n\t\t\t\t\treturn mappedRootObject.remove(function (item) {\n\t\t\t\t\t\treturn ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedDestroy = function (valueOrPredicate) {\n\t\t\t\t\tvar predicate = typeof valueOrPredicate == \"function\" ? valueOrPredicate : function (value) {\n\t\t\t\t\t\t\treturn value === keyCallback(valueOrPredicate);\n\t\t\t\t\t\t};\n\t\t\t\t\treturn mappedRootObject.destroy(function (item) {\n\t\t\t\t\t\treturn predicate(keyCallback(item));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedDestroyAll = function (arrayOfValues) {\n\t\t\t\t\tvar arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);\n\t\t\t\t\treturn mappedRootObject.destroy(function (item) {\n\t\t\t\t\t\treturn ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedIndexOf = function (item) {\n\t\t\t\t\tvar keys = filterArrayByKey(mappedRootObject(), keyCallback);\n\t\t\t\t\tvar key = keyCallback(item);\n\t\t\t\t\treturn ko.utils.arrayIndexOf(keys, key);\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedGet = function (item) {\n\t\t\t\t\treturn mappedRootObject()[mappedRootObject.mappedIndexOf(item)];\n\t\t\t\t}\n\n\t\t\t\tmappedRootObject.mappedCreate = function (value) {\n\t\t\t\t\tif (mappedRootObject.mappedIndexOf(value) !== -1) {\n\t\t\t\t\t\tthrow new Error(\"There already is an object with the key that you specified.\");\n\t\t\t\t\t}\n\n\t\t\t\t\tvar item = hasCreateCallback() ? createCallback(value) : value;\n\t\t\t\t\tif (hasUpdateCallback()) {\n\t\t\t\t\t\tvar newValue = updateCallback(item, value);\n\t\t\t\t\t\tif (ko.isWriteableObservable(item)) {\n\t\t\t\t\t\t\titem(newValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem = newValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmappedRootObject.push(item);\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar currentArrayKeys = filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject), keyCallback).sort();\n\t\t\tvar newArrayKeys = filterArrayByKey(rootObject, keyCallback);\n\t\t\tif (hasKeyCallback) newArrayKeys.sort();\n\t\t\tvar editScript = ko.utils.compareArrays(currentArrayKeys, newArrayKeys);\n\n\t\t\tvar ignoreIndexOf = {};\n\t\t\t\n\t\t\tvar i, j;\n\n\t\t\tvar unwrappedRootObject = ko.utils.unwrapObservable(rootObject);\n\t\t\tvar itemsByKey = {};\n\t\t\tvar optimizedKeys = true;\n\t\t\tfor (i = 0, j = unwrappedRootObject.length; i < j; i++) {\n\t\t\t\tvar key = keyCallback(unwrappedRootObject[i]);\n\t\t\t\tif (key === undefined || key instanceof Object) {\n\t\t\t\t\toptimizedKeys = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\titemsByKey[key] = unwrappedRootObject[i];\n\t\t\t}\n\n\t\t\tvar newContents = [];\n\t\t\tvar passedOver = 0;\n\t\t\tfor (i = 0, j = editScript.length; i < j; i++) {\n\t\t\t\tvar key = editScript[i];\n\t\t\t\tvar mappedItem;\n\t\t\t\tvar fullPropertyName = parentPropertyName + \"[\" + i + \"]\";\n\t\t\t\tswitch (key.status) {\n\t\t\t\tcase \"added\":\n\t\t\t\t\tvar item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);\n\t\t\t\t\tmappedItem = updateViewModel(undefined, item, options, parentName, mappedRootObject, fullPropertyName, parent);\n\t\t\t\t\tif(!hasCreateCallback()) {\n\t\t\t\t\t\tmappedItem = ko.utils.unwrapObservable(mappedItem);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);\n\t\t\t\t\t\n\t\t\t\t\tif (mappedItem === emptyReturn) {\n\t\t\t\t\t\tpassedOver++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewContents[index - passedOver] = mappedItem;\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tignoreIndexOf[index] = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"retained\":\n\t\t\t\t\tvar item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);\n\t\t\t\t\tmappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);\n\t\t\t\t\tupdateViewModel(mappedItem, item, options, parentName, mappedRootObject, fullPropertyName, parent);\n\n\t\t\t\t\tvar index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);\n\t\t\t\t\tnewContents[index] = mappedItem;\n\t\t\t\t\tignoreIndexOf[index] = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"deleted\":\n\t\t\t\t\tmappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tchanges.push({\n\t\t\t\t\tevent: key.status,\n\t\t\t\t\titem: mappedItem\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tmappedRootObject(newContents);\n\n\t\t\tif (options[parentName] && options[parentName].arrayChanged) {\n\t\t\t\tko.utils.arrayForEach(changes, function (change) {\n\t\t\t\t\toptions[parentName].arrayChanged(change.event, change.item);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn mappedRootObject;\n\t}\n\n\tfunction ignorableIndexOf(array, item, ignoreIndices) {\n\t\tfor (var i = 0, j = array.length; i < j; i++) {\n\t\t\tif (ignoreIndices[i] === true) continue;\n\t\t\tif (array[i] === item) return i;\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction mapKey(item, callback) {\n\t\tvar mappedItem;\n\t\tif (callback) mappedItem = callback(item);\n\t\tif (exports.getType(mappedItem) === \"undefined\") mappedItem = item;\n\n\t\treturn ko.utils.unwrapObservable(mappedItem);\n\t}\n\n\tfunction getItemByKey(array, key, callback) {\n\t\tarray = ko.utils.unwrapObservable(array);\n\t\tfor (var i = 0, j = array.length; i < j; i++) {\n\t\t\tvar item = array[i];\n\t\t\tif (mapKey(item, callback) === key) return item;\n\t\t}\n\n\t\tthrow new Error(\"When calling ko.update*, the key '\" + key + \"' was not found!\");\n\t}\n\n\tfunction filterArrayByKey(array, callback) {\n\t\treturn ko.utils.arrayMap(ko.utils.unwrapObservable(array), function (item) {\n\t\t\tif (callback) {\n\t\t\t\treturn mapKey(item, callback);\n\t\t\t} else {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction visitPropertiesOrArrayEntries(rootObject, visitorCallback) {\n\t\tif (exports.getType(rootObject) === \"array\") {\n\t\t\tfor (var i = 0; i < rootObject.length; i++)\n\t\t\tvisitorCallback(i);\n\t\t} else {\n\t\t\tfor (var propertyName in rootObject)\n\t\t\tvisitorCallback(propertyName);\n\t\t}\n\t};\n\n\tfunction canHaveProperties(object) {\n\t\tvar type = exports.getType(object);\n\t\treturn ((type === \"object\") || (type === \"array\")) && (object !== null);\n\t}\n\n\t// Based on the parentName, this creates a fully classified name of a property\n\n\tfunction getPropertyName(parentName, parent, indexer) {\n\t\tvar propertyName = parentName || \"\";\n\t\tif (exports.getType(parent) === \"array\") {\n\t\t\tif (parentName) {\n\t\t\t\tpropertyName += \"[\" + indexer + \"]\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (parentName) {\n\t\t\t\tpropertyName += \".\";\n\t\t\t}\n\t\t\tpropertyName += indexer;\n\t\t}\n\t\treturn propertyName;\n\t}\n\n\texports.visitModel = function (rootObject, callback, options) {\n\t\toptions = options || {};\n\t\toptions.visitedObjects = options.visitedObjects || new objectLookup();\n\n\t\tvar mappedRootObject;\n\t\tvar unwrappedRootObject = ko.utils.unwrapObservable(rootObject);\n\n\t\tif (!canHaveProperties(unwrappedRootObject)) {\n\t\t\treturn callback(rootObject, options.parentName);\n\t\t} else {\n\t\t\toptions = fillOptions(options, unwrappedRootObject[mappingProperty]);\n\n\t\t\t// Only do a callback, but ignore the results\n\t\t\tcallback(rootObject, options.parentName);\n\t\t\tmappedRootObject = exports.getType(unwrappedRootObject) === \"array\" ? [] : {};\n\t\t}\n\n\t\toptions.visitedObjects.save(rootObject, mappedRootObject);\n\n\t\tvar parentName = options.parentName;\n\t\tvisitPropertiesOrArrayEntries(unwrappedRootObject, function (indexer) {\n\t\t\tif (options.ignore && ko.utils.arrayIndexOf(options.ignore, indexer) != -1) return;\n\n\t\t\tvar propertyValue = unwrappedRootObject[indexer];\n\t\t\toptions.parentName = getPropertyName(parentName, unwrappedRootObject, indexer);\n\n\t\t\t// If we don't want to explicitly copy the unmapped property...\n\t\t\tif (ko.utils.arrayIndexOf(options.copy, indexer) === -1) {\n\t\t\t\t// ...find out if it's a property we want to explicitly include\n\t\t\t\tif (ko.utils.arrayIndexOf(options.include, indexer) === -1) {\n\t\t\t\t\t// The mapped properties object contains all the properties that were part of the original object.\n\t\t\t\t\t// If a property does not exist, and it is not because it is part of an array (e.g. \"myProp[3]\"), then it should not be unmapped.\n\t\t\t\t    if (unwrappedRootObject[mappingProperty]\n\t\t\t\t        && unwrappedRootObject[mappingProperty].mappedProperties && !unwrappedRootObject[mappingProperty].mappedProperties[indexer]\n\t\t\t\t        && unwrappedRootObject[mappingProperty].copiedProperties && !unwrappedRootObject[mappingProperty].copiedProperties[indexer]\n\t\t\t\t        && !(exports.getType(unwrappedRootObject) === \"array\")) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar outputProperty;\n\t\t\tswitch (exports.getType(ko.utils.unwrapObservable(propertyValue))) {\n\t\t\tcase \"object\":\n\t\t\tcase \"array\":\n\t\t\tcase \"undefined\":\n\t\t\t\tvar previouslyMappedValue = options.visitedObjects.get(propertyValue);\n\t\t\t\tmappedRootObject[indexer] = (exports.getType(previouslyMappedValue) !== \"undefined\") ? previouslyMappedValue : exports.visitModel(propertyValue, callback, options);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmappedRootObject[indexer] = callback(propertyValue, options.parentName);\n\t\t\t}\n\t\t});\n\n\t\treturn mappedRootObject;\n\t}\n\n\tfunction simpleObjectLookup() {\n\t\tvar keys = [];\n\t\tvar values = [];\n\t\tthis.save = function (key, value) {\n\t\t\tvar existingIndex = ko.utils.arrayIndexOf(keys, key);\n\t\t\tif (existingIndex >= 0) values[existingIndex] = value;\n\t\t\telse {\n\t\t\t\tkeys.push(key);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t};\n\t\tthis.get = function (key) {\n\t\t\tvar existingIndex = ko.utils.arrayIndexOf(keys, key);\n\t\t\tvar value = (existingIndex >= 0) ? values[existingIndex] : undefined;\n\t\t\treturn value;\n\t\t};\n\t};\n\t\n\tfunction objectLookup() {\n\t\tvar buckets = {};\n\t\t\n\t\tvar findBucket = function(key) {\n\t\t\tvar bucketKey;\n\t\t\ttry {\n\t\t\t\tbucketKey = key;//JSON.stringify(key);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tbucketKey = \"$$$\";\n\t\t\t}\n\n\t\t\tvar bucket = buckets[bucketKey];\n\t\t\tif (bucket === undefined) {\n\t\t\t\tbucket = new simpleObjectLookup();\n\t\t\t\tbuckets[bucketKey] = bucket;\n\t\t\t}\n\t\t\treturn bucket;\n\t\t};\n\t\t\n\t\tthis.save = function (key, value) {\n\t\t\tfindBucket(key).save(key, value);\n\t\t};\n\t\tthis.get = function (key) {\n\t\t\treturn findBucket(key).get(key);\n\t\t};\n\t};\n}));","// Knockout Fast Mapping v0.1\n// License: MIT (http://www.opensource.org/licenses/mit-license.php)\n\n(function (factory) {\n\t// Module systems magic dance.\n\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\n\t\t// CommonJS or Node: hard-coded dependency on \"knockout\"\n\t\tfactory((typeof window !== \"undefined\" ? window['ko'] : typeof global !== \"undefined\" ? global['ko'] : null), exports);\n\t} else if (typeof define === \"function\" && define[\"amd\"]) {\n\t\t// AMD anonymous module with hard-coded dependency on \"knockout\"\n\t\tdefine([\"knockout\", \"exports\"], factory);\n\t} else {\n\t\t// <script> tag: use the global `ko` object, attaching a `wrap` property\n\t\tfactory(ko, ko.wrap = {});\n\t}\n}(function (ko, exports) {\n    \n    // this function mimics ko.mapping\n    exports.fromJS = function(jsObject, computedFunctions)\n    {\n        reset();\n\treturn wrap(jsObject, computedFunctions);\n    }\n\n    // this function unwraps the outer for assigning the result to an observable\n    // see https://github.com/SteveSanderson/knockout/issues/517\n    exports.updateFromJS = function(observable, jsObject, computedFunctions)\n    {\n        reset();\n\treturn observable(ko.utils.unwrapObservable(wrap(jsObject, computedFunctions)));\n    }\n\n    exports.fromJSON = function (jsonString, computedFunctions) {\n\tvar parsed = ko.utils.parseJson(jsonString);\n\targuments[0] = parsed;\n\treturn exports.fromJS.apply(this, computedFunctions);\n    };\n    \n    exports.toJS = function (observable) {\n\treturn unwrap(observable);\n    }\n\n    exports.toJSON = function (observable) {\n\tvar plainJavaScriptObject = exports.toJS(observable);\n\treturn ko.utils.stringifyJson(plainJavaScriptObject);\n    };\n\n    function typeOf(value) {\n\tvar s = typeof value;\n\tif (s === 'object') {\n            if (value) {\n                if (value.constructor == Date)\n                    s = 'date';\n\t\telse if (Object.prototype.toString.call(value) == '[object Array]')\n                    s = 'array';\n            } else {\n\t\ts = 'null';\n            }\n\t}\n\treturn s;\n    }\n\n    // unwrapping\n    function unwrapObject(o)\n    {\n\tvar t = {};\n\n\tfor (var k in o)\n\t{\n\t    var v = o[k];\n\n\t    if (ko.isComputed(v))\n\t\tcontinue;\n\n\t    t[k] = unwrap(v);\n\t}\n\n\treturn t;\n    }\n\n    function unwrapArray(a)\n    {\n\tvar r = [];\n\n\tif (!a || a.length == 0)\n\t    return r;\n\t\n\tfor (var i = 0, l = a.length; i < l; ++i)\n\t    r.push(unwrap(a[i]));\n\n\treturn r;\n    }\n\n    function unwrap(v)\n    {\n\tvar isObservable = ko.isObservable(v);\n\n\tif (isObservable)\n\t{\n\t    var val = v();\n\n\t    return unwrap(val);\n\t}\n\telse\n\t{\n\t    if (typeOf(v) == \"array\")\n\t    {\n\t\treturn unwrapArray(v);\n\t    }\n\t    else if (typeOf(v) == \"object\")\n\t    {\n\t\treturn unwrapObject(v);\n\t    }\n\t    else\n\t    {\n\t\treturn v;\n\t    }\n\t}\n    }\n\n    function reset()\n    {\n        parents = [{obj: null, wrapped: null, lvl: \"\"}];\n    }    \n    \n    // wrapping\n\n    function wrapObject(o, computedFunctions)\n    {\n        // check for infinite recursion\n        for (var i = 0; i < parents.length; ++i) {\n            if (parents[i].obj === o) {\n                return parents[i].wrapped;\n            }\n        }\n\n\tvar t = {};\n\n\tfor (var k in o)\n\t{\n\t    var v = o[k];\n\n            parents.push({obj: o, wrapped: t, lvl: currentLvl() + \"/\" + k});\n\n\t    t[k] = wrap(v, computedFunctions);\n\n            parents.pop();\n\t}\n\n\tif (computedFunctions && computedFunctions[currentLvl()])\n\t    t = computedFunctions[currentLvl()](t);\n\n        if (hasES5Plugin())\n            ko.track(t);\n\n\treturn t;\n    }\n\n    function wrapArray(a, computedFunctions)\n    {\n\tvar r = ko.observableArray();\n\n\tif (!a || a.length == 0)\n\t    return r;\n\n\tfor (var i = 0, l = a.length; i < l; ++i)\n\t    r.push(wrap(a[i], computedFunctions));\n\n\treturn r;\n    }\n\n    // a stack, used for two purposes:\n    //  - circular reference checking\n    //  - computed functions\n    var parents;\n\n    function currentLvl()\n    {\n\treturn parents[parents.length-1].lvl;\n    }\n\n    function wrap(v, computedFunctions)\n    {\n\tif (typeOf(v) == \"array\")\n\t{\n\t    return wrapArray(v, computedFunctions);\n\t}\n\telse if (typeOf(v) == \"object\")\n\t{\n\t    return wrapObject(v, computedFunctions);\n\t}\n\telse\n\t{\n            if (!hasES5Plugin() && typeof v !== 'function')\n            {\n\t        var t = ko.observable();\n\t        t(v);\n\t        return t;\n            } else\n                return v;\n\t}\n    }\n\n    function hasES5Plugin()\n    {\n        return ko.track != null;\n    }\n}));"]}